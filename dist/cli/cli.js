#!/usr/bin/env bun
// @bun
var D9=Object.create;var{getPrototypeOf:P9,defineProperty:P1,getOwnPropertyNames:O9}=Object;var y9=Object.prototype.hasOwnProperty;var v2=(q,J,$)=>{$=q!=null?D9(P9(q)):{};let Z=J||!q||!q.__esModule?P1($,"default",{value:q,enumerable:!0}):$;for(let Q of O9(q))if(!y9.call(Z,Q))P1(Z,Q,{get:()=>q[Q],enumerable:!0});return Z};var E=(q,J)=>()=>(J||q((J={exports:{}}).exports,J),J.exports);var M=import.meta.require;var d1=E((g1)=>{Object.defineProperty(g1,"__esModule",{value:!0})});var b2=E((u1)=>{Object.defineProperty(u1,"__esModule",{value:!0});u1.IcnsFileHeader=void 0;class x2{constructor(q="icns",J=8){this.identifier=q,this.bytes=J}static from(q){let J=q.toString("ascii",0,4),$=q.readUInt32BE(4);return new x2(J,$)}get data(){let q=Buffer.alloc(8);return q.write(this.identifier,0,4,"ascii"),q.writeUInt32BE(this.bytes,4),q}}u1.IcnsFileHeader=x2});var h2=E(($Q,c1)=>{var f9=M("util"),l1=M("stream"),J0=c1.exports=function(){l1.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};f9.inherits(J0,l1);J0.prototype.read=function(q,J){this._reads.push({length:Math.abs(q),allowLess:q<0,func:J}),process.nextTick(function(){if(this._process(),this._paused&&this._reads&&this._reads.length>0)this._paused=!1,this.emit("drain")}.bind(this))};J0.prototype.write=function(q,J){if(!this.writable)return this.emit("error",Error("Stream not writable")),!1;let $;if(Buffer.isBuffer(q))$=q;else $=Buffer.from(q,J||this._encoding);if(this._buffers.push($),this._buffered+=$.length,this._process(),this._reads&&this._reads.length===0)this._paused=!0;return this.writable&&!this._paused};J0.prototype.end=function(q,J){if(q)this.write(q,J);if(this.writable=!1,!this._buffers)return;if(this._buffers.length===0)this._end();else this._buffers.push(null),this._process()};J0.prototype.destroySoon=J0.prototype.end;J0.prototype._end=function(){if(this._reads.length>0)this.emit("error",Error("Unexpected end of input"));this.destroy()};J0.prototype.destroy=function(){if(!this._buffers)return;this.writable=!1,this._reads=null,this._buffers=null,this.emit("close")};J0.prototype._processReadAllowingLess=function(q){this._reads.shift();let J=this._buffers[0];if(J.length>q.length)this._buffered-=q.length,this._buffers[0]=J.slice(q.length),q.func.call(this,J.slice(0,q.length));else this._buffered-=J.length,this._buffers.shift(),q.func.call(this,J)};J0.prototype._processRead=function(q){this._reads.shift();let J=0,$=0,Z=Buffer.alloc(q.length);while(J<q.length){let Q=this._buffers[$++],K=Math.min(Q.length,q.length-J);if(Q.copy(Z,J,0,K),J+=K,K!==Q.length)this._buffers[--$]=Q.slice(K)}if($>0)this._buffers.splice(0,$);this._buffered-=q.length,q.func.call(this,Z)};J0.prototype._process=function(){try{while(this._buffered>0&&this._reads&&this._reads.length>0){let q=this._reads[0];if(q.allowLess)this._processReadAllowingLess(q);else if(this._buffered>=q.length)this._processRead(q);else break}if(this._buffers&&!this.writable)this._end()}catch(q){this.emit("error",q)}}});var f2=E((g9)=>{var R0=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];g9.getImagePasses=function(q,J){let $=[],Z=q%8,Q=J%8,K=(q-Z)/8,U=(J-Q)/8;for(let Y=0;Y<R0.length;Y++){let X=R0[Y],G=K*X.x.length,W=U*X.y.length;for(let B=0;B<X.x.length;B++)if(X.x[B]<Z)G++;else break;for(let B=0;B<X.y.length;B++)if(X.y[B]<Q)W++;else break;if(G>0&&W>0)$.push({width:G,height:W,index:Y})}return $};g9.getInterlaceIterator=function(q){return function(J,$,Z){let Q=J%R0[Z].x.length,K=(J-Q)/R0[Z].x.length*8+R0[Z].x[Q],U=$%R0[Z].y.length,Y=($-U)/R0[Z].y.length*8+R0[Z].y[U];return K*4+Y*q*4}}});var g2=E((QQ,r1)=>{r1.exports=function(J,$,Z){let Q=J+$-Z,K=Math.abs(Q-J),U=Math.abs(Q-$),Y=Math.abs(Q-Z);if(K<=U&&K<=Y)return J;if(U<=Y)return $;return Z}});var d2=E((KQ,p1)=>{var m9=f2(),l9=g2();function a1(q,J,$){let Z=q*J;if($!==8)Z=Math.ceil(Z/(8/$));return Z}var v0=p1.exports=function(q,J){let{width:$,height:Z,interlace:Q,bpp:K,depth:U}=q;if(this.read=J.read,this.write=J.write,this.complete=J.complete,this._imageIndex=0,this._images=[],Q){let Y=m9.getImagePasses($,Z);for(let X=0;X<Y.length;X++)this._images.push({byteWidth:a1(Y[X].width,K,U),height:Y[X].height,lineIndex:0})}else this._images.push({byteWidth:a1($,K,U),height:Z,lineIndex:0});if(U===8)this._xComparison=K;else if(U===16)this._xComparison=K*2;else this._xComparison=1};v0.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};v0.prototype._unFilterType1=function(q,J,$){let Z=this._xComparison,Q=Z-1;for(let K=0;K<$;K++){let U=q[1+K],Y=K>Q?J[K-Z]:0;J[K]=U+Y}};v0.prototype._unFilterType2=function(q,J,$){let Z=this._lastLine;for(let Q=0;Q<$;Q++){let K=q[1+Q],U=Z?Z[Q]:0;J[Q]=K+U}};v0.prototype._unFilterType3=function(q,J,$){let Z=this._xComparison,Q=Z-1,K=this._lastLine;for(let U=0;U<$;U++){let Y=q[1+U],X=K?K[U]:0,G=U>Q?J[U-Z]:0,W=Math.floor((G+X)/2);J[U]=Y+W}};v0.prototype._unFilterType4=function(q,J,$){let Z=this._xComparison,Q=Z-1,K=this._lastLine;for(let U=0;U<$;U++){let Y=q[1+U],X=K?K[U]:0,G=U>Q?J[U-Z]:0,W=U>Q&&K?K[U-Z]:0,B=l9(G,X,W);J[U]=Y+B}};v0.prototype._reverseFilterLine=function(q){let J=q[0],$,Z=this._images[this._imageIndex],Q=Z.byteWidth;if(J===0)$=q.slice(1,Q+1);else switch($=Buffer.alloc(Q),J){case 1:this._unFilterType1(q,$,Q);break;case 2:this._unFilterType2(q,$,Q);break;case 3:this._unFilterType3(q,$,Q);break;case 4:this._unFilterType4(q,$,Q);break;default:throw Error("Unrecognised filter type - "+J)}if(this.write($),Z.lineIndex++,Z.lineIndex>=Z.height)this._lastLine=null,this._imageIndex++,Z=this._images[this._imageIndex];else this._lastLine=$;if(Z)this.read(Z.byteWidth+1,this._reverseFilterLine.bind(this));else this._lastLine=null,this.complete()}});var s1=E((UQ,e1)=>{var c9=M("util"),n1=h2(),r9=d2(),a9=e1.exports=function(q){n1.call(this);let J=[],$=this;this._filter=new r9(q,{read:this.read.bind(this),write:function(Z){J.push(Z)},complete:function(){$.emit("complete",Buffer.concat(J))}}),this._filter.start()};c9.inherits(a9,n1)});var x0=E((YQ,i1)=>{i1.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}});var l2=E((HQ,t1)=>{var u2=[];(function(){for(let q=0;q<256;q++){let J=q;for(let $=0;$<8;$++)if(J&1)J=3988292384^J>>>1;else J=J>>>1;u2[q]=J}})();var m2=t1.exports=function(){this._crc=-1};m2.prototype.write=function(q){for(let J=0;J<q.length;J++)this._crc=u2[(this._crc^q[J])&255]^this._crc>>>8;return!0};m2.prototype.crc32=function(){return this._crc^-1};m2.crc32=function(q){let J=-1;for(let $=0;$<q.length;$++)J=u2[(J^q[$])&255]^J>>>8;return J^-1}});var c2=E((XQ,o1)=>{var x=x0(),p9=l2(),h=o1.exports=function(q,J){this._options=q,q.checkCRC=q.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[x.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[x.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[x.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[x.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[x.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[x.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=J.read,this.error=J.error,this.metadata=J.metadata,this.gamma=J.gamma,this.transColor=J.transColor,this.palette=J.palette,this.parsed=J.parsed,this.inflateData=J.inflateData,this.finished=J.finished,this.simpleTransparency=J.simpleTransparency,this.headersFinished=J.headersFinished||function(){}};h.prototype.start=function(){this.read(x.PNG_SIGNATURE.length,this._parseSignature.bind(this))};h.prototype._parseSignature=function(q){let J=x.PNG_SIGNATURE;for(let $=0;$<J.length;$++)if(q[$]!==J[$]){this.error(Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};h.prototype._parseChunkBegin=function(q){let J=q.readUInt32BE(0),$=q.readUInt32BE(4),Z="";for(let K=4;K<8;K++)Z+=String.fromCharCode(q[K]);let Q=Boolean(q[4]&32);if(!this._hasIHDR&&$!==x.TYPE_IHDR){this.error(Error("Expected IHDR on beggining"));return}if(this._crc=new p9,this._crc.write(Buffer.from(Z)),this._chunks[$])return this._chunks[$](J);if(!Q){this.error(Error("Unsupported critical chunk type "+Z));return}this.read(J+4,this._skipChunk.bind(this))};h.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};h.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};h.prototype._parseChunkEnd=function(q){let J=q.readInt32BE(0),$=this._crc.crc32();if(this._options.checkCRC&&$!==J){this.error(Error("Crc error - "+J+" - "+$));return}if(!this._hasIEND)this.read(8,this._parseChunkBegin.bind(this))};h.prototype._handleIHDR=function(q){this.read(q,this._parseIHDR.bind(this))};h.prototype._parseIHDR=function(q){this._crc.write(q);let J=q.readUInt32BE(0),$=q.readUInt32BE(4),Z=q[8],Q=q[9],K=q[10],U=q[11],Y=q[12];if(Z!==8&&Z!==4&&Z!==2&&Z!==1&&Z!==16){this.error(Error("Unsupported bit depth "+Z));return}if(!(Q in x.COLORTYPE_TO_BPP_MAP)){this.error(Error("Unsupported color type"));return}if(K!==0){this.error(Error("Unsupported compression method"));return}if(U!==0){this.error(Error("Unsupported filter method"));return}if(Y!==0&&Y!==1){this.error(Error("Unsupported interlace method"));return}this._colorType=Q;let X=x.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:J,height:$,depth:Z,interlace:Boolean(Y),palette:Boolean(Q&x.COLORTYPE_PALETTE),color:Boolean(Q&x.COLORTYPE_COLOR),alpha:Boolean(Q&x.COLORTYPE_ALPHA),bpp:X,colorType:Q}),this._handleChunkEnd()};h.prototype._handlePLTE=function(q){this.read(q,this._parsePLTE.bind(this))};h.prototype._parsePLTE=function(q){this._crc.write(q);let J=Math.floor(q.length/3);for(let $=0;$<J;$++)this._palette.push([q[$*3],q[$*3+1],q[$*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};h.prototype._handleTRNS=function(q){this.simpleTransparency(),this.read(q,this._parseTRNS.bind(this))};h.prototype._parseTRNS=function(q){if(this._crc.write(q),this._colorType===x.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(Error("Transparency chunk must be after palette"));return}if(q.length>this._palette.length){this.error(Error("More transparent colors than palette size"));return}for(let J=0;J<q.length;J++)this._palette[J][3]=q[J];this.palette(this._palette)}if(this._colorType===x.COLORTYPE_GRAYSCALE)this.transColor([q.readUInt16BE(0)]);if(this._colorType===x.COLORTYPE_COLOR)this.transColor([q.readUInt16BE(0),q.readUInt16BE(2),q.readUInt16BE(4)]);this._handleChunkEnd()};h.prototype._handleGAMA=function(q){this.read(q,this._parseGAMA.bind(this))};h.prototype._parseGAMA=function(q){this._crc.write(q),this.gamma(q.readUInt32BE(0)/x.GAMMA_DIVISION),this._handleChunkEnd()};h.prototype._handleIDAT=function(q){if(!this._emittedHeadersFinished)this._emittedHeadersFinished=!0,this.headersFinished();this.read(-q,this._parseIDAT.bind(this,q))};h.prototype._parseIDAT=function(q,J){if(this._crc.write(J),this._colorType===x.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw Error("Expected palette not found");this.inflateData(J);let $=q-J.length;if($>0)this._handleIDAT($);else this._handleChunkEnd()};h.prototype._handleIEND=function(q){this.read(q,this._parseIEND.bind(this))};h.prototype._parseIEND=function(q){if(this._crc.write(q),this._hasIEND=!0,this._handleChunkEnd(),this.finished)this.finished()}});var r2=E((o9)=>{var q5=f2(),n9=[function(){},function(q,J,$,Z){if(Z===J.length)throw Error("Ran out of data");let Q=J[Z];q[$]=Q,q[$+1]=Q,q[$+2]=Q,q[$+3]=255},function(q,J,$,Z){if(Z+1>=J.length)throw Error("Ran out of data");let Q=J[Z];q[$]=Q,q[$+1]=Q,q[$+2]=Q,q[$+3]=J[Z+1]},function(q,J,$,Z){if(Z+2>=J.length)throw Error("Ran out of data");q[$]=J[Z],q[$+1]=J[Z+1],q[$+2]=J[Z+2],q[$+3]=255},function(q,J,$,Z){if(Z+3>=J.length)throw Error("Ran out of data");q[$]=J[Z],q[$+1]=J[Z+1],q[$+2]=J[Z+2],q[$+3]=J[Z+3]}],e9=[function(){},function(q,J,$,Z){let Q=J[0];q[$]=Q,q[$+1]=Q,q[$+2]=Q,q[$+3]=Z},function(q,J,$){let Z=J[0];q[$]=Z,q[$+1]=Z,q[$+2]=Z,q[$+3]=J[1]},function(q,J,$,Z){q[$]=J[0],q[$+1]=J[1],q[$+2]=J[2],q[$+3]=Z},function(q,J,$){q[$]=J[0],q[$+1]=J[1],q[$+2]=J[2],q[$+3]=J[3]}];function s9(q,J){let $=[],Z=0;function Q(){if(Z===q.length)throw Error("Ran out of data");let K=q[Z];Z++;let U,Y,X,G,W,B,_,R;switch(J){default:throw Error("unrecognised depth");case 16:_=q[Z],Z++,$.push((K<<8)+_);break;case 4:_=K&15,R=K>>4,$.push(R,_);break;case 2:W=K&3,B=K>>2&3,_=K>>4&3,R=K>>6&3,$.push(R,_,B,W);break;case 1:U=K&1,Y=K>>1&1,X=K>>2&1,G=K>>3&1,W=K>>4&1,B=K>>5&1,_=K>>6&1,R=K>>7&1,$.push(R,_,B,W,G,X,Y,U);break}}return{get:function(K){while($.length<K)Q();let U=$.slice(0,K);return $=$.slice(K),U},resetAfterLine:function(){$.length=0},end:function(){if(Z!==q.length)throw Error("extra data found")}}}function i9(q,J,$,Z,Q,K){let{width:U,height:Y,index:X}=q;for(let G=0;G<Y;G++)for(let W=0;W<U;W++){let B=$(W,G,X);n9[Z](J,Q,B,K),K+=Z}return K}function t9(q,J,$,Z,Q,K){let{width:U,height:Y,index:X}=q;for(let G=0;G<Y;G++){for(let W=0;W<U;W++){let B=Q.get(Z),_=$(W,G,X);e9[Z](J,B,_,K)}Q.resetAfterLine()}}o9.dataToBitMap=function(q,J){let{width:$,height:Z,depth:Q,bpp:K,interlace:U}=J,Y;if(Q!==8)Y=s9(q,Q);let X;if(Q<=8)X=Buffer.alloc($*Z*4);else X=new Uint16Array($*Z*4);let G=Math.pow(2,Q)-1,W=0,B,_;if(U)B=q5.getImagePasses($,Z),_=q5.getInterlaceIterator($,Z);else{let R=0;_=function(){let j=R;return R+=4,j},B=[{width:$,height:Z}]}for(let R=0;R<B.length;R++)if(Q===8)W=i9(B[R],X,_,K,q,W);else t9(B[R],X,_,K,Y,G);if(Q===8){if(W!==q.length)throw Error("extra data found")}else Y.end();return X}});var a2=E((NQ,J5)=>{function J8(q,J,$,Z,Q){let K=0;for(let U=0;U<Z;U++)for(let Y=0;Y<$;Y++){let X=Q[q[K]];if(!X)throw Error("index "+q[K]+" not in palette");for(let G=0;G<4;G++)J[K+G]=X[G];K+=4}}function $8(q,J,$,Z,Q){let K=0;for(let U=0;U<Z;U++)for(let Y=0;Y<$;Y++){let X=!1;if(Q.length===1){if(Q[0]===q[K])X=!0}else if(Q[0]===q[K]&&Q[1]===q[K+1]&&Q[2]===q[K+2])X=!0;if(X)for(let G=0;G<4;G++)J[K+G]=0;K+=4}}function Z8(q,J,$,Z,Q){let K=255,U=Math.pow(2,Q)-1,Y=0;for(let X=0;X<Z;X++)for(let G=0;G<$;G++){for(let W=0;W<4;W++)J[Y+W]=Math.floor(q[Y+W]*K/U+0.5);Y+=4}}J5.exports=function(q,J,$=!1){let{depth:Z,width:Q,height:K,colorType:U,transColor:Y,palette:X}=J,G=q;if(U===3)J8(q,G,Q,K,X);else{if(Y)$8(q,G,Q,K,Y);if(Z!==8&&!$){if(Z===16)G=Buffer.alloc(Q*K*4);Z8(q,G,Q,K,Z)}}return G}});var Q5=E((WQ,Z5)=>{var Q8=M("util"),p2=M("zlib"),$5=h2(),K8=s1(),U8=c2(),Y8=r2(),H8=a2(),Z0=Z5.exports=function(q){$5.call(this),this._parser=new U8(q,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=q,this.writable=!0,this._parser.start()};Q8.inherits(Z0,$5);Z0.prototype._handleError=function(q){if(this.emit("error",q),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy)this._inflate.destroy();if(this._filter)this._filter.destroy(),this._filter.on("error",function(){});this.errord=!0};Z0.prototype._inflateData=function(q){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=p2.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let $=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,Z=Math.max($,p2.Z_MIN_CHUNK);this._inflate=p2.createInflate({chunkSize:Z});let Q=$,K=this.emit.bind(this,"error");this._inflate.on("error",function(Y){if(!Q)return;K(Y)}),this._filter.on("complete",this._complete.bind(this));let U=this._filter.write.bind(this._filter);this._inflate.on("data",function(Y){if(!Q)return;if(Y.length>Q)Y=Y.slice(0,Q);Q-=Y.length,U(Y)}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(q)};Z0.prototype._handleMetaData=function(q){this._metaData=q,this._bitmapInfo=Object.create(q),this._filter=new K8(this._bitmapInfo)};Z0.prototype._handleTransColor=function(q){this._bitmapInfo.transColor=q};Z0.prototype._handlePalette=function(q){this._bitmapInfo.palette=q};Z0.prototype._simpleTransparency=function(){this._metaData.alpha=!0};Z0.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};Z0.prototype._finished=function(){if(this.errord)return;if(!this._inflate)this.emit("error","No Inflate block");else this._inflate.end()};Z0.prototype._complete=function(q){if(this.errord)return;let J;try{let $=Y8.dataToBitMap(q,this._bitmapInfo);J=H8($,this._bitmapInfo,this._options.skipRescale),$=null}catch($){this._handleError($);return}this.emit("parsed",J)}});var U5=E((BQ,K5)=>{var s=x0();K5.exports=function(q,J,$,Z){let Q=[s.COLORTYPE_COLOR_ALPHA,s.COLORTYPE_ALPHA].indexOf(Z.colorType)!==-1;if(Z.colorType===Z.inputColorType){let j=function(){let C=new ArrayBuffer(2);return new DataView(C).setInt16(0,256,!0),new Int16Array(C)[0]!==256}();if(Z.bitDepth===8||Z.bitDepth===16&&j)return q}let K=Z.bitDepth!==16?q:new Uint16Array(q.buffer),U=255,Y=s.COLORTYPE_TO_BPP_MAP[Z.inputColorType];if(Y===4&&!Z.inputHasAlpha)Y=3;let X=s.COLORTYPE_TO_BPP_MAP[Z.colorType];if(Z.bitDepth===16)U=65535,X*=2;let G=Buffer.alloc(J*$*X),W=0,B=0,_=Z.bgColor||{};if(_.red===void 0)_.red=U;if(_.green===void 0)_.green=U;if(_.blue===void 0)_.blue=U;function R(){let j,C,T,I=U;switch(Z.inputColorType){case s.COLORTYPE_COLOR_ALPHA:I=K[W+3],j=K[W],C=K[W+1],T=K[W+2];break;case s.COLORTYPE_COLOR:j=K[W],C=K[W+1],T=K[W+2];break;case s.COLORTYPE_ALPHA:I=K[W+1],j=K[W],C=j,T=j;break;case s.COLORTYPE_GRAYSCALE:j=K[W],C=j,T=j;break;default:throw Error("input color type:"+Z.inputColorType+" is not supported at present")}if(Z.inputHasAlpha){if(!Q)I/=U,j=Math.min(Math.max(Math.round((1-I)*_.red+I*j),0),U),C=Math.min(Math.max(Math.round((1-I)*_.green+I*C),0),U),T=Math.min(Math.max(Math.round((1-I)*_.blue+I*T),0),U)}return{red:j,green:C,blue:T,alpha:I}}for(let j=0;j<$;j++)for(let C=0;C<J;C++){let T=R(K,W);switch(Z.colorType){case s.COLORTYPE_COLOR_ALPHA:case s.COLORTYPE_COLOR:if(Z.bitDepth===8){if(G[B]=T.red,G[B+1]=T.green,G[B+2]=T.blue,Q)G[B+3]=T.alpha}else if(G.writeUInt16BE(T.red,B),G.writeUInt16BE(T.green,B+2),G.writeUInt16BE(T.blue,B+4),Q)G.writeUInt16BE(T.alpha,B+6);break;case s.COLORTYPE_ALPHA:case s.COLORTYPE_GRAYSCALE:{let I=(T.red+T.green+T.blue)/3;if(Z.bitDepth===8){if(G[B]=I,Q)G[B+1]=T.alpha}else if(G.writeUInt16BE(I,B),Q)G.writeUInt16BE(T.alpha,B+2);break}default:throw Error("unrecognised color Type "+Z.colorType)}W+=Y,B+=X}return G}});var X5=E((VQ,H5)=>{var Y5=g2();function X8(q,J,$,Z,Q){for(let K=0;K<$;K++)Z[Q+K]=q[J+K]}function G8(q,J,$){let Z=0,Q=J+$;for(let K=J;K<Q;K++)Z+=Math.abs(q[K]);return Z}function N8(q,J,$,Z,Q,K){for(let U=0;U<$;U++){let Y=U>=K?q[J+U-K]:0,X=q[J+U]-Y;Z[Q+U]=X}}function W8(q,J,$,Z){let Q=0;for(let K=0;K<$;K++){let U=K>=Z?q[J+K-Z]:0,Y=q[J+K]-U;Q+=Math.abs(Y)}return Q}function B8(q,J,$,Z,Q){for(let K=0;K<$;K++){let U=J>0?q[J+K-$]:0,Y=q[J+K]-U;Z[Q+K]=Y}}function V8(q,J,$){let Z=0,Q=J+$;for(let K=J;K<Q;K++){let U=J>0?q[K-$]:0,Y=q[K]-U;Z+=Math.abs(Y)}return Z}function _8(q,J,$,Z,Q,K){for(let U=0;U<$;U++){let Y=U>=K?q[J+U-K]:0,X=J>0?q[J+U-$]:0,G=q[J+U]-(Y+X>>1);Z[Q+U]=G}}function E8(q,J,$,Z){let Q=0;for(let K=0;K<$;K++){let U=K>=Z?q[J+K-Z]:0,Y=J>0?q[J+K-$]:0,X=q[J+K]-(U+Y>>1);Q+=Math.abs(X)}return Q}function R8(q,J,$,Z,Q,K){for(let U=0;U<$;U++){let Y=U>=K?q[J+U-K]:0,X=J>0?q[J+U-$]:0,G=J>0&&U>=K?q[J+U-($+K)]:0,W=q[J+U]-Y5(Y,X,G);Z[Q+U]=W}}function A8(q,J,$,Z){let Q=0;for(let K=0;K<$;K++){let U=K>=Z?q[J+K-Z]:0,Y=J>0?q[J+K-$]:0,X=J>0&&K>=Z?q[J+K-($+Z)]:0,G=q[J+K]-Y5(U,Y,X);Q+=Math.abs(G)}return Q}var L8={0:X8,1:N8,2:B8,3:_8,4:R8},j8={0:G8,1:W8,2:V8,3:E8,4:A8};H5.exports=function(q,J,$,Z,Q){let K;if(!("filterType"in Z)||Z.filterType===-1)K=[0,1,2,3,4];else if(typeof Z.filterType==="number")K=[Z.filterType];else throw Error("unrecognised filter types");if(Z.bitDepth===16)Q*=2;let U=J*Q,Y=0,X=0,G=Buffer.alloc((U+1)*$),W=K[0];for(let B=0;B<$;B++){if(K.length>1){let _=1/0;for(let R=0;R<K.length;R++){let j=j8[K[R]](q,X,U,Q);if(j<_)W=K[R],_=j}}G[Y]=W,Y++,L8[W](q,X,U,G,Y,Q),Y+=U,X+=U}return G}});var n2=E((_Q,G5)=>{var g=x0(),T8=l2(),F8=U5(),z8=X5(),I8=M("zlib"),A0=G5.exports=function(q){if(this._options=q,q.deflateChunkSize=q.deflateChunkSize||32768,q.deflateLevel=q.deflateLevel!=null?q.deflateLevel:9,q.deflateStrategy=q.deflateStrategy!=null?q.deflateStrategy:3,q.inputHasAlpha=q.inputHasAlpha!=null?q.inputHasAlpha:!0,q.deflateFactory=q.deflateFactory||I8.createDeflate,q.bitDepth=q.bitDepth||8,q.colorType=typeof q.colorType==="number"?q.colorType:g.COLORTYPE_COLOR_ALPHA,q.inputColorType=typeof q.inputColorType==="number"?q.inputColorType:g.COLORTYPE_COLOR_ALPHA,[g.COLORTYPE_GRAYSCALE,g.COLORTYPE_COLOR,g.COLORTYPE_COLOR_ALPHA,g.COLORTYPE_ALPHA].indexOf(q.colorType)===-1)throw Error("option color type:"+q.colorType+" is not supported at present");if([g.COLORTYPE_GRAYSCALE,g.COLORTYPE_COLOR,g.COLORTYPE_COLOR_ALPHA,g.COLORTYPE_ALPHA].indexOf(q.inputColorType)===-1)throw Error("option input color type:"+q.inputColorType+" is not supported at present");if(q.bitDepth!==8&&q.bitDepth!==16)throw Error("option bit depth:"+q.bitDepth+" is not supported at present")};A0.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};A0.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};A0.prototype.filterData=function(q,J,$){let Z=F8(q,J,$,this._options),Q=g.COLORTYPE_TO_BPP_MAP[this._options.colorType];return z8(Z,J,$,this._options,Q)};A0.prototype._packChunk=function(q,J){let $=J?J.length:0,Z=Buffer.alloc($+12);if(Z.writeUInt32BE($,0),Z.writeUInt32BE(q,4),J)J.copy(Z,8);return Z.writeInt32BE(T8.crc32(Z.slice(4,Z.length-4)),Z.length-4),Z};A0.prototype.packGAMA=function(q){let J=Buffer.alloc(4);return J.writeUInt32BE(Math.floor(q*g.GAMMA_DIVISION),0),this._packChunk(g.TYPE_gAMA,J)};A0.prototype.packIHDR=function(q,J){let $=Buffer.alloc(13);return $.writeUInt32BE(q,0),$.writeUInt32BE(J,4),$[8]=this._options.bitDepth,$[9]=this._options.colorType,$[10]=0,$[11]=0,$[12]=0,this._packChunk(g.TYPE_IHDR,$)};A0.prototype.packIDAT=function(q){return this._packChunk(g.TYPE_IDAT,q)};A0.prototype.packIEND=function(){return this._packChunk(g.TYPE_IEND,null)}});var V5=E((EQ,B5)=>{var C8=M("util"),N5=M("stream"),k8=x0(),M8=n2(),W5=B5.exports=function(q){N5.call(this);let J=q||{};this._packer=new M8(J),this._deflate=this._packer.createDeflate(),this.readable=!0};C8.inherits(W5,N5);W5.prototype.pack=function(q,J,$,Z){if(this.emit("data",Buffer.from(k8.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(J,$)),Z)this.emit("data",this._packer.packGAMA(Z));let Q=this._packer.filterData(q,J,$);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(K){this.emit("data",this._packer.packIDAT(K))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(Q)}});var j5=E((n0,L5)=>{var _5=M("assert").ok,b0=M("zlib"),S8=M("util"),E5=M("buffer").kMaxLength;function M0(q){if(!(this instanceof M0))return new M0(q);if(q&&q.chunkSize<b0.Z_MIN_CHUNK)q.chunkSize=b0.Z_MIN_CHUNK;if(b0.Inflate.call(this,q),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,q&&q.maxLength!=null)this._maxLength=q.maxLength}function w8(q){return new M0(q)}function R5(q,J){if(J)process.nextTick(J);if(!q._handle)return;q._handle.close(),q._handle=null}M0.prototype._processChunk=function(q,J,$){if(typeof $==="function")return b0.Inflate._processChunk.call(this,q,J,$);let Z=this,Q=q&&q.length,K=this._chunkSize-this._offset,U=this._maxLength,Y=0,X=[],G=0,W;this.on("error",function(j){W=j});function B(j,C){if(Z._hadError)return;let T=K-C;if(_5(T>=0,"have should not go down"),T>0){let I=Z._buffer.slice(Z._offset,Z._offset+T);if(Z._offset+=T,I.length>U)I=I.slice(0,U);if(X.push(I),G+=I.length,U-=I.length,U===0)return!1}if(C===0||Z._offset>=Z._chunkSize)K=Z._chunkSize,Z._offset=0,Z._buffer=Buffer.allocUnsafe(Z._chunkSize);if(C===0)return Y+=Q-j,Q=j,!0;return!1}_5(this._handle,"zlib binding closed");let _;do _=this._handle.writeSync(J,q,Y,Q,this._buffer,this._offset,K),_=_||this._writeState;while(!this._hadError&&B(_[0],_[1]));if(this._hadError)throw W;if(G>=E5)throw R5(this),RangeError("Cannot create final Buffer. It would be larger than 0x"+E5.toString(16)+" bytes");let R=Buffer.concat(X,G);return R5(this),R};S8.inherits(M0,b0.Inflate);function D8(q,J){if(typeof J==="string")J=Buffer.from(J);if(!(J instanceof Buffer))throw TypeError("Not a string or buffer");let $=q._finishFlushFlag;if($==null)$=b0.Z_FINISH;return q._processChunk(J,$)}function A5(q,J){return D8(new M0(J),q)}L5.exports=n0=A5;n0.Inflate=M0;n0.createInflate=w8;n0.inflateSync=A5});var e2=E((RQ,F5)=>{var T5=F5.exports=function(q){this._buffer=q,this._reads=[]};T5.prototype.read=function(q,J){this._reads.push({length:Math.abs(q),allowLess:q<0,func:J})};T5.prototype.process=function(){while(this._reads.length>0&&this._buffer.length){let q=this._reads[0];if(this._buffer.length&&(this._buffer.length>=q.length||q.allowLess)){this._reads.shift();let J=this._buffer;this._buffer=J.slice(q.length),q.func.call(this,J.slice(0,q.length))}else break}if(this._reads.length>0)throw Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)throw Error("unrecognised content at end of stream")}});var z5=E((y8)=>{var P8=e2(),O8=d2();y8.process=function(q,J){let $=[],Z=new P8(q);return new O8(J,{read:Z.read.bind(Z),write:function(K){$.push(K)},complete:function(){}}).start(),Z.process(),Buffer.concat($)}});var M5=E((LQ,k5)=>{var I5=!0,C5=M("zlib"),x8=j5();if(!C5.deflateSync)I5=!1;var b8=e2(),h8=z5(),f8=c2(),g8=r2(),d8=a2();k5.exports=function(q,J){if(!I5)throw Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let $;function Z(w){$=w}let Q;function K(w){Q=w}function U(w){Q.transColor=w}function Y(w){Q.palette=w}function X(){Q.alpha=!0}let G;function W(w){G=w}let B=[];function _(w){B.push(w)}let R=new b8(q);if(new f8(J,{read:R.read.bind(R),error:Z,metadata:K,gamma:W,palette:Y,transColor:U,inflateData:_,simpleTransparency:X}).start(),R.process(),$)throw $;let C=Buffer.concat(B);B.length=0;let T;if(Q.interlace)T=C5.inflateSync(C);else{let o=((Q.width*Q.bpp*Q.depth+7>>3)+1)*Q.height;T=x8(C,{chunkSize:o,maxLength:o})}if(C=null,!T||!T.length)throw Error("bad png - invalid inflate data response");let I=h8.process(T,Q);C=null;let S=g8.dataToBitMap(I,Q);I=null;let r=d8(S,Q,J.skipRescale);return Q.data=r,Q.gamma=G||0,Q}});var P5=E((jQ,D5)=>{var S5=!0,w5=M("zlib");if(!w5.deflateSync)S5=!1;var u8=x0(),m8=n2();D5.exports=function(q,J){if(!S5)throw Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let Z=new m8(J||{}),Q=[];if(Q.push(Buffer.from(u8.PNG_SIGNATURE)),Q.push(Z.packIHDR(q.width,q.height)),q.gamma)Q.push(Z.packGAMA(q.gamma));let K=Z.filterData(q.data,q.width,q.height),U=w5.deflateSync(K,Z.getDeflateOptions());if(K=null,!U||!U.length)throw Error("bad png - invalid compressed data response");return Q.push(Z.packIDAT(U)),Q.push(Z.packIEND()),Buffer.concat(Q)}});var O5=E((r8)=>{var l8=M5(),c8=P5();r8.read=function(q,J){return l8(q,J||{})};r8.write=function(q,J){return c8(q,J)}});var s2=E((t8)=>{var n8=M("util"),y5=M("stream"),e8=Q5(),s8=V5(),i8=O5(),u=t8.PNG=function(q){if(y5.call(this),q=q||{},this.width=q.width|0,this.height=q.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,q.fill&&this.data)this.data.fill(0);this.gamma=0,this.readable=this.writable=!0,this._parser=new e8(q),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(J){this.data=J,this.emit("parsed",J)}.bind(this)),this._packer=new s8(q),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};n8.inherits(u,y5);u.sync=i8;u.prototype.pack=function(){if(!this.data||!this.data.length)return this.emit("error","No data provided"),this;return process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this};u.prototype.parse=function(q,J){if(J){let $,Z;$=function(Q){this.removeListener("error",Z),this.data=Q,J(null,this)}.bind(this),Z=function(Q){this.removeListener("parsed",$),J(Q,null)}.bind(this),this.once("parsed",$),this.once("error",Z)}return this.end(q),this};u.prototype.write=function(q){return this._parser.write(q),!0};u.prototype.end=function(q){this._parser.end(q)};u.prototype._metadata=function(q){this.width=q.width,this.height=q.height,this.emit("metadata",q)};u.prototype._gamma=function(q){this.gamma=q};u.prototype._handleClose=function(){if(!this._parser.writable&&!this._packer.readable)this.emit("close")};u.bitblt=function(q,J,$,Z,Q,K,U,Y){if($|=0,Z|=0,Q|=0,K|=0,U|=0,Y|=0,$>q.width||Z>q.height||$+Q>q.width||Z+K>q.height)throw Error("bitblt reading outside image");if(U>J.width||Y>J.height||U+Q>J.width||Y+K>J.height)throw Error("bitblt writing outside image");for(let X=0;X<K;X++)q.data.copy(J.data,(Y+X)*J.width+U<<2,(Z+X)*q.width+$<<2,(Z+X)*q.width+$+Q<<2)};u.prototype.bitblt=function(q,J,$,Z,Q,K,U){return u.bitblt(this,q,J,$,Z,Q,K,U),this};u.adjustGamma=function(q){if(q.gamma){for(let J=0;J<q.height;J++)for(let $=0;$<q.width;$++){let Z=q.width*J+$<<2;for(let Q=0;Q<3;Q++){let K=q.data[Z+Q]/255;K=Math.pow(K,0.45454545454545453/q.gamma),q.data[Z+Q]=Math.round(K*255)}}q.gamma=0}};u.prototype.adjustGamma=function(){u.adjustGamma(this)}});var b5=E((v5)=>{Object.defineProperty(v5,"__esModule",{value:!0});v5.decode=v5.encode=void 0;var o8=(q)=>{let J=[],$=0;while($<q.length){let Z=q[$];if($+1>=q.length){let U=Buffer.from([0]);J.push(U),J.push(q.slice($,q.length));break}if(Z===q[$+1]){let K=$+1,U=2;while(++K<q.length&&Z===q[K]&&U<128)U++;let Y=Buffer.from([1-U,Z]);J.push(Y),$=K}else{let K=$+1,U=2,Y=q[K];while(++K<q.length&&Y!==q[K]&&U<128)U++,Y=q[K];if(Y===q[K])K--,U--;let X=Buffer.from([U-1]);J.push(X),J.push(q.slice($,K)),$=K}}return Buffer.concat(J)};v5.encode=o8;var qq=(q)=>{let J=[],$=0;while($<q.length){let Z=q.readInt8($);if(Z===-128){$++;continue}let Q;if(Z<0){let K=1-Z;Q=Buffer.alloc(K,q.slice($+1,$+2)),$+=2}else{let K=1+Z;Q=q.slice($+1,$+1+K),$+=1+K}J.push(Q)}return Buffer.concat(J)};v5.decode=qq});var g5=E((h5)=>{Object.defineProperty(h5,"__esModule",{value:!0});h5.decode=h5.encode=void 0;var $q=(q)=>{let J=[],$=0;while($<q.length){let Z=q[$];if($+2>=q.length){let K=q.length-$,U=Buffer.from([K-1]);J.push(U),J.push(q.slice($,q.length));break}if(Z===q[$+1]&&Z===q[$+2]){let K=$+2,U=3;while(++K<q.length&&Z===q[K]&&U<130)U++;let Y=Buffer.from([U+125,Z]);J.push(Y),$=K}else{let K=$+2,U=3,Y=q[K],X=1;while(++K<q.length&&U<128){if(Y===q[K]){if(++X>2)break}else Y=q[K],X=1;U++}if(X>2)K-=2,U-=2;let G=Buffer.from([U-1]);J.push(G),J.push(q.slice($,K)),$=K}}return Buffer.concat(J)};h5.encode=$q;var Zq=(q)=>{let J=[],$=0;while($<q.length){let Z=q[$];if(Z===256){$++;continue}let Q;if(Z>=128){let K=Z-125;Q=Buffer.alloc(K,q.slice($+1,$+2)),$+=2}else{let K=Z+1;Q=q.slice($+1,$+1+K),$+=1+K}J.push(Q)}return Buffer.concat(J)};h5.decode=Zq});var l5=E((i)=>{var Kq=i&&i.__createBinding||(Object.create?function(q,J,$,Z){if(Z===void 0)Z=$;Object.defineProperty(q,Z,{enumerable:!0,get:function(){return J[$]}})}:function(q,J,$,Z){if(Z===void 0)Z=$;q[Z]=J[$]}),Uq=i&&i.__setModuleDefault||(Object.create?function(q,J){Object.defineProperty(q,"default",{enumerable:!0,value:J})}:function(q,J){q.default=J}),d5=i&&i.__importStar||function(q){if(q&&q.__esModule)return q;var J={};if(q!=null){for(var $ in q)if($!=="default"&&Object.prototype.hasOwnProperty.call(q,$))Kq(J,q,$)}return Uq(J,q),J};Object.defineProperty(i,"__esModule",{value:!0});i.decode=i.encode=void 0;var u5=d5(b5()),m5=d5(g5()),Yq=(q,J={})=>{let{format:$}=Object.assign({format:"default"},J);return $==="icns"?m5.encode(q):u5.encode(q)};i.encode=Yq;var Hq=(q,J={})=>{let{format:$}=Object.assign({format:"default"},J);return $==="icns"?m5.decode(q):u5.decode(q)};i.decode=Hq});var t2=E((c5)=>{Object.defineProperty(c5,"__esModule",{value:!0});c5.Icns=void 0;var i2=b2(),Xq=o2();class Y2{constructor(q=new i2.IcnsFileHeader,J=[]){this._fileHeader=q,this._images=J}static from(q){let J=i2.IcnsFileHeader.from(q),$=J.data.length,Z=[];while($<J.bytes){let Q=Xq.IcnsImage.from(q.slice($));Z.push(Q),$+=Q.data.length}return new Y2(J,Z)}get fileHeader(){return this._fileHeader}get images(){return this._images}set images(q){this._images=q;let J=this._fileHeader.data.length+this._images.reduce(($,Z)=>$+Z.bytes,0);this._fileHeader=new i2.IcnsFileHeader("icns",J)}get data(){let q=[this._fileHeader.data,...this._images.map((J)=>J.data)];return Buffer.concat(q)}append(q){this.images=[...this.images,q]}insert(q,J){this.images=[...this.images.slice(0,J),q,...this.images.slice(J+1)]}remove(q){this.images=[...this.images.slice(0,q),...this.images.slice(q+1)]}}c5.Icns=Y2;Y2.supportedIconTypes=[{osType:"is32",size:16,format:"RGB"},{osType:"il32",size:32,format:"RGB"},{osType:"ih32",size:48,format:"RGB"},{osType:"it32",size:128,format:"RGB"},{osType:"s8mk",size:16,format:"MASK"},{osType:"l8mk",size:32,format:"MASK"},{osType:"h8mk",size:48,format:"MASK"},{osType:"t8mk",size:128,format:"MASK"},{osType:"ic04",size:16,format:"ARGB"},{osType:"ic05",size:32,format:"ARGB"},{osType:"icp4",size:16,format:"PNG"},{osType:"icp5",size:32,format:"PNG"},{osType:"icp6",size:64,format:"PNG"},{osType:"ic07",size:128,format:"PNG"},{osType:"ic08",size:256,format:"PNG"},{osType:"ic09",size:512,format:"PNG"},{osType:"ic10",size:1024,format:"PNG"},{osType:"ic11",size:32,format:"PNG"},{osType:"ic12",size:64,format:"PNG"},{osType:"ic13",size:256,format:"PNG"},{osType:"ic14",size:512,format:"PNG"}]});var o2=E((a5)=>{Object.defineProperty(a5,"__esModule",{value:!0});a5.IcnsImage=a5.BitmapBuilder=void 0;var Gq=s2(),S0=l5(),Nq=t2();class q1{constructor(q,J,$){this.png=q,this.osType=J,this.format=$}build(){switch(this.format){case"MASK":return this.mask;case"RGB":return this.rgb;case"ARGB":return this.argb;default:return}}get mask(){return this.getChannel(3)}get rgb(){let q=this.osType==="it32"?4:0,J=Buffer.alloc(q);return Buffer.concat([J,S0.encode(this.getChannel(0),{format:"icns"}),S0.encode(this.getChannel(1),{format:"icns"}),S0.encode(this.getChannel(2),{format:"icns"})])}get argb(){let q=Buffer.alloc(4);return q.write("ARGB",0,4,"ascii"),Buffer.concat([q,S0.encode(this.getChannel(3),{format:"icns"}),S0.encode(this.getChannel(0),{format:"icns"}),S0.encode(this.getChannel(1),{format:"icns"}),S0.encode(this.getChannel(2),{format:"icns"})])}getChannel(q){let J=[];for(let $=0;$<this.png.data.length;$+=4)J.push(this.png.data.slice(q+$,q+$+1));return Buffer.concat(J)}}a5.BitmapBuilder=q1;class e0{constructor(q="ic10",J=8,$=Buffer.alloc(0)){this.osType=q,this.bytes=J,this.image=$}static from(q){let J=q.toString("ascii",0,4),$=q.readUInt32BE(4),Z=q.slice(8,$);return new e0(J,$,Z)}static fromPNG(q,J){let $=Nq.Icns.supportedIconTypes.find((X)=>X.osType===J);if(!$)throw TypeError("No supported osType");let Z=e0.readPNG(q);if(!Z)throw TypeError("Image must be PNG format");let{width:Q,height:K}=Z;if(Q!==K)throw TypeError("Image must be squre");if(Q!==$.size)throw TypeError(`Image size must be ${$.size}x${$.size} for '${J}'`);let U=$.format==="PNG"?q:new q1(Z,J,$.format).build();if(!U)throw TypeError(`Invalid format '${$.format}'`);let Y=8+U.length;return new e0(J,Y,U)}get data(){let q=Buffer.alloc(8);return q.write(this.osType,0,4,"ascii"),q.writeUInt32BE(this.bytes,4),Buffer.concat([q,this.image])}static readPNG(q){try{return Gq.PNG.sync.read(q)}catch(J){return}}}a5.IcnsImage=e0});var n5=E((Q0)=>{var Bq=Q0&&Q0.__createBinding||(Object.create?function(q,J,$,Z){if(Z===void 0)Z=$;Object.defineProperty(q,Z,{enumerable:!0,get:function(){return J[$]}})}:function(q,J,$,Z){if(Z===void 0)Z=$;q[Z]=J[$]}),H2=Q0&&Q0.__exportStar||function(q,J){for(var $ in q)if($!=="default"&&!Object.prototype.hasOwnProperty.call(J,$))Bq(J,q,$)};Object.defineProperty(Q0,"__esModule",{value:!0});H2(d1(),Q0);H2(b2(),Q0);H2(o2(),Q0);H2(t2(),Q0)});var o5=E((fQ,t5)=>{t5.exports={nearestNeighbor(q,J){let{width:$,height:Z}=q,Q=J.width,K=J.height,U=q.data,Y=J.data;for(let X=0;X<K;X++)for(let G=0;G<Q;G++){let W=(X*Q+G)*4,B=Math.floor(X*Z/K),_=Math.floor(G*$/Q),R=(B*$+_)*4;Y[W++]=U[R++],Y[W++]=U[R++],Y[W++]=U[R++],Y[W++]=U[R++]}},bilinearInterpolation(q,J){let{width:$,height:Z}=q,Q=J.width,K=J.height,U=q.data,Y=J.data,X=function(W,B,_,R,j){if(B===R)return _;return Math.round((W-B)*j+(R-W)*_)},G=function(W,B,_,R,j,C,T,I){let S=(T*$+R)*4+B,r=(T*$+j)*4+B,w=X(_,R,U[S],j,U[r]);if(I===T)Y[W+B]=w;else{S=(I*$+R)*4+B,r=(I*$+j)*4+B;let o=X(_,R,U[S],j,U[r]);Y[W+B]=X(C,T,w,I,o)}};for(let W=0;W<K;W++)for(let B=0;B<Q;B++){let _=(W*Q+B)*4,R=B*$/Q,j=Math.floor(R),C=Math.min(Math.ceil(R),$-1),T=W*Z/K,I=Math.floor(T),S=Math.min(Math.ceil(T),Z-1);G(_,0,R,j,C,T,I,S),G(_,1,R,j,C,T,I,S),G(_,2,R,j,C,T,I,S),G(_,3,R,j,C,T,I,S)}},_interpolate2D(q,J,$,Z){let Q=q.data,K=J.data,U=q.width,Y=q.height,X=J.width,G=J.height,W=Math.max(1,Math.floor(U/X)),B=X*W,_=Math.max(1,Math.floor(Y/G)),R=G*_,j=Buffer.alloc(B*Y*4);for(let I=0;I<Y;I++)for(let S=0;S<B;S++){let r=S*(U-1)/B,w=Math.floor(r),o=r-w,y0=(I*U+w)*4,q0=(I*B+S)*4;for(let a=0;a<4;a++){let y=y0+a,a0=w>0?Q[y-4]:2*Q[y]-Q[y+4],k0=Q[y],p0=Q[y+4],E0=w<U-2?Q[y+8]:2*Q[y+4]-Q[y];j[q0+a]=Z(a0,k0,p0,E0,o)}}let C=Buffer.alloc(B*R*4);for(let I=0;I<R;I++)for(let S=0;S<B;S++){let r=I*(Y-1)/R,w=Math.floor(r),o=r-w,y0=(w*B+S)*4,q0=(I*B+S)*4;for(let a=0;a<4;a++){let y=y0+a,a0=w>0?j[y-B*4]:2*j[y]-j[y+B*4],k0=j[y],p0=j[y+B*4],E0=w<Y-2?j[y+B*8]:2*j[y+B*4]-j[y];C[q0+a]=Z(a0,k0,p0,E0,o)}}let T=W*_;if(T>1)for(let I=0;I<G;I++)for(let S=0;S<X;S++){let r=0,w=0,o=0,y0=0,q0=0;for(let y=0;y<_;y++){let a0=I*_+y;for(let k0=0;k0<W;k0++){let p0=S*W+k0,E0=(a0*B+p0)*4,D1=C[E0+3];if(D1)r+=C[E0],w+=C[E0+1],o+=C[E0+2],q0++;y0+=D1}}let a=(I*X+S)*4;K[a]=q0?Math.round(r/q0):0,K[a+1]=q0?Math.round(w/q0):0,K[a+2]=q0?Math.round(o/q0):0,K[a+3]=Math.round(y0/T)}else J.data=C},bicubicInterpolation(q,J,$){let Z=function(Q,K,U,Y,X){let G=Y-U-Q+K,W=Q-K-G,B=U-Q,_=K;return Math.max(0,Math.min(255,G*(X*X*X)+W*(X*X)+B*X+_))};return this._interpolate2D(q,J,$,Z)},hermiteInterpolation(q,J,$){let Z=function(Q,K,U,Y,X){let G=K,W=0.5*(U-Q),B=Q-2.5*K+2*U-0.5*Y,_=0.5*(Y-Q)+1.5*(K-U);return Math.max(0,Math.min(255,Math.round(((_*X+B)*X+W)*X+G)))};return this._interpolate2D(q,J,$,Z)},bezierInterpolation(q,J,$){let Z=function(Q,K,U,Y,X){let G=K+(U-Q)/4,W=U-(Y-K)/4,B=1-X,_=K*B*B*B,R=3*G*B*B*X,j=3*W*B*X*X,C=U*X*X*X;return Math.max(0,Math.min(255,Math.round(_+R+j+C)))};return this._interpolate2D(q,J,$,Z)}}});var $4=E((gQ,J4)=>{var{promises:Aq}=M("fs"),{PNG:q4}=s2(),Lq=o5();function jq(q){let J;if(Buffer.isBuffer(q))J=Promise.resolve(q);else J=Aq.readFile(q);return J.then(($)=>{return q4.sync.read($)}).catch(($)=>{throw Error(`${q} is not or a valid PNG file.`)})}function Tq(q,J,$,Z="bicubicInterpolation"){let Q=Fq(J,$);return Lq[Z](q,Q),Q}function Fq(q=256,J=256){return new q4({width:q,height:J})}J4.exports={readPNG:jq,resize:Tq}});var X4=E((dQ,H4)=>{var{readPNG:Z4,resize:Q4}=$4(),zq=[48,32,16],Y4=Error("Please give me a square PNG image.");Y4.code="ESIZE";H4.exports=function(q){if(Array.isArray(q))return Promise.all(q.map((J)=>Z4(J))).then(K4);return Z4(q).then((J)=>{if(J.width!==J.height)throw Y4;let $=J.width!==256?Q4(J,256,256):J;return zq.map((Q)=>Q4($,Q,Q)).concat($)}).then(K4)};function K4(q){let J=Iq(q.length),$=[J],Z=[],Q=J.length,K=J.length+16*q.length;return q.forEach((U)=>{let Y=Cq(U,K),X=kq(U),G=Mq(U);Q+=Y.length+X.length+G.length;let W=X.length+G.length;K+=W,Y.writeUInt32LE(W,8),$.push(Y),Z.push(X,G)}),Buffer.concat($.concat(Z),Q)}function Iq(q){let J=Buffer.alloc(6);return J.writeUInt16LE(0,0),J.writeUInt16LE(1,2),J.writeUInt16LE(q,4),J}function Cq(q,J){let $=Buffer.alloc(16),Z=q,Q=Z.width>=256?0:Z.width,K=Q,U=32;return $.writeUInt8(Q,0),$.writeUInt8(K,1),$.writeUInt8(0,2),$.writeUInt8(0,3),$.writeUInt16LE(1,4),$.writeUInt16LE(32,6),$.writeUInt32LE(0,8),$.writeUInt32LE(J,12),$}function kq(q){let J=Buffer.alloc(40),Z=q.width,Q=Z*2,K=32;return J.writeUInt32LE(40,0),J.writeInt32LE(Z,4),J.writeInt32LE(Q,8),J.writeUInt16LE(1,12),J.writeUInt16LE(32,14),J.writeUInt32LE(0,16),J.writeUInt32LE(0,20),J.writeInt32LE(0,24),J.writeInt32LE(0,28),J.writeUInt32LE(0,32),J.writeUInt32LE(0,36),J}function Mq(q){let J=q,$=J.data.length,Z=J.width,Q=Z,U=Sq(Z)*Q,Y=Buffer.alloc($+U);for(let X=0;X<Q;X++)for(let G=0;G<Z;G++){let W=U4(q,G,X),B=W>>24&255,_=W>>16&255,R=W>>8&255,j=W&255,C=R|_<<8|B<<16|j<<24,T=((Q-X-1)*Z+G)*4;Y.writeInt32LE(C,T)}for(let X=0;X<Q;X++)for(let G=0;G<Z;G++){let B=(U4(q,G,X)&255)>0?0:1,_=(Q-X-1)*Z+G,R=Z%32===0?Math.floor(Z/32):Math.floor(Z/32)+1,j=Math.floor(_/Z),C=Math.floor(_%Z),T=B&1,I=$+j*R*4+Math.floor(C/8),S=Y.readUInt8(I)|T<<7-C%8;Y.writeUInt8(S,I)}return Y}function Sq(q){if(q%32===0)return q/8;else return 4*(Math.floor(q/32)+1)}function U4(q,J,$){let Z=J<0?0:J,Q=$<0?0:$;if(J>=q.width)Z=q.width-1;if($>=q.height)Q=q.height-1;let K=Z<0||Z>=q.width||(Q<0||Q>=q.height)?-1:q.width*Q+Z<<2;return q.data.readUInt32BE(K)}});var Y0=E((WK,D4)=>{var w4=function(q){return typeof q<"u"&&q!==null},Oq=function(q){return typeof q==="object"},yq=function(q){return Object.prototype.toString.call(q)==="[object Object]"},vq=function(q){return typeof q==="function"},xq=function(q){return typeof q==="boolean"},bq=function(q){return q instanceof Buffer},hq=function(q){if(w4(q))switch(q.constructor){case Uint8Array:case Uint8ClampedArray:case Int8Array:case Uint16Array:case Int16Array:case Uint32Array:case Int32Array:case Float32Array:case Float64Array:return!0}return!1},fq=function(q){return q instanceof ArrayBuffer},gq=function(q){return typeof q==="string"&&q.length>0},dq=function(q){return typeof q==="number"&&!Number.isNaN(q)},uq=function(q){return Number.isInteger(q)},mq=function(q,J,$){return q>=J&&q<=$},lq=function(q,J){return J.includes(q)},cq=function(q,J,$){return Error(`Expected ${J} for ${q} but received ${$} of type ${typeof $}`)},rq=function(q,J){return J.message=q.message,J};D4.exports={defined:w4,object:Oq,plainObject:yq,fn:vq,bool:xq,buffer:bq,typedArray:hq,arrayBuffer:fq,string:gq,number:dq,integer:uq,inRange:mq,inArray:lq,invalidParameterError:cq,nativeError:rq}});var y4=E((BK,O4)=>{var P4=()=>process.platform==="linux",W2=null,aq=()=>{if(!W2)if(P4()&&process.report){let q=process.report.excludeNetwork;process.report.excludeNetwork=!0,W2=process.report.getReport(),process.report.excludeNetwork=q}else W2={};return W2};O4.exports={isLinux:P4,getReport:aq}});var x4=E((VK,v4)=>{var f0=M("fs"),pq=(q)=>{let J=f0.openSync(q,"r"),$=Buffer.alloc(2048),Z=f0.readSync(J,$,0,2048,0);return f0.close(J,()=>{}),$.subarray(0,Z)},nq=(q)=>new Promise((J,$)=>{f0.open(q,"r",(Z,Q)=>{if(Z)$(Z);else{let K=Buffer.alloc(2048);f0.read(Q,K,0,2048,0,(U,Y)=>{J(K.subarray(0,Y)),f0.close(Q,()=>{})})}})});v4.exports={LDD_PATH:"/usr/bin/ldd",SELF_PATH:"/proc/self/exe",readFileSync:pq,readFile:nq}});var h4=E((_K,b4)=>{var eq=(q)=>{if(q.length<64)return null;if(q.readUInt32BE(0)!==2135247942)return null;if(q.readUInt8(4)!==2)return null;if(q.readUInt8(5)!==1)return null;let J=q.readUInt32LE(32),$=q.readUInt16LE(54),Z=q.readUInt16LE(56);for(let Q=0;Q<Z;Q++){let K=J+Q*$;if(q.readUInt32LE(K)===3){let Y=q.readUInt32LE(K+8),X=q.readUInt32LE(K+32);return q.subarray(Y,Y+X).toString().replace(/\0.*$/g,"")}}return null};b4.exports={interpreterPath:eq}});var V2=E((EK,q6)=>{var g4=M("child_process"),{isLinux:g0,getReport:d4}=y4(),{LDD_PATH:B2,SELF_PATH:u4,readFile:Z1,readFileSync:Q1}=x4(),{interpreterPath:m4}=h4(),H0,X0,G0,F0="",l4=()=>{if(!F0)return new Promise((q)=>{g4.exec("getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",(J,$)=>{F0=J?" ":$,q(F0)})});return F0},c4=()=>{if(!F0)try{F0=g4.execSync("getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",{encoding:"utf8"})}catch(q){F0=" "}return F0},B0="glibc",r4=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i,w0="musl",sq=(q)=>q.includes("libc.musl-")||q.includes("ld-musl-"),a4=()=>{let q=d4();if(q.header&&q.header.glibcVersionRuntime)return B0;if(Array.isArray(q.sharedObjects)){if(q.sharedObjects.some(sq))return w0}return null},p4=(q)=>{let[J,$]=q.split(/[\r\n]+/);if(J&&J.includes(B0))return B0;if($&&$.includes(w0))return w0;return null},n4=(q)=>{if(q){if(q.includes("/ld-musl-"))return w0;else if(q.includes("/ld-linux-"))return B0}return null},e4=(q)=>{if(q=q.toString(),q.includes("musl"))return w0;if(q.includes("GNU C Library"))return B0;return null},iq=async()=>{if(X0!==void 0)return X0;X0=null;try{let q=await Z1(B2);X0=e4(q)}catch(q){}return X0},tq=()=>{if(X0!==void 0)return X0;X0=null;try{let q=Q1(B2);X0=e4(q)}catch(q){}return X0},oq=async()=>{if(H0!==void 0)return H0;H0=null;try{let q=await Z1(u4),J=m4(q);H0=n4(J)}catch(q){}return H0},q3=()=>{if(H0!==void 0)return H0;H0=null;try{let q=Q1(u4),J=m4(q);H0=n4(J)}catch(q){}return H0},s4=async()=>{let q=null;if(g0()){if(q=await oq(),!q){if(q=await iq(),!q)q=a4();if(!q){let J=await l4();q=p4(J)}}}return q},i4=()=>{let q=null;if(g0()){if(q=q3(),!q){if(q=tq(),!q)q=a4();if(!q){let J=c4();q=p4(J)}}}return q},J3=async()=>g0()&&await s4()!==B0,$3=()=>g0()&&i4()!==B0,Z3=async()=>{if(G0!==void 0)return G0;G0=null;try{let J=(await Z1(B2)).match(r4);if(J)G0=J[1]}catch(q){}return G0},Q3=()=>{if(G0!==void 0)return G0;G0=null;try{let J=Q1(B2).match(r4);if(J)G0=J[1]}catch(q){}return G0},t4=()=>{let q=d4();if(q.header&&q.header.glibcVersionRuntime)return q.header.glibcVersionRuntime;return null},f4=(q)=>q.trim().split(/\s+/)[1],o4=(q)=>{let[J,$,Z]=q.split(/[\r\n]+/);if(J&&J.includes(B0))return f4(J);if($&&Z&&$.includes(w0))return f4(Z);return null},K3=async()=>{let q=null;if(g0()){if(q=await Z3(),!q)q=t4();if(!q){let J=await l4();q=o4(J)}}return q},U3=()=>{let q=null;if(g0()){if(q=Q3(),!q)q=t4();if(!q){let J=c4();q=o4(J)}}return q};q6.exports={GLIBC:B0,MUSL:w0,family:s4,familySync:i4,isNonGlibcLinux:J3,isNonGlibcLinuxSync:$3,version:K3,versionSync:U3}});var s0=E((RK,J6)=>{var Y3=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...q)=>console.error("SEMVER",...q):()=>{};J6.exports=Y3});var _2=E((AK,$6)=>{var H3=Number.MAX_SAFE_INTEGER||9007199254740991,X3=["major","premajor","minor","preminor","patch","prepatch","prerelease"];$6.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:H3,RELEASE_TYPES:X3,SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var i0=E((N0,Z6)=>{var{MAX_SAFE_COMPONENT_LENGTH:K1,MAX_SAFE_BUILD_LENGTH:G3,MAX_LENGTH:N3}=_2(),W3=s0();N0=Z6.exports={};var B3=N0.re=[],V3=N0.safeRe=[],A=N0.src=[],_3=N0.safeSrc=[],L=N0.t={},E3=0,U1="[a-zA-Z0-9-]",R3=[["\\s",1],["\\d",N3],[U1,G3]],A3=(q)=>{for(let[J,$]of R3)q=q.split(`${J}*`).join(`${J}{0,${$}}`).split(`${J}+`).join(`${J}{1,${$}}`);return q},k=(q,J,$)=>{let Z=A3(J),Q=E3++;W3(q,Q,J),L[q]=Q,A[Q]=J,_3[Q]=Z,B3[Q]=new RegExp(J,$?"g":void 0),V3[Q]=new RegExp(Z,$?"g":void 0)};k("NUMERICIDENTIFIER","0|[1-9]\\d*");k("NUMERICIDENTIFIERLOOSE","\\d+");k("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${U1}*`);k("MAINVERSION",`(${A[L.NUMERICIDENTIFIER]})\\.(${A[L.NUMERICIDENTIFIER]})\\.(${A[L.NUMERICIDENTIFIER]})`);k("MAINVERSIONLOOSE",`(${A[L.NUMERICIDENTIFIERLOOSE]})\\.(${A[L.NUMERICIDENTIFIERLOOSE]})\\.(${A[L.NUMERICIDENTIFIERLOOSE]})`);k("PRERELEASEIDENTIFIER",`(?:${A[L.NONNUMERICIDENTIFIER]}|${A[L.NUMERICIDENTIFIER]})`);k("PRERELEASEIDENTIFIERLOOSE",`(?:${A[L.NONNUMERICIDENTIFIER]}|${A[L.NUMERICIDENTIFIERLOOSE]})`);k("PRERELEASE",`(?:-(${A[L.PRERELEASEIDENTIFIER]}(?:\\.${A[L.PRERELEASEIDENTIFIER]})*))`);k("PRERELEASELOOSE",`(?:-?(${A[L.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${A[L.PRERELEASEIDENTIFIERLOOSE]})*))`);k("BUILDIDENTIFIER",`${U1}+`);k("BUILD",`(?:\\+(${A[L.BUILDIDENTIFIER]}(?:\\.${A[L.BUILDIDENTIFIER]})*))`);k("FULLPLAIN",`v?${A[L.MAINVERSION]}${A[L.PRERELEASE]}?${A[L.BUILD]}?`);k("FULL",`^${A[L.FULLPLAIN]}$`);k("LOOSEPLAIN",`[v=\\s]*${A[L.MAINVERSIONLOOSE]}${A[L.PRERELEASELOOSE]}?${A[L.BUILD]}?`);k("LOOSE",`^${A[L.LOOSEPLAIN]}$`);k("GTLT","((?:<|>)?=?)");k("XRANGEIDENTIFIERLOOSE",`${A[L.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);k("XRANGEIDENTIFIER",`${A[L.NUMERICIDENTIFIER]}|x|X|\\*`);k("XRANGEPLAIN",`[v=\\s]*(${A[L.XRANGEIDENTIFIER]})(?:\\.(${A[L.XRANGEIDENTIFIER]})(?:\\.(${A[L.XRANGEIDENTIFIER]})(?:${A[L.PRERELEASE]})?${A[L.BUILD]}?)?)?`);k("XRANGEPLAINLOOSE",`[v=\\s]*(${A[L.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[L.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[L.XRANGEIDENTIFIERLOOSE]})(?:${A[L.PRERELEASELOOSE]})?${A[L.BUILD]}?)?)?`);k("XRANGE",`^${A[L.GTLT]}\\s*${A[L.XRANGEPLAIN]}$`);k("XRANGELOOSE",`^${A[L.GTLT]}\\s*${A[L.XRANGEPLAINLOOSE]}$`);k("COERCEPLAIN",`(^|[^\\d])(\\d{1,${K1}})(?:\\.(\\d{1,${K1}}))?(?:\\.(\\d{1,${K1}}))?`);k("COERCE",`${A[L.COERCEPLAIN]}(?:$|[^\\d])`);k("COERCEFULL",A[L.COERCEPLAIN]+`(?:${A[L.PRERELEASE]})?(?:${A[L.BUILD]})?(?:$|[^\\d])`);k("COERCERTL",A[L.COERCE],!0);k("COERCERTLFULL",A[L.COERCEFULL],!0);k("LONETILDE","(?:~>?)");k("TILDETRIM",`(\\s*)${A[L.LONETILDE]}\\s+`,!0);N0.tildeTrimReplace="$1~";k("TILDE",`^${A[L.LONETILDE]}${A[L.XRANGEPLAIN]}$`);k("TILDELOOSE",`^${A[L.LONETILDE]}${A[L.XRANGEPLAINLOOSE]}$`);k("LONECARET","(?:\\^)");k("CARETTRIM",`(\\s*)${A[L.LONECARET]}\\s+`,!0);N0.caretTrimReplace="$1^";k("CARET",`^${A[L.LONECARET]}${A[L.XRANGEPLAIN]}$`);k("CARETLOOSE",`^${A[L.LONECARET]}${A[L.XRANGEPLAINLOOSE]}$`);k("COMPARATORLOOSE",`^${A[L.GTLT]}\\s*(${A[L.LOOSEPLAIN]})$|^$`);k("COMPARATOR",`^${A[L.GTLT]}\\s*(${A[L.FULLPLAIN]})$|^$`);k("COMPARATORTRIM",`(\\s*)${A[L.GTLT]}\\s*(${A[L.LOOSEPLAIN]}|${A[L.XRANGEPLAIN]})`,!0);N0.comparatorTrimReplace="$1$2$3";k("HYPHENRANGE",`^\\s*(${A[L.XRANGEPLAIN]})\\s+-\\s+(${A[L.XRANGEPLAIN]})\\s*$`);k("HYPHENRANGELOOSE",`^\\s*(${A[L.XRANGEPLAINLOOSE]})\\s+-\\s+(${A[L.XRANGEPLAINLOOSE]})\\s*$`);k("STAR","(<|>)?=?\\s*\\*");k("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");k("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var E2=E((LK,Q6)=>{var L3=Object.freeze({loose:!0}),j3=Object.freeze({}),T3=(q)=>{if(!q)return j3;if(typeof q!=="object")return L3;return q};Q6.exports=T3});var H6=E((jK,Y6)=>{var K6=/^[0-9]+$/,U6=(q,J)=>{if(typeof q==="number"&&typeof J==="number")return q===J?0:q<J?-1:1;let $=K6.test(q),Z=K6.test(J);if($&&Z)q=+q,J=+J;return q===J?0:$&&!Z?-1:Z&&!$?1:q<J?-1:1},F3=(q,J)=>U6(J,q);Y6.exports={compareIdentifiers:U6,rcompareIdentifiers:F3}});var d0=E((TK,G6)=>{var R2=s0(),{MAX_LENGTH:X6,MAX_SAFE_INTEGER:A2}=_2(),{safeRe:L2,t:j2}=i0(),z3=E2(),{compareIdentifiers:Y1}=H6();class $0{constructor(q,J){if(J=z3(J),q instanceof $0)if(q.loose===!!J.loose&&q.includePrerelease===!!J.includePrerelease)return q;else q=q.version;else if(typeof q!=="string")throw TypeError(`Invalid version. Must be a string. Got type "${typeof q}".`);if(q.length>X6)throw TypeError(`version is longer than ${X6} characters`);R2("SemVer",q,J),this.options=J,this.loose=!!J.loose,this.includePrerelease=!!J.includePrerelease;let $=q.trim().match(J.loose?L2[j2.LOOSE]:L2[j2.FULL]);if(!$)throw TypeError(`Invalid Version: ${q}`);if(this.raw=q,this.major=+$[1],this.minor=+$[2],this.patch=+$[3],this.major>A2||this.major<0)throw TypeError("Invalid major version");if(this.minor>A2||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>A2||this.patch<0)throw TypeError("Invalid patch version");if(!$[4])this.prerelease=[];else this.prerelease=$[4].split(".").map((Z)=>{if(/^[0-9]+$/.test(Z)){let Q=+Z;if(Q>=0&&Q<A2)return Q}return Z});this.build=$[5]?$[5].split("."):[],this.format()}format(){if(this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length)this.version+=`-${this.prerelease.join(".")}`;return this.version}toString(){return this.version}compare(q){if(R2("SemVer.compare",this.version,this.options,q),!(q instanceof $0)){if(typeof q==="string"&&q===this.version)return 0;q=new $0(q,this.options)}if(q.version===this.version)return 0;return this.compareMain(q)||this.comparePre(q)}compareMain(q){if(!(q instanceof $0))q=new $0(q,this.options);if(this.major<q.major)return-1;if(this.major>q.major)return 1;if(this.minor<q.minor)return-1;if(this.minor>q.minor)return 1;if(this.patch<q.patch)return-1;if(this.patch>q.patch)return 1;return 0}comparePre(q){if(!(q instanceof $0))q=new $0(q,this.options);if(this.prerelease.length&&!q.prerelease.length)return-1;else if(!this.prerelease.length&&q.prerelease.length)return 1;else if(!this.prerelease.length&&!q.prerelease.length)return 0;let J=0;do{let $=this.prerelease[J],Z=q.prerelease[J];if(R2("prerelease compare",J,$,Z),$===void 0&&Z===void 0)return 0;else if(Z===void 0)return 1;else if($===void 0)return-1;else if($===Z)continue;else return Y1($,Z)}while(++J)}compareBuild(q){if(!(q instanceof $0))q=new $0(q,this.options);let J=0;do{let $=this.build[J],Z=q.build[J];if(R2("build compare",J,$,Z),$===void 0&&Z===void 0)return 0;else if(Z===void 0)return 1;else if($===void 0)return-1;else if($===Z)continue;else return Y1($,Z)}while(++J)}inc(q,J,$){if(q.startsWith("pre")){if(!J&&$===!1)throw Error("invalid increment argument: identifier is empty");if(J){let Z=`-${J}`.match(this.options.loose?L2[j2.PRERELEASELOOSE]:L2[j2.PRERELEASE]);if(!Z||Z[1]!==J)throw Error(`invalid identifier: ${J}`)}}switch(q){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",J,$);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",J,$);break;case"prepatch":this.prerelease.length=0,this.inc("patch",J,$),this.inc("pre",J,$);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",J,$);this.inc("pre",J,$);break;case"release":if(this.prerelease.length===0)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0,this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":{let Z=Number($)?1:0;if(this.prerelease.length===0)this.prerelease=[Z];else{let Q=this.prerelease.length;while(--Q>=0)if(typeof this.prerelease[Q]==="number")this.prerelease[Q]++,Q=-2;if(Q===-1){if(J===this.prerelease.join(".")&&$===!1)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(Z)}}if(J){let Q=[J,Z];if($===!1)Q=[J];if(Y1(this.prerelease[0],J)===0){if(isNaN(this.prerelease[1]))this.prerelease=Q}else this.prerelease=Q}break}default:throw Error(`invalid increment argument: ${q}`)}if(this.raw=this.format(),this.build.length)this.raw+=`+${this.build.join(".")}`;return this}}G6.exports=$0});var B6=E((FK,W6)=>{var N6=d0(),I3=(q,J,$=!1)=>{if(q instanceof N6)return q;try{return new N6(q,J)}catch(Z){if(!$)return null;throw Z}};W6.exports=I3});var _6=E((zK,V6)=>{var C3=d0(),k3=B6(),{safeRe:T2,t:F2}=i0(),M3=(q,J)=>{if(q instanceof C3)return q;if(typeof q==="number")q=String(q);if(typeof q!=="string")return null;J=J||{};let $=null;if(!J.rtl)$=q.match(J.includePrerelease?T2[F2.COERCEFULL]:T2[F2.COERCE]);else{let X=J.includePrerelease?T2[F2.COERCERTLFULL]:T2[F2.COERCERTL],G;while((G=X.exec(q))&&(!$||$.index+$[0].length!==q.length)){if(!$||G.index+G[0].length!==$.index+$[0].length)$=G;X.lastIndex=G.index+G[1].length+G[2].length}X.lastIndex=-1}if($===null)return null;let Z=$[2],Q=$[3]||"0",K=$[4]||"0",U=J.includePrerelease&&$[5]?`-${$[5]}`:"",Y=J.includePrerelease&&$[6]?`+${$[6]}`:"";return k3(`${Z}.${Q}.${K}${U}${Y}`,J)};V6.exports=M3});var D0=E((IK,R6)=>{var E6=d0(),S3=(q,J,$)=>new E6(q,$).compare(new E6(J,$));R6.exports=S3});var H1=E((CK,A6)=>{var w3=D0(),D3=(q,J,$)=>w3(q,J,$)>=0;A6.exports=D3});var T6=E((kK,j6)=>{class L6{constructor(){this.max=1000,this.map=new Map}get(q){let J=this.map.get(q);if(J===void 0)return;else return this.map.delete(q),this.map.set(q,J),J}delete(q){return this.map.delete(q)}set(q,J){if(!this.delete(q)&&J!==void 0){if(this.map.size>=this.max){let Z=this.map.keys().next().value;this.delete(Z)}this.map.set(q,J)}return this}}j6.exports=L6});var z6=E((MK,F6)=>{var P3=D0(),O3=(q,J,$)=>P3(q,J,$)===0;F6.exports=O3});var C6=E((SK,I6)=>{var y3=D0(),v3=(q,J,$)=>y3(q,J,$)!==0;I6.exports=v3});var M6=E((wK,k6)=>{var x3=D0(),b3=(q,J,$)=>x3(q,J,$)>0;k6.exports=b3});var w6=E((DK,S6)=>{var h3=D0(),f3=(q,J,$)=>h3(q,J,$)<0;S6.exports=f3});var P6=E((PK,D6)=>{var g3=D0(),d3=(q,J,$)=>g3(q,J,$)<=0;D6.exports=d3});var y6=E((OK,O6)=>{var u3=z6(),m3=C6(),l3=M6(),c3=H1(),r3=w6(),a3=P6(),p3=(q,J,$,Z)=>{switch(J){case"===":if(typeof q==="object")q=q.version;if(typeof $==="object")$=$.version;return q===$;case"!==":if(typeof q==="object")q=q.version;if(typeof $==="object")$=$.version;return q!==$;case"":case"=":case"==":return u3(q,$,Z);case"!=":return m3(q,$,Z);case">":return l3(q,$,Z);case">=":return c3(q,$,Z);case"<":return r3(q,$,Z);case"<=":return a3(q,$,Z);default:throw TypeError(`Invalid operator: ${J}`)}};O6.exports=p3});var d6=E((yK,g6)=>{var t0=Symbol("SemVer ANY");class z2{static get ANY(){return t0}constructor(q,J){if(J=v6(J),q instanceof z2)if(q.loose===!!J.loose)return q;else q=q.value;if(q=q.trim().split(/\s+/).join(" "),G1("comparator",q,J),this.options=J,this.loose=!!J.loose,this.parse(q),this.semver===t0)this.value="";else this.value=this.operator+this.semver.version;G1("comp",this)}parse(q){let J=this.options.loose?x6[b6.COMPARATORLOOSE]:x6[b6.COMPARATOR],$=q.match(J);if(!$)throw TypeError(`Invalid comparator: ${q}`);if(this.operator=$[1]!==void 0?$[1]:"",this.operator==="=")this.operator="";if(!$[2])this.semver=t0;else this.semver=new h6($[2],this.options.loose)}toString(){return this.value}test(q){if(G1("Comparator.test",q,this.options.loose),this.semver===t0||q===t0)return!0;if(typeof q==="string")try{q=new h6(q,this.options)}catch(J){return!1}return X1(q,this.operator,this.semver,this.options)}intersects(q,J){if(!(q instanceof z2))throw TypeError("a Comparator is required");if(this.operator===""){if(this.value==="")return!0;return new f6(q.value,J).test(this.value)}else if(q.operator===""){if(q.value==="")return!0;return new f6(this.value,J).test(q.semver)}if(J=v6(J),J.includePrerelease&&(this.value==="<0.0.0-0"||q.value==="<0.0.0-0"))return!1;if(!J.includePrerelease&&(this.value.startsWith("<0.0.0")||q.value.startsWith("<0.0.0")))return!1;if(this.operator.startsWith(">")&&q.operator.startsWith(">"))return!0;if(this.operator.startsWith("<")&&q.operator.startsWith("<"))return!0;if(this.semver.version===q.semver.version&&this.operator.includes("=")&&q.operator.includes("="))return!0;if(X1(this.semver,"<",q.semver,J)&&this.operator.startsWith(">")&&q.operator.startsWith("<"))return!0;if(X1(this.semver,">",q.semver,J)&&this.operator.startsWith("<")&&q.operator.startsWith(">"))return!0;return!1}}g6.exports=z2;var v6=E2(),{safeRe:x6,t:b6}=i0(),X1=y6(),G1=s0(),h6=d0(),f6=N1()});var N1=E((vK,c6)=>{var n3=/\s+/g;class o0{constructor(q,J){if(J=s3(J),q instanceof o0)if(q.loose===!!J.loose&&q.includePrerelease===!!J.includePrerelease)return q;else return new o0(q.raw,J);if(q instanceof W1)return this.raw=q.value,this.set=[[q]],this.formatted=void 0,this;if(this.options=J,this.loose=!!J.loose,this.includePrerelease=!!J.includePrerelease,this.raw=q.trim().replace(n3," "),this.set=this.raw.split("||").map(($)=>this.parseRange($.trim())).filter(($)=>$.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let $=this.set[0];if(this.set=this.set.filter((Z)=>!m6(Z[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(let Z of this.set)if(Z.length===1&&ZJ(Z[0])){this.set=[Z];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let q=0;q<this.set.length;q++){if(q>0)this.formatted+="||";let J=this.set[q];for(let $=0;$<J.length;$++){if($>0)this.formatted+=" ";this.formatted+=J[$].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(q){let $=((this.options.includePrerelease&&JJ)|(this.options.loose&&$J))+":"+q,Z=u6.get($);if(Z)return Z;let Q=this.options.loose,K=Q?m[d.HYPHENRANGELOOSE]:m[d.HYPHENRANGE];q=q.replace(K,BJ(this.options.includePrerelease)),P("hyphen replace",q),q=q.replace(m[d.COMPARATORTRIM],t3),P("comparator trim",q),q=q.replace(m[d.TILDETRIM],o3),P("tilde trim",q),q=q.replace(m[d.CARETTRIM],qJ),P("caret trim",q);let U=q.split(" ").map((W)=>QJ(W,this.options)).join(" ").split(/\s+/).map((W)=>WJ(W,this.options));if(Q)U=U.filter((W)=>{return P("loose invalid filter",W,this.options),!!W.match(m[d.COMPARATORLOOSE])});P("range list",U);let Y=new Map,X=U.map((W)=>new W1(W,this.options));for(let W of X){if(m6(W))return[W];Y.set(W.value,W)}if(Y.size>1&&Y.has(""))Y.delete("");let G=[...Y.values()];return u6.set($,G),G}intersects(q,J){if(!(q instanceof o0))throw TypeError("a Range is required");return this.set.some(($)=>{return l6($,J)&&q.set.some((Z)=>{return l6(Z,J)&&$.every((Q)=>{return Z.every((K)=>{return Q.intersects(K,J)})})})})}test(q){if(!q)return!1;if(typeof q==="string")try{q=new i3(q,this.options)}catch(J){return!1}for(let J=0;J<this.set.length;J++)if(VJ(this.set[J],q,this.options))return!0;return!1}}c6.exports=o0;var e3=T6(),u6=new e3,s3=E2(),W1=d6(),P=s0(),i3=d0(),{safeRe:m,t:d,comparatorTrimReplace:t3,tildeTrimReplace:o3,caretTrimReplace:qJ}=i0(),{FLAG_INCLUDE_PRERELEASE:JJ,FLAG_LOOSE:$J}=_2(),m6=(q)=>q.value==="<0.0.0-0",ZJ=(q)=>q.value==="",l6=(q,J)=>{let $=!0,Z=q.slice(),Q=Z.pop();while($&&Z.length)$=Z.every((K)=>{return Q.intersects(K,J)}),Q=Z.pop();return $},QJ=(q,J)=>{return q=q.replace(m[d.BUILD],""),P("comp",q,J),q=YJ(q,J),P("caret",q),q=KJ(q,J),P("tildes",q),q=XJ(q,J),P("xrange",q),q=NJ(q,J),P("stars",q),q},l=(q)=>!q||q.toLowerCase()==="x"||q==="*",KJ=(q,J)=>{return q.trim().split(/\s+/).map(($)=>UJ($,J)).join(" ")},UJ=(q,J)=>{let $=J.loose?m[d.TILDELOOSE]:m[d.TILDE];return q.replace($,(Z,Q,K,U,Y)=>{P("tilde",q,Z,Q,K,U,Y);let X;if(l(Q))X="";else if(l(K))X=`>=${Q}.0.0 <${+Q+1}.0.0-0`;else if(l(U))X=`>=${Q}.${K}.0 <${Q}.${+K+1}.0-0`;else if(Y)P("replaceTilde pr",Y),X=`>=${Q}.${K}.${U}-${Y} <${Q}.${+K+1}.0-0`;else X=`>=${Q}.${K}.${U} <${Q}.${+K+1}.0-0`;return P("tilde return",X),X})},YJ=(q,J)=>{return q.trim().split(/\s+/).map(($)=>HJ($,J)).join(" ")},HJ=(q,J)=>{P("caret",q,J);let $=J.loose?m[d.CARETLOOSE]:m[d.CARET],Z=J.includePrerelease?"-0":"";return q.replace($,(Q,K,U,Y,X)=>{P("caret",q,Q,K,U,Y,X);let G;if(l(K))G="";else if(l(U))G=`>=${K}.0.0${Z} <${+K+1}.0.0-0`;else if(l(Y))if(K==="0")G=`>=${K}.${U}.0${Z} <${K}.${+U+1}.0-0`;else G=`>=${K}.${U}.0${Z} <${+K+1}.0.0-0`;else if(X)if(P("replaceCaret pr",X),K==="0")if(U==="0")G=`>=${K}.${U}.${Y}-${X} <${K}.${U}.${+Y+1}-0`;else G=`>=${K}.${U}.${Y}-${X} <${K}.${+U+1}.0-0`;else G=`>=${K}.${U}.${Y}-${X} <${+K+1}.0.0-0`;else if(P("no pr"),K==="0")if(U==="0")G=`>=${K}.${U}.${Y}${Z} <${K}.${U}.${+Y+1}-0`;else G=`>=${K}.${U}.${Y}${Z} <${K}.${+U+1}.0-0`;else G=`>=${K}.${U}.${Y} <${+K+1}.0.0-0`;return P("caret return",G),G})},XJ=(q,J)=>{return P("replaceXRanges",q,J),q.split(/\s+/).map(($)=>GJ($,J)).join(" ")},GJ=(q,J)=>{q=q.trim();let $=J.loose?m[d.XRANGELOOSE]:m[d.XRANGE];return q.replace($,(Z,Q,K,U,Y,X)=>{P("xRange",q,Z,Q,K,U,Y,X);let G=l(K),W=G||l(U),B=W||l(Y),_=B;if(Q==="="&&_)Q="";if(X=J.includePrerelease?"-0":"",G)if(Q===">"||Q==="<")Z="<0.0.0-0";else Z="*";else if(Q&&_){if(W)U=0;if(Y=0,Q===">")if(Q=">=",W)K=+K+1,U=0,Y=0;else U=+U+1,Y=0;else if(Q==="<=")if(Q="<",W)K=+K+1;else U=+U+1;if(Q==="<")X="-0";Z=`${Q+K}.${U}.${Y}${X}`}else if(W)Z=`>=${K}.0.0${X} <${+K+1}.0.0-0`;else if(B)Z=`>=${K}.${U}.0${X} <${K}.${+U+1}.0-0`;return P("xRange return",Z),Z})},NJ=(q,J)=>{return P("replaceStars",q,J),q.trim().replace(m[d.STAR],"")},WJ=(q,J)=>{return P("replaceGTE0",q,J),q.trim().replace(m[J.includePrerelease?d.GTE0PRE:d.GTE0],"")},BJ=(q)=>(J,$,Z,Q,K,U,Y,X,G,W,B,_)=>{if(l(Z))$="";else if(l(Q))$=`>=${Z}.0.0${q?"-0":""}`;else if(l(K))$=`>=${Z}.${Q}.0${q?"-0":""}`;else if(U)$=`>=${$}`;else $=`>=${$}${q?"-0":""}`;if(l(G))X="";else if(l(W))X=`<${+G+1}.0.0-0`;else if(l(B))X=`<${G}.${+W+1}.0-0`;else if(_)X=`<=${G}.${W}.${B}-${_}`;else if(q)X=`<${G}.${W}.${+B+1}-0`;else X=`<=${X}`;return`${$} ${X}`.trim()},VJ=(q,J,$)=>{for(let Z=0;Z<q.length;Z++)if(!q[Z].test(J))return!1;if(J.prerelease.length&&!$.includePrerelease){for(let Z=0;Z<q.length;Z++){if(P(q[Z].semver),q[Z].semver===W1.ANY)continue;if(q[Z].semver.prerelease.length>0){let Q=q[Z].semver;if(Q.major===J.major&&Q.minor===J.minor&&Q.patch===J.patch)return!0}}return!1}return!0}});var a6=E((xK,r6)=>{var _J=N1(),EJ=(q,J,$)=>{try{J=new _J(J,$)}catch(Z){return!1}return J.test(q)};r6.exports=EJ});var B1=E((bK,RJ)=>{RJ.exports={name:"sharp",description:"High performance Node.js image processing, the fastest module to resize JPEG, PNG, WebP, GIF, AVIF and TIFF images",version:"0.33.5",author:"Lovell Fuller <npm@lovell.info>",homepage:"https://sharp.pixelplumbing.com",contributors:["Pierre Inglebert <pierre.inglebert@gmail.com>","Jonathan Ong <jonathanrichardong@gmail.com>","Chanon Sajjamanochai <chanon.s@gmail.com>","Juliano Julio <julianojulio@gmail.com>","Daniel Gasienica <daniel@gasienica.ch>","Julian Walker <julian@fiftythree.com>","Amit Pitaru <pitaru.amit@gmail.com>","Brandon Aaron <hello.brandon@aaron.sh>","Andreas Lind <andreas@one.com>","Maurus Cuelenaere <mcuelenaere@gmail.com>","Linus Unneb\xE4ck <linus@folkdatorn.se>","Victor Mateevitsi <mvictoras@gmail.com>","Alaric Holloway <alaric.holloway@gmail.com>","Bernhard K. Weisshuhn <bkw@codingforce.com>","Chris Riley <criley@primedia.com>","David Carley <dacarley@gmail.com>","John Tobin <john@limelightmobileinc.com>","Kenton Gray <kentongray@gmail.com>","Felix B\xFCnemann <Felix.Buenemann@gmail.com>","Samy Al Zahrani <samyalzahrany@gmail.com>","Chintan Thakkar <lemnisk8@gmail.com>","F. Orlando Galashan <frulo@gmx.de>","Kleis Auke Wolthuizen <info@kleisauke.nl>","Matt Hirsch <mhirsch@media.mit.edu>","Matthias Thoemmes <thoemmes@gmail.com>","Patrick Paskaris <patrick@paskaris.gr>","J\xE9r\xE9my Lal <kapouer@melix.org>","Rahul Nanwani <r.nanwani@gmail.com>","Alice Monday <alice0meta@gmail.com>","Kristo Jorgenson <kristo.jorgenson@gmail.com>","YvesBos <yves_bos@outlook.com>","Guy Maliar <guy@tailorbrands.com>","Nicolas Coden <nicolas@ncoden.fr>","Matt Parrish <matt.r.parrish@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Matthew McEachen <matthew+github@mceachen.org>","Jarda Kot\u011B\u0161ovec <jarda.kotesovec@gmail.com>","Kenric D'Souza <kenric.dsouza@gmail.com>","Oleh Aleinyk <oleg.aleynik@gmail.com>","Marcel Bretschneider <marcel.bretschneider@gmail.com>","Andrea Bianco <andrea.bianco@unibas.ch>","Rik Heywood <rik@rik.org>","Thomas Parisot <hi@oncletom.io>","Nathan Graves <nathanrgraves+github@gmail.com>","Tom Lokhorst <tom@lokhorst.eu>","Espen Hovlandsdal <espen@hovlandsdal.com>","Sylvain Dumont <sylvain.dumont35@gmail.com>","Alun Davies <alun.owain.davies@googlemail.com>","Aidan Hoolachan <ajhoolachan21@gmail.com>","Axel Eirola <axel.eirola@iki.fi>","Freezy <freezy@xbmc.org>","Daiz <taneli.vatanen@gmail.com>","Julian Aubourg <j@ubourg.net>","Keith Belovay <keith@picthrive.com>","Michael B. Klein <mbklein@gmail.com>","Jordan Prudhomme <jordan@raboland.fr>","Ilya Ovdin <iovdin@gmail.com>","Andargor <andargor@yahoo.com>","Paul Neave <paul.neave@gmail.com>","Brendan Kennedy <brenwken@gmail.com>","Brychan Bennett-Odlum <git@brychan.io>","Edward Silverton <e.silverton@gmail.com>","Roman Malieiev <aromaleev@gmail.com>","Tomas Szabo <tomas.szabo@deftomat.com>","Robert O'Rourke <robert@o-rourke.org>","Guillermo Alfonso Varela Chouci\xF1o <guillevch@gmail.com>","Christian Flintrup <chr@gigahost.dk>","Manan Jadhav <manan@motionden.com>","Leon Radley <leon@radley.se>","alza54 <alza54@thiocod.in>","Jacob Smith <jacob@frende.me>","Michael Nutt <michael@nutt.im>","Brad Parham <baparham@gmail.com>","Taneli Vatanen <taneli.vatanen@gmail.com>","Joris Dugu\xE9 <zaruike10@gmail.com>","Chris Banks <christopher.bradley.banks@gmail.com>","Ompal Singh <ompal.hitm09@gmail.com>","Brodan <christopher.hranj@gmail.com>","Ankur Parihar <ankur.github@gmail.com>","Brahim Ait elhaj <brahima@gmail.com>","Mart Jansink <m.jansink@gmail.com>","Lachlan Newman <lachnewman007@gmail.com>","Dennis Beatty <dennis@dcbeatty.com>","Ingvar Stepanyan <me@rreverser.com>","Don Denton <don@happycollision.com>"],scripts:{install:"node install/check",clean:"rm -rf src/build/ .nyc_output/ coverage/ test/fixtures/output.*",test:"npm run test-lint && npm run test-unit && npm run test-licensing && npm run test-types","test-lint":"semistandard && cpplint","test-unit":"nyc --reporter=lcov --reporter=text --check-coverage --branches=100 mocha","test-licensing":'license-checker --production --summary --onlyAllow="Apache-2.0;BSD;ISC;LGPL-3.0-or-later;MIT"',"test-leak":"./test/leak/leak.sh","test-types":"tsd","package-from-local-build":"node npm/from-local-build","package-from-github-release":"node npm/from-github-release","docs-build":"node docs/build && node docs/search-index/build","docs-serve":"cd docs && npx serve","docs-publish":"cd docs && npx firebase-tools deploy --project pixelplumbing --only hosting:pixelplumbing-sharp"},type:"commonjs",main:"lib/index.js",types:"lib/index.d.ts",files:["install","lib","src/*.{cc,h,gyp}"],repository:{type:"git",url:"git://github.com/lovell/sharp.git"},keywords:["jpeg","png","webp","avif","tiff","gif","svg","jp2","dzi","image","resize","thumbnail","crop","embed","libvips","vips"],dependencies:{color:"^4.2.3","detect-libc":"^2.0.3",semver:"^7.6.3"},optionalDependencies:{"@img/sharp-darwin-arm64":"0.33.5","@img/sharp-darwin-x64":"0.33.5","@img/sharp-libvips-darwin-arm64":"1.0.4","@img/sharp-libvips-darwin-x64":"1.0.4","@img/sharp-libvips-linux-arm":"1.0.5","@img/sharp-libvips-linux-arm64":"1.0.4","@img/sharp-libvips-linux-s390x":"1.0.4","@img/sharp-libvips-linux-x64":"1.0.4","@img/sharp-libvips-linuxmusl-arm64":"1.0.4","@img/sharp-libvips-linuxmusl-x64":"1.0.4","@img/sharp-linux-arm":"0.33.5","@img/sharp-linux-arm64":"0.33.5","@img/sharp-linux-s390x":"0.33.5","@img/sharp-linux-x64":"0.33.5","@img/sharp-linuxmusl-arm64":"0.33.5","@img/sharp-linuxmusl-x64":"0.33.5","@img/sharp-wasm32":"0.33.5","@img/sharp-win32-ia32":"0.33.5","@img/sharp-win32-x64":"0.33.5"},devDependencies:{"@emnapi/runtime":"^1.2.0","@img/sharp-libvips-dev":"1.0.4","@img/sharp-libvips-dev-wasm32":"1.0.5","@img/sharp-libvips-win32-ia32":"1.0.4","@img/sharp-libvips-win32-x64":"1.0.4","@types/node":"*",async:"^3.2.5",cc:"^3.0.1",emnapi:"^1.2.0","exif-reader":"^2.0.1","extract-zip":"^2.0.1",icc:"^3.0.0","jsdoc-to-markdown":"^8.0.3","license-checker":"^25.0.1",mocha:"^10.7.3","node-addon-api":"^8.1.0",nyc:"^17.0.0",prebuild:"^13.0.1",semistandard:"^17.0.0","tar-fs":"^3.0.6",tsd:"^0.31.1"},license:"Apache-2.0",engines:{node:"^18.17.0 || ^20.3.0 || >=21.0.0"},config:{libvips:">=8.15.3"},funding:{url:"https://opencollective.com/libvips"},binary:{napi_versions:[9]},semistandard:{env:["mocha"]},cc:{linelength:"120",filter:["build/include"]},nyc:{include:["lib"]},tsd:{directory:"test/types/"}}});var _1=E((hK,$7)=>{var{spawnSync:I2}=M("child_process"),{createHash:AJ}=M("crypto"),s6=_6(),LJ=H1(),jJ=a6(),p6=V2(),{config:TJ,engines:n6,optionalDependencies:FJ}=B1(),zJ=process.env.npm_package_config_libvips||TJ.libvips,i6=s6(zJ).version,IJ=["darwin-arm64","darwin-x64","linux-arm","linux-arm64","linux-s390x","linux-x64","linuxmusl-arm64","linuxmusl-x64","win32-ia32","win32-x64"],C2={encoding:"utf8",shell:!0},CJ=(q)=>{if(q instanceof Error)console.error(`sharp: Installation error: ${q.message}`);else console.log(`sharp: ${q}`)},t6=()=>p6.isNonGlibcLinuxSync()?p6.familySync():"",kJ=()=>`${process.platform}${t6()}-${process.arch}`,u0=()=>{if(o6())return"wasm32";let{npm_config_arch:q,npm_config_platform:J,npm_config_libc:$}=process.env,Z=typeof $==="string"?$:t6();return`${J||process.platform}${Z}-${q||process.arch}`},MJ=()=>{try{return M(`@img/sharp-libvips-dev-${u0()}/include`)}catch{try{return (()=>{throw new Error("Cannot require module "+"@img/sharp-libvips-dev/include");})()}catch{}}return""},SJ=()=>{try{return (()=>{throw new Error("Cannot require module "+"@img/sharp-libvips-dev/cplusplus");})()}catch{}return""},wJ=()=>{try{return M(`@img/sharp-libvips-dev-${u0()}/lib`)}catch{try{return M(`@img/sharp-libvips-${u0()}/lib`)}catch{}}return""},DJ=()=>{if(process.release?.name==="node"&&process.versions){if(!jJ(process.versions.node,n6.node))return{found:process.versions.node,expected:n6.node}}},o6=()=>{let{CC:q}=process.env;return Boolean(q&&q.endsWith("/emcc"))},PJ=()=>{if(process.platform==="darwin"&&process.arch==="x64")return(I2("sysctl sysctl.proc_translated",C2).stdout||"").trim()==="sysctl.proc_translated: 1";return!1},e6=(q)=>AJ("sha512").update(q).digest("hex"),OJ=()=>{try{let q=e6(`imgsharp-libvips-${u0()}`),J=s6(FJ[`@img/sharp-libvips-${u0()}`]).version;return e6(`${q}npm:${J}`).slice(0,10)}catch{}return""},yJ=()=>I2(`node-gyp rebuild --directory=src ${o6()?"--nodedir=emscripten":""}`,{...C2,stdio:"inherit"}).status,q7=()=>{if(process.platform!=="win32")return(I2("pkg-config --modversion vips-cpp",{...C2,env:{...process.env,PKG_CONFIG_PATH:J7()}}).stdout||"").trim();else return""},J7=()=>{if(process.platform!=="win32")return[(I2('which brew >/dev/null 2>&1 && brew environment --plain | grep PKG_CONFIG_LIBDIR | cut -d" " -f2',C2).stdout||"").trim(),process.env.PKG_CONFIG_PATH,"/usr/local/lib/pkgconfig","/usr/lib/pkgconfig","/usr/local/libdata/pkgconfig","/usr/libdata/pkgconfig"].filter(Boolean).join(":");else return""},V1=(q,J,$)=>{if($)$(`Detected ${J}, skipping search for globally-installed libvips`);return q},vJ=(q)=>{if(Boolean(process.env.SHARP_IGNORE_GLOBAL_LIBVIPS)===!0)return V1(!1,"SHARP_IGNORE_GLOBAL_LIBVIPS",q);if(Boolean(process.env.SHARP_FORCE_GLOBAL_LIBVIPS)===!0)return V1(!0,"SHARP_FORCE_GLOBAL_LIBVIPS",q);if(PJ())return V1(!1,"Rosetta",q);let J=q7();return!!J&&LJ(J,i6)};$7.exports={minimumLibvipsVersion:i6,prebuiltPlatforms:IJ,buildPlatformArch:u0,buildSharpLibvipsIncludeDir:MJ,buildSharpLibvipsCPlusPlusDir:SJ,buildSharpLibvipsLibDir:wJ,isUnsupportedNodeRuntime:DJ,runtimePlatformArch:kJ,log:CJ,yarnLocator:OJ,spawnRebuild:yJ,globalLibvipsVersion:q7,pkgConfigPath:J7,useGlobalLibvips:vJ}});var q2=E((gK,Q7)=>{var{familySync:xJ,versionSync:bJ}=V2(),{runtimePlatformArch:hJ,isUnsupportedNodeRuntime:Z7,prebuiltPlatforms:fJ,minimumLibvipsVersion:gJ}=_1(),P0=hJ(),dJ=[`../src/build/Release/sharp-${P0}.node`,"../src/build/Release/sharp-wasm32.node",`@img/sharp-${P0}/sharp.node`,"@img/sharp-wasm32/sharp.node"],E1,k2=[];for(let q of dJ)try{E1=M(q);break}catch(J){k2.push(J)}if(E1)Q7.exports=E1;else{let[q,J,$]=["linux","darwin","win32"].map((K)=>P0.startsWith(K)),Z=[`Could not load the "sharp" module using the ${P0} runtime`];k2.forEach((K)=>{if(K.code!=="MODULE_NOT_FOUND")Z.push(`${K.code}: ${K.message}`)});let Q=k2.map((K)=>K.message).join(" ");if(Z.push("Possible solutions:"),Z7()){let{found:K,expected:U}=Z7();Z.push("- Please upgrade Node.js:",`    Found ${K}`,`    Requires ${U}`)}else if(fJ.includes(P0)){let[K,U]=P0.split("-"),Y=K.endsWith("musl")?" --libc=musl":"";Z.push("- Ensure optional dependencies can be installed:","    npm install --include=optional sharp","- Ensure your package manager supports multi-platform installation:","    See https://sharp.pixelplumbing.com/install#cross-platform","- Add platform-specific dependencies:",`    npm install --os=${K.replace("musl","")}${Y} --cpu=${U} sharp`)}else Z.push(`- Manually install libvips >= ${gJ}`,"- Add experimental WebAssembly-based dependencies:","    npm install --cpu=wasm32 sharp","    npm install @img/sharp-wasm32");if(q&&/(symbol not found|CXXABI_)/i.test(Q))try{let{config:K}=M(`@img/sharp-libvips-${P0}/package`),U=`${xJ()} ${bJ()}`,Y=`${K.musl?"musl":"glibc"} ${K.musl||K.glibc}`;Z.push("- Update your OS:",`    Found ${U}`,`    Requires ${Y}`)}catch(K){}if(q&&/\/snap\/core[0-9]{2}/.test(Q))Z.push("- Remove the Node.js Snap, which does not support native modules","    snap remove node");if(J&&/Incompatible library version/.test(Q))Z.push("- Update Homebrew:","    brew update && brew upgrade vips");if(k2.some((K)=>K.code==="ERR_DLOPEN_DISABLED"))Z.push("- Run Node.js without using the --no-addons flag");if($&&/The specified procedure could not be found/.test(Q))Z.push("- Using the canvas package on Windows?","    See https://sharp.pixelplumbing.com/install#canvas-and-windows","- Check for outdated versions of sharp in the dependency tree:","    npm ls sharp");throw Z.push("- Consult the installation documentation:","    See https://sharp.pixelplumbing.com/install"),Error(Z.join(`
`))}});var U7=E((uK,K7)=>{var uJ=M("util"),R1=M("stream"),mJ=Y0();q2();var lJ=uJ.debuglog("sharp"),O0=function(q,J){if(arguments.length===1&&!mJ.defined(q))throw Error("Invalid input");if(!(this instanceof O0))return new O0(q,J);return R1.Duplex.call(this),this.options={topOffsetPre:-1,leftOffsetPre:-1,widthPre:-1,heightPre:-1,topOffsetPost:-1,leftOffsetPost:-1,widthPost:-1,heightPost:-1,width:-1,height:-1,canvas:"crop",position:0,resizeBackground:[0,0,0,255],useExifOrientation:!1,angle:0,rotationAngle:0,rotationBackground:[0,0,0,255],rotateBeforePreExtract:!1,flip:!1,flop:!1,extendTop:0,extendBottom:0,extendLeft:0,extendRight:0,extendBackground:[0,0,0,255],extendWith:"background",withoutEnlargement:!1,withoutReduction:!1,affineMatrix:[],affineBackground:[0,0,0,255],affineIdx:0,affineIdy:0,affineOdx:0,affineOdy:0,affineInterpolator:this.constructor.interpolators.bilinear,kernel:"lanczos3",fastShrinkOnLoad:!0,tint:[-1,0,0,0],flatten:!1,flattenBackground:[0,0,0],unflatten:!1,negate:!1,negateAlpha:!0,medianSize:0,blurSigma:0,precision:"integer",minAmpl:0.2,sharpenSigma:0,sharpenM1:1,sharpenM2:2,sharpenX1:2,sharpenY2:10,sharpenY3:20,threshold:0,thresholdGrayscale:!0,trimBackground:[],trimThreshold:-1,trimLineArt:!1,gamma:0,gammaOut:0,greyscale:!1,normalise:!1,normaliseLower:1,normaliseUpper:99,claheWidth:0,claheHeight:0,claheMaxSlope:3,brightness:1,saturation:1,hue:0,lightness:0,booleanBufferIn:null,booleanFileIn:"",joinChannelIn:[],extractChannel:-1,removeAlpha:!1,ensureAlpha:-1,colourspace:"srgb",colourspacePipeline:"last",composite:[],fileOut:"",formatOut:"input",streamOut:!1,keepMetadata:0,withMetadataOrientation:-1,withMetadataDensity:0,withIccProfile:"",withExif:{},withExifMerge:!0,resolveWithObject:!1,jpegQuality:80,jpegProgressive:!1,jpegChromaSubsampling:"4:2:0",jpegTrellisQuantisation:!1,jpegOvershootDeringing:!1,jpegOptimiseScans:!1,jpegOptimiseCoding:!0,jpegQuantisationTable:0,pngProgressive:!1,pngCompressionLevel:6,pngAdaptiveFiltering:!1,pngPalette:!1,pngQuality:100,pngEffort:7,pngBitdepth:8,pngDither:1,jp2Quality:80,jp2TileHeight:512,jp2TileWidth:512,jp2Lossless:!1,jp2ChromaSubsampling:"4:4:4",webpQuality:80,webpAlphaQuality:100,webpLossless:!1,webpNearLossless:!1,webpSmartSubsample:!1,webpPreset:"default",webpEffort:4,webpMinSize:!1,webpMixed:!1,gifBitdepth:8,gifEffort:7,gifDither:1,gifInterFrameMaxError:0,gifInterPaletteMaxError:3,gifReuse:!0,gifProgressive:!1,tiffQuality:80,tiffCompression:"jpeg",tiffPredictor:"horizontal",tiffPyramid:!1,tiffMiniswhite:!1,tiffBitdepth:8,tiffTile:!1,tiffTileHeight:256,tiffTileWidth:256,tiffXres:1,tiffYres:1,tiffResolutionUnit:"inch",heifQuality:50,heifLossless:!1,heifCompression:"av1",heifEffort:4,heifChromaSubsampling:"4:4:4",heifBitdepth:8,jxlDistance:1,jxlDecodingTier:0,jxlEffort:7,jxlLossless:!1,rawDepth:"uchar",tileSize:256,tileOverlap:0,tileContainer:"fs",tileLayout:"dz",tileFormat:"last",tileDepth:"last",tileAngle:0,tileSkipBlanks:-1,tileBackground:[255,255,255,255],tileCentre:!1,tileId:"https://example.com/iiif",tileBasename:"",timeoutSeconds:0,linearA:[],linearB:[],debuglog:($)=>{this.emit("warning",$),lJ($)},queueListener:function($){O0.queue.emit("change",$)}},this.options.input=this._createInputDescriptor(q,J,{allowStream:!0}),this};Object.setPrototypeOf(O0.prototype,R1.Duplex.prototype);Object.setPrototypeOf(O0,R1.Duplex);function cJ(){let q=this.constructor.call(),{debuglog:J,queueListener:$,...Z}=this.options;if(q.options=structuredClone(Z),q.options.debuglog=J,q.options.queueListener=$,this._isStreamInput())this.on("finish",()=>{this._flattenBufferIn(),q.options.input.buffer=this.options.input.buffer,q.emit("finish")});return q}Object.assign(O0.prototype,{clone:cJ});K7.exports=O0});var A1=E((mK,Y7)=>{Y7.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var X7=E((lK,H7)=>{H7.exports=function(J){if(!J||typeof J==="string")return!1;return J instanceof Array||Array.isArray(J)||J.length>=0&&(J.splice instanceof Function||Object.getOwnPropertyDescriptor(J,J.length-1)&&J.constructor.name!=="String")}});var W7=E((cK,N7)=>{var rJ=X7(),aJ=Array.prototype.concat,pJ=Array.prototype.slice,G7=N7.exports=function(J){var $=[];for(var Z=0,Q=J.length;Z<Q;Z++){var K=J[Z];if(rJ(K))$=aJ.call($,pJ.call(K));else $.push(K)}return $};G7.wrap=function(q){return function(){return q(G7(arguments))}}});var E7=E((rK,_7)=>{var $2=A1(),Z2=W7(),B7=Object.hasOwnProperty,V7=Object.create(null);for(J2 in $2)if(B7.call($2,J2))V7[$2[J2]]=J2;var J2,p=_7.exports={to:{},get:{}};p.get=function(q){var J=q.substring(0,3).toLowerCase(),$,Z;switch(J){case"hsl":$=p.get.hsl(q),Z="hsl";break;case"hwb":$=p.get.hwb(q),Z="hwb";break;default:$=p.get.rgb(q),Z="rgb";break}if(!$)return null;return{model:Z,value:$}};p.get.rgb=function(q){if(!q)return null;var J=/^#([a-f0-9]{3,4})$/i,$=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,Z=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Q=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,K=/^(\w+)$/,U=[0,0,0,1],Y,X,G;if(Y=q.match($)){G=Y[2],Y=Y[1];for(X=0;X<3;X++){var W=X*2;U[X]=parseInt(Y.slice(W,W+2),16)}if(G)U[3]=parseInt(G,16)/255}else if(Y=q.match(J)){Y=Y[1],G=Y[3];for(X=0;X<3;X++)U[X]=parseInt(Y[X]+Y[X],16);if(G)U[3]=parseInt(G+G,16)/255}else if(Y=q.match(Z)){for(X=0;X<3;X++)U[X]=parseInt(Y[X+1],0);if(Y[4])if(Y[5])U[3]=parseFloat(Y[4])*0.01;else U[3]=parseFloat(Y[4])}else if(Y=q.match(Q)){for(X=0;X<3;X++)U[X]=Math.round(parseFloat(Y[X+1])*2.55);if(Y[4])if(Y[5])U[3]=parseFloat(Y[4])*0.01;else U[3]=parseFloat(Y[4])}else if(Y=q.match(K)){if(Y[1]==="transparent")return[0,0,0,0];if(!B7.call($2,Y[1]))return null;return U=$2[Y[1]],U[3]=1,U}else return null;for(X=0;X<3;X++)U[X]=z0(U[X],0,255);return U[3]=z0(U[3],0,1),U};p.get.hsl=function(q){if(!q)return null;var J=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,$=q.match(J);if($){var Z=parseFloat($[4]),Q=(parseFloat($[1])%360+360)%360,K=z0(parseFloat($[2]),0,100),U=z0(parseFloat($[3]),0,100),Y=z0(isNaN(Z)?1:Z,0,1);return[Q,K,U,Y]}return null};p.get.hwb=function(q){if(!q)return null;var J=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,$=q.match(J);if($){var Z=parseFloat($[4]),Q=(parseFloat($[1])%360+360)%360,K=z0(parseFloat($[2]),0,100),U=z0(parseFloat($[3]),0,100),Y=z0(isNaN(Z)?1:Z,0,1);return[Q,K,U,Y]}return null};p.to.hex=function(){var q=Z2(arguments);return"#"+M2(q[0])+M2(q[1])+M2(q[2])+(q[3]<1?M2(Math.round(q[3]*255)):"")};p.to.rgb=function(){var q=Z2(arguments);return q.length<4||q[3]===1?"rgb("+Math.round(q[0])+", "+Math.round(q[1])+", "+Math.round(q[2])+")":"rgba("+Math.round(q[0])+", "+Math.round(q[1])+", "+Math.round(q[2])+", "+q[3]+")"};p.to.rgb.percent=function(){var q=Z2(arguments),J=Math.round(q[0]/255*100),$=Math.round(q[1]/255*100),Z=Math.round(q[2]/255*100);return q.length<4||q[3]===1?"rgb("+J+"%, "+$+"%, "+Z+"%)":"rgba("+J+"%, "+$+"%, "+Z+"%, "+q[3]+")"};p.to.hsl=function(){var q=Z2(arguments);return q.length<4||q[3]===1?"hsl("+q[0]+", "+q[1]+"%, "+q[2]+"%)":"hsla("+q[0]+", "+q[1]+"%, "+q[2]+"%, "+q[3]+")"};p.to.hwb=function(){var q=Z2(arguments),J="";if(q.length>=4&&q[3]!==1)J=", "+q[3];return"hwb("+q[0]+", "+q[1]+"%, "+q[2]+"%"+J+")"};p.to.keyword=function(q){return V7[q.slice(0,3)]};function z0(q,J,$){return Math.min(Math.max(J,q),$)}function M2(q){var J=Math.round(q).toString(16).toUpperCase();return J.length<2?"0"+J:J}});var L1=E((aK,A7)=>{var Q2=A1(),R7={};for(let q of Object.keys(Q2))R7[Q2[q]]=q;var F={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};A7.exports=F;for(let q of Object.keys(F)){if(!("channels"in F[q]))throw Error("missing channels property: "+q);if(!("labels"in F[q]))throw Error("missing channel labels property: "+q);if(F[q].labels.length!==F[q].channels)throw Error("channel and label counts mismatch: "+q);let{channels:J,labels:$}=F[q];delete F[q].channels,delete F[q].labels,Object.defineProperty(F[q],"channels",{value:J}),Object.defineProperty(F[q],"labels",{value:$})}F.rgb.hsl=function(q){let J=q[0]/255,$=q[1]/255,Z=q[2]/255,Q=Math.min(J,$,Z),K=Math.max(J,$,Z),U=K-Q,Y,X;if(K===Q)Y=0;else if(J===K)Y=($-Z)/U;else if($===K)Y=2+(Z-J)/U;else if(Z===K)Y=4+(J-$)/U;if(Y=Math.min(Y*60,360),Y<0)Y+=360;let G=(Q+K)/2;if(K===Q)X=0;else if(G<=0.5)X=U/(K+Q);else X=U/(2-K-Q);return[Y,X*100,G*100]};F.rgb.hsv=function(q){let J,$,Z,Q,K,U=q[0]/255,Y=q[1]/255,X=q[2]/255,G=Math.max(U,Y,X),W=G-Math.min(U,Y,X),B=function(_){return(G-_)/6/W+0.5};if(W===0)Q=0,K=0;else{if(K=W/G,J=B(U),$=B(Y),Z=B(X),U===G)Q=Z-$;else if(Y===G)Q=0.3333333333333333+J-Z;else if(X===G)Q=0.6666666666666666+$-J;if(Q<0)Q+=1;else if(Q>1)Q-=1}return[Q*360,K*100,G*100]};F.rgb.hwb=function(q){let J=q[0],$=q[1],Z=q[2],Q=F.rgb.hsl(q)[0],K=0.00392156862745098*Math.min(J,Math.min($,Z));return Z=1-0.00392156862745098*Math.max(J,Math.max($,Z)),[Q,K*100,Z*100]};F.rgb.cmyk=function(q){let J=q[0]/255,$=q[1]/255,Z=q[2]/255,Q=Math.min(1-J,1-$,1-Z),K=(1-J-Q)/(1-Q)||0,U=(1-$-Q)/(1-Q)||0,Y=(1-Z-Q)/(1-Q)||0;return[K*100,U*100,Y*100,Q*100]};function nJ(q,J){return(q[0]-J[0])**2+(q[1]-J[1])**2+(q[2]-J[2])**2}F.rgb.keyword=function(q){let J=R7[q];if(J)return J;let $=1/0,Z;for(let Q of Object.keys(Q2)){let K=Q2[Q],U=nJ(q,K);if(U<$)$=U,Z=Q}return Z};F.keyword.rgb=function(q){return Q2[q]};F.rgb.xyz=function(q){let J=q[0]/255,$=q[1]/255,Z=q[2]/255;J=J>0.04045?((J+0.055)/1.055)**2.4:J/12.92,$=$>0.04045?(($+0.055)/1.055)**2.4:$/12.92,Z=Z>0.04045?((Z+0.055)/1.055)**2.4:Z/12.92;let Q=J*0.4124+$*0.3576+Z*0.1805,K=J*0.2126+$*0.7152+Z*0.0722,U=J*0.0193+$*0.1192+Z*0.9505;return[Q*100,K*100,U*100]};F.rgb.lab=function(q){let J=F.rgb.xyz(q),$=J[0],Z=J[1],Q=J[2];$/=95.047,Z/=100,Q/=108.883,$=$>0.008856?$**0.3333333333333333:7.787*$+0.13793103448275862,Z=Z>0.008856?Z**0.3333333333333333:7.787*Z+0.13793103448275862,Q=Q>0.008856?Q**0.3333333333333333:7.787*Q+0.13793103448275862;let K=116*Z-16,U=500*($-Z),Y=200*(Z-Q);return[K,U,Y]};F.hsl.rgb=function(q){let J=q[0]/360,$=q[1]/100,Z=q[2]/100,Q,K,U;if($===0)return U=Z*255,[U,U,U];if(Z<0.5)Q=Z*(1+$);else Q=Z+$-Z*$;let Y=2*Z-Q,X=[0,0,0];for(let G=0;G<3;G++){if(K=J+0.3333333333333333*-(G-1),K<0)K++;if(K>1)K--;if(6*K<1)U=Y+(Q-Y)*6*K;else if(2*K<1)U=Q;else if(3*K<2)U=Y+(Q-Y)*(0.6666666666666666-K)*6;else U=Y;X[G]=U*255}return X};F.hsl.hsv=function(q){let J=q[0],$=q[1]/100,Z=q[2]/100,Q=$,K=Math.max(Z,0.01);Z*=2,$*=Z<=1?Z:2-Z,Q*=K<=1?K:2-K;let U=(Z+$)/2,Y=Z===0?2*Q/(K+Q):2*$/(Z+$);return[J,Y*100,U*100]};F.hsv.rgb=function(q){let J=q[0]/60,$=q[1]/100,Z=q[2]/100,Q=Math.floor(J)%6,K=J-Math.floor(J),U=255*Z*(1-$),Y=255*Z*(1-$*K),X=255*Z*(1-$*(1-K));switch(Z*=255,Q){case 0:return[Z,X,U];case 1:return[Y,Z,U];case 2:return[U,Z,X];case 3:return[U,Y,Z];case 4:return[X,U,Z];case 5:return[Z,U,Y]}};F.hsv.hsl=function(q){let J=q[0],$=q[1]/100,Z=q[2]/100,Q=Math.max(Z,0.01),K,U;U=(2-$)*Z;let Y=(2-$)*Q;return K=$*Q,K/=Y<=1?Y:2-Y,K=K||0,U/=2,[J,K*100,U*100]};F.hwb.rgb=function(q){let J=q[0]/360,$=q[1]/100,Z=q[2]/100,Q=$+Z,K;if(Q>1)$/=Q,Z/=Q;let U=Math.floor(6*J),Y=1-Z;if(K=6*J-U,(U&1)!==0)K=1-K;let X=$+K*(Y-$),G,W,B;switch(U){default:case 6:case 0:G=Y,W=X,B=$;break;case 1:G=X,W=Y,B=$;break;case 2:G=$,W=Y,B=X;break;case 3:G=$,W=X,B=Y;break;case 4:G=X,W=$,B=Y;break;case 5:G=Y,W=$,B=X;break}return[G*255,W*255,B*255]};F.cmyk.rgb=function(q){let J=q[0]/100,$=q[1]/100,Z=q[2]/100,Q=q[3]/100,K=1-Math.min(1,J*(1-Q)+Q),U=1-Math.min(1,$*(1-Q)+Q),Y=1-Math.min(1,Z*(1-Q)+Q);return[K*255,U*255,Y*255]};F.xyz.rgb=function(q){let J=q[0]/100,$=q[1]/100,Z=q[2]/100,Q,K,U;return Q=J*3.2406+$*-1.5372+Z*-0.4986,K=J*-0.9689+$*1.8758+Z*0.0415,U=J*0.0557+$*-0.204+Z*1.057,Q=Q>0.0031308?1.055*Q**0.4166666666666667-0.055:Q*12.92,K=K>0.0031308?1.055*K**0.4166666666666667-0.055:K*12.92,U=U>0.0031308?1.055*U**0.4166666666666667-0.055:U*12.92,Q=Math.min(Math.max(0,Q),1),K=Math.min(Math.max(0,K),1),U=Math.min(Math.max(0,U),1),[Q*255,K*255,U*255]};F.xyz.lab=function(q){let J=q[0],$=q[1],Z=q[2];J/=95.047,$/=100,Z/=108.883,J=J>0.008856?J**0.3333333333333333:7.787*J+0.13793103448275862,$=$>0.008856?$**0.3333333333333333:7.787*$+0.13793103448275862,Z=Z>0.008856?Z**0.3333333333333333:7.787*Z+0.13793103448275862;let Q=116*$-16,K=500*(J-$),U=200*($-Z);return[Q,K,U]};F.lab.xyz=function(q){let J=q[0],$=q[1],Z=q[2],Q,K,U;K=(J+16)/116,Q=$/500+K,U=K-Z/200;let Y=K**3,X=Q**3,G=U**3;return K=Y>0.008856?Y:(K-0.13793103448275862)/7.787,Q=X>0.008856?X:(Q-0.13793103448275862)/7.787,U=G>0.008856?G:(U-0.13793103448275862)/7.787,Q*=95.047,K*=100,U*=108.883,[Q,K,U]};F.lab.lch=function(q){let J=q[0],$=q[1],Z=q[2],Q;if(Q=Math.atan2(Z,$)*360/2/Math.PI,Q<0)Q+=360;let U=Math.sqrt($*$+Z*Z);return[J,U,Q]};F.lch.lab=function(q){let J=q[0],$=q[1],Q=q[2]/360*2*Math.PI,K=$*Math.cos(Q),U=$*Math.sin(Q);return[J,K,U]};F.rgb.ansi16=function(q,J=null){let[$,Z,Q]=q,K=J===null?F.rgb.hsv(q)[2]:J;if(K=Math.round(K/50),K===0)return 30;let U=30+(Math.round(Q/255)<<2|Math.round(Z/255)<<1|Math.round($/255));if(K===2)U+=60;return U};F.hsv.ansi16=function(q){return F.rgb.ansi16(F.hsv.rgb(q),q[2])};F.rgb.ansi256=function(q){let J=q[0],$=q[1],Z=q[2];if(J===$&&$===Z){if(J<8)return 16;if(J>248)return 231;return Math.round((J-8)/247*24)+232}return 16+36*Math.round(J/255*5)+6*Math.round($/255*5)+Math.round(Z/255*5)};F.ansi16.rgb=function(q){let J=q%10;if(J===0||J===7){if(q>50)J+=3.5;return J=J/10.5*255,[J,J,J]}let $=(~~(q>50)+1)*0.5,Z=(J&1)*$*255,Q=(J>>1&1)*$*255,K=(J>>2&1)*$*255;return[Z,Q,K]};F.ansi256.rgb=function(q){if(q>=232){let K=(q-232)*10+8;return[K,K,K]}q-=16;let J,$=Math.floor(q/36)/5*255,Z=Math.floor((J=q%36)/6)/5*255,Q=J%6/5*255;return[$,Z,Q]};F.rgb.hex=function(q){let $=(((Math.round(q[0])&255)<<16)+((Math.round(q[1])&255)<<8)+(Math.round(q[2])&255)).toString(16).toUpperCase();return"000000".substring($.length)+$};F.hex.rgb=function(q){let J=q.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!J)return[0,0,0];let $=J[0];if(J[0].length===3)$=$.split("").map((Y)=>{return Y+Y}).join("");let Z=parseInt($,16),Q=Z>>16&255,K=Z>>8&255,U=Z&255;return[Q,K,U]};F.rgb.hcg=function(q){let J=q[0]/255,$=q[1]/255,Z=q[2]/255,Q=Math.max(Math.max(J,$),Z),K=Math.min(Math.min(J,$),Z),U=Q-K,Y,X;if(U<1)Y=K/(1-U);else Y=0;if(U<=0)X=0;else if(Q===J)X=($-Z)/U%6;else if(Q===$)X=2+(Z-J)/U;else X=4+(J-$)/U;return X/=6,X%=1,[X*360,U*100,Y*100]};F.hsl.hcg=function(q){let J=q[1]/100,$=q[2]/100,Z=$<0.5?2*J*$:2*J*(1-$),Q=0;if(Z<1)Q=($-0.5*Z)/(1-Z);return[q[0],Z*100,Q*100]};F.hsv.hcg=function(q){let J=q[1]/100,$=q[2]/100,Z=J*$,Q=0;if(Z<1)Q=($-Z)/(1-Z);return[q[0],Z*100,Q*100]};F.hcg.rgb=function(q){let J=q[0]/360,$=q[1]/100,Z=q[2]/100;if($===0)return[Z*255,Z*255,Z*255];let Q=[0,0,0],K=J%1*6,U=K%1,Y=1-U,X=0;switch(Math.floor(K)){case 0:Q[0]=1,Q[1]=U,Q[2]=0;break;case 1:Q[0]=Y,Q[1]=1,Q[2]=0;break;case 2:Q[0]=0,Q[1]=1,Q[2]=U;break;case 3:Q[0]=0,Q[1]=Y,Q[2]=1;break;case 4:Q[0]=U,Q[1]=0,Q[2]=1;break;default:Q[0]=1,Q[1]=0,Q[2]=Y}return X=(1-$)*Z,[($*Q[0]+X)*255,($*Q[1]+X)*255,($*Q[2]+X)*255]};F.hcg.hsv=function(q){let J=q[1]/100,$=q[2]/100,Z=J+$*(1-J),Q=0;if(Z>0)Q=J/Z;return[q[0],Q*100,Z*100]};F.hcg.hsl=function(q){let J=q[1]/100,Z=q[2]/100*(1-J)+0.5*J,Q=0;if(Z>0&&Z<0.5)Q=J/(2*Z);else if(Z>=0.5&&Z<1)Q=J/(2*(1-Z));return[q[0],Q*100,Z*100]};F.hcg.hwb=function(q){let J=q[1]/100,$=q[2]/100,Z=J+$*(1-J);return[q[0],(Z-J)*100,(1-Z)*100]};F.hwb.hcg=function(q){let J=q[1]/100,Z=1-q[2]/100,Q=Z-J,K=0;if(Q<1)K=(Z-Q)/(1-Q);return[q[0],Q*100,K*100]};F.apple.rgb=function(q){return[q[0]/65535*255,q[1]/65535*255,q[2]/65535*255]};F.rgb.apple=function(q){return[q[0]/255*65535,q[1]/255*65535,q[2]/255*65535]};F.gray.rgb=function(q){return[q[0]/100*255,q[0]/100*255,q[0]/100*255]};F.gray.hsl=function(q){return[0,0,q[0]]};F.gray.hsv=F.gray.hsl;F.gray.hwb=function(q){return[0,100,q[0]]};F.gray.cmyk=function(q){return[0,0,0,q[0]]};F.gray.lab=function(q){return[q[0],0,0]};F.gray.hex=function(q){let J=Math.round(q[0]/100*255)&255,Z=((J<<16)+(J<<8)+J).toString(16).toUpperCase();return"000000".substring(Z.length)+Z};F.rgb.gray=function(q){return[(q[0]+q[1]+q[2])/3/255*100]}});var j7=E((pK,L7)=>{var S2=L1();function eJ(){let q={},J=Object.keys(S2);for(let $=J.length,Z=0;Z<$;Z++)q[J[Z]]={distance:-1,parent:null};return q}function sJ(q){let J=eJ(),$=[q];J[q].distance=0;while($.length){let Z=$.pop(),Q=Object.keys(S2[Z]);for(let K=Q.length,U=0;U<K;U++){let Y=Q[U],X=J[Y];if(X.distance===-1)X.distance=J[Z].distance+1,X.parent=Z,$.unshift(Y)}}return J}function iJ(q,J){return function($){return J(q($))}}function tJ(q,J){let $=[J[q].parent,q],Z=S2[J[q].parent][q],Q=J[q].parent;while(J[Q].parent)$.unshift(J[Q].parent),Z=iJ(S2[J[Q].parent][Q],Z),Q=J[Q].parent;return Z.conversion=$,Z}L7.exports=function(q){let J=sJ(q),$={},Z=Object.keys(J);for(let Q=Z.length,K=0;K<Q;K++){let U=Z[K];if(J[U].parent===null)continue;$[U]=tJ(U,J)}return $}});var F7=E((nK,T7)=>{var j1=L1(),oJ=j7(),m0={},q$=Object.keys(j1);function J$(q){let J=function(...$){let Z=$[0];if(Z===void 0||Z===null)return Z;if(Z.length>1)$=Z;return q($)};if("conversion"in q)J.conversion=q.conversion;return J}function $$(q){let J=function(...$){let Z=$[0];if(Z===void 0||Z===null)return Z;if(Z.length>1)$=Z;let Q=q($);if(typeof Q==="object")for(let K=Q.length,U=0;U<K;U++)Q[U]=Math.round(Q[U]);return Q};if("conversion"in q)J.conversion=q.conversion;return J}q$.forEach((q)=>{m0[q]={},Object.defineProperty(m0[q],"channels",{value:j1[q].channels}),Object.defineProperty(m0[q],"labels",{value:j1[q].labels});let J=oJ(q);Object.keys(J).forEach((Z)=>{let Q=J[Z];m0[q][Z]=$$(Q),m0[q][Z].raw=J$(Q)})});T7.exports=m0});var D2=E((eK,I7)=>{var l0=E7(),n=F7(),z7=["keyword","gray","hex"],T1={};for(let q of Object.keys(n))T1[[...n[q].labels].sort().join("")]=q;var w2={};function f(q,J){if(!(this instanceof f))return new f(q,J);if(J&&J in z7)J=null;if(J&&!(J in n))throw Error("Unknown model: "+J);let $,Z;if(q==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(q instanceof f)this.model=q.model,this.color=[...q.color],this.valpha=q.valpha;else if(typeof q==="string"){let Q=l0.get(q);if(Q===null)throw Error("Unable to parse color from string: "+q);this.model=Q.model,Z=n[this.model].channels,this.color=Q.value.slice(0,Z),this.valpha=typeof Q.value[Z]==="number"?Q.value[Z]:1}else if(q.length>0){this.model=J||"rgb",Z=n[this.model].channels;let Q=Array.prototype.slice.call(q,0,Z);this.color=F1(Q,Z),this.valpha=typeof q[Z]==="number"?q[Z]:1}else if(typeof q==="number")this.model="rgb",this.color=[q>>16&255,q>>8&255,q&255],this.valpha=1;else{this.valpha=1;let Q=Object.keys(q);if("alpha"in q)Q.splice(Q.indexOf("alpha"),1),this.valpha=typeof q.alpha==="number"?q.alpha:0;let K=Q.sort().join("");if(!(K in T1))throw Error("Unable to parse color from object: "+JSON.stringify(q));this.model=T1[K];let{labels:U}=n[this.model],Y=[];for($=0;$<U.length;$++)Y.push(q[U[$]]);this.color=F1(Y)}if(w2[this.model]){Z=n[this.model].channels;for($=0;$<Z;$++){let Q=w2[this.model][$];if(Q)this.color[$]=Q(this.color[$])}}if(this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze)Object.freeze(this)}f.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(q){let J=this.model in l0.to?this:this.rgb();J=J.round(typeof q==="number"?q:1);let $=J.valpha===1?J.color:[...J.color,this.valpha];return l0.to[J.model]($)},percentString(q){let J=this.rgb().round(typeof q==="number"?q:1),$=J.valpha===1?J.color:[...J.color,this.valpha];return l0.to.rgb.percent($)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){let q={},{channels:J}=n[this.model],{labels:$}=n[this.model];for(let Z=0;Z<J;Z++)q[$[Z]]=this.color[Z];if(this.valpha!==1)q.alpha=this.valpha;return q},unitArray(){let q=this.rgb().color;if(q[0]/=255,q[1]/=255,q[2]/=255,this.valpha!==1)q.push(this.valpha);return q},unitObject(){let q=this.rgb().object();if(q.r/=255,q.g/=255,q.b/=255,this.valpha!==1)q.alpha=this.valpha;return q},round(q){return q=Math.max(q||0,0),new f([...this.color.map(Q$(q)),this.valpha],this.model)},alpha(q){if(q!==void 0)return new f([...this.color,Math.max(0,Math.min(1,q))],this.model);return this.valpha},red:O("rgb",0,b(255)),green:O("rgb",1,b(255)),blue:O("rgb",2,b(255)),hue:O(["hsl","hsv","hsl","hwb","hcg"],0,(q)=>(q%360+360)%360),saturationl:O("hsl",1,b(100)),lightness:O("hsl",2,b(100)),saturationv:O("hsv",1,b(100)),value:O("hsv",2,b(100)),chroma:O("hcg",1,b(100)),gray:O("hcg",2,b(100)),white:O("hwb",1,b(100)),wblack:O("hwb",2,b(100)),cyan:O("cmyk",0,b(100)),magenta:O("cmyk",1,b(100)),yellow:O("cmyk",2,b(100)),black:O("cmyk",3,b(100)),x:O("xyz",0,b(95.047)),y:O("xyz",1,b(100)),z:O("xyz",2,b(108.833)),l:O("lab",0,b(100)),a:O("lab",1),b:O("lab",2),keyword(q){if(q!==void 0)return new f(q);return n[this.model].keyword(this.color)},hex(q){if(q!==void 0)return new f(q);return l0.to.hex(this.rgb().round().color)},hexa(q){if(q!==void 0)return new f(q);let J=this.rgb().round().color,$=Math.round(this.valpha*255).toString(16).toUpperCase();if($.length===1)$="0"+$;return l0.to.hex(J)+$},rgbNumber(){let q=this.rgb().color;return(q[0]&255)<<16|(q[1]&255)<<8|q[2]&255},luminosity(){let q=this.rgb().color,J=[];for(let[$,Z]of q.entries()){let Q=Z/255;J[$]=Q<=0.04045?Q/12.92:((Q+0.055)/1.055)**2.4}return 0.2126*J[0]+0.7152*J[1]+0.0722*J[2]},contrast(q){let J=this.luminosity(),$=q.luminosity();if(J>$)return(J+0.05)/($+0.05);return($+0.05)/(J+0.05)},level(q){let J=this.contrast(q);if(J>=7)return"AAA";return J>=4.5?"AA":""},isDark(){let q=this.rgb().color;return(q[0]*2126+q[1]*7152+q[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){let q=this.rgb();for(let J=0;J<3;J++)q.color[J]=255-q.color[J];return q},lighten(q){let J=this.hsl();return J.color[2]+=J.color[2]*q,J},darken(q){let J=this.hsl();return J.color[2]-=J.color[2]*q,J},saturate(q){let J=this.hsl();return J.color[1]+=J.color[1]*q,J},desaturate(q){let J=this.hsl();return J.color[1]-=J.color[1]*q,J},whiten(q){let J=this.hwb();return J.color[1]+=J.color[1]*q,J},blacken(q){let J=this.hwb();return J.color[2]+=J.color[2]*q,J},grayscale(){let q=this.rgb().color,J=q[0]*0.3+q[1]*0.59+q[2]*0.11;return f.rgb(J,J,J)},fade(q){return this.alpha(this.valpha-this.valpha*q)},opaquer(q){return this.alpha(this.valpha+this.valpha*q)},rotate(q){let J=this.hsl(),$=J.color[0];return $=($+q)%360,$=$<0?360+$:$,J.color[0]=$,J},mix(q,J){if(!q||!q.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof q);let $=q.rgb(),Z=this.rgb(),Q=J===void 0?0.5:J,K=2*Q-1,U=$.alpha()-Z.alpha(),Y=((K*U===-1?K:(K+U)/(1+K*U))+1)/2,X=1-Y;return f.rgb(Y*$.red()+X*Z.red(),Y*$.green()+X*Z.green(),Y*$.blue()+X*Z.blue(),$.alpha()*Q+Z.alpha()*(1-Q))}};for(let q of Object.keys(n)){if(z7.includes(q))continue;let{channels:J}=n[q];f.prototype[q]=function(...$){if(this.model===q)return new f(this);if($.length>0)return new f($,q);return new f([...K$(n[this.model][q].raw(this.color)),this.valpha],q)},f[q]=function(...$){let Z=$[0];if(typeof Z==="number")Z=F1($,J);return new f(Z,q)}}function Z$(q,J){return Number(q.toFixed(J))}function Q$(q){return function(J){return Z$(J,q)}}function O(q,J,$){q=Array.isArray(q)?q:[q];for(let Z of q)(w2[Z]||(w2[Z]=[]))[J]=$;return q=q[0],function(Z){let Q;if(Z!==void 0){if($)Z=$(Z);return Q=this[q](),Q.color[J]=Z,Q}if(Q=this[q]().color[J],$)Q=$(Q);return Q}}function b(q){return function(J){return Math.max(0,Math.min(q,J))}}function K$(q){return Array.isArray(q)?q:[q]}function F1(q,J){for(let $=0;$<J;$++)if(typeof q[$]!=="number")q[$]=0;return q}I7.exports=f});var M7=E((sK,k7)=>{var U$=D2(),V=Y0(),I0=q2(),Y$={left:"low",center:"centre",centre:"centre",right:"high"};function C7(q){let{raw:J,density:$,limitInputPixels:Z,ignoreIcc:Q,unlimited:K,sequentialRead:U,failOn:Y,failOnError:X,animated:G,page:W,pages:B,subifd:_}=q;return[J,$,Z,Q,K,U,Y,X,G,W,B,_].some(V.defined)?{raw:J,density:$,limitInputPixels:Z,ignoreIcc:Q,unlimited:K,sequentialRead:U,failOn:Y,failOnError:X,animated:G,page:W,pages:B,subifd:_}:void 0}function H$(q,J,$){let Z={failOn:"warning",limitInputPixels:Math.pow(16383,2),ignoreIcc:!1,unlimited:!1,sequentialRead:!0};if(V.string(q))Z.file=q;else if(V.buffer(q)){if(q.length===0)throw Error("Input Buffer is empty");Z.buffer=q}else if(V.arrayBuffer(q)){if(q.byteLength===0)throw Error("Input bit Array is empty");Z.buffer=Buffer.from(q,0,q.byteLength)}else if(V.typedArray(q)){if(q.length===0)throw Error("Input Bit Array is empty");Z.buffer=Buffer.from(q.buffer,q.byteOffset,q.byteLength)}else if(V.plainObject(q)&&!V.defined(J)){if(J=q,C7(J))Z.buffer=[]}else if(!V.defined(q)&&!V.defined(J)&&V.object($)&&$.allowStream)Z.buffer=[];else throw Error(`Unsupported input '${q}' of type ${typeof q}${V.defined(J)?` when also providing options of type ${typeof J}`:""}`);if(V.object(J)){if(V.defined(J.failOnError))if(V.bool(J.failOnError))Z.failOn=J.failOnError?"warning":"none";else throw V.invalidParameterError("failOnError","boolean",J.failOnError);if(V.defined(J.failOn))if(V.string(J.failOn)&&V.inArray(J.failOn,["none","truncated","error","warning"]))Z.failOn=J.failOn;else throw V.invalidParameterError("failOn","one of: none, truncated, error, warning",J.failOn);if(V.defined(J.density))if(V.inRange(J.density,1,1e5))Z.density=J.density;else throw V.invalidParameterError("density","number between 1 and 100000",J.density);if(V.defined(J.ignoreIcc))if(V.bool(J.ignoreIcc))Z.ignoreIcc=J.ignoreIcc;else throw V.invalidParameterError("ignoreIcc","boolean",J.ignoreIcc);if(V.defined(J.limitInputPixels))if(V.bool(J.limitInputPixels))Z.limitInputPixels=J.limitInputPixels?Math.pow(16383,2):0;else if(V.integer(J.limitInputPixels)&&V.inRange(J.limitInputPixels,0,Number.MAX_SAFE_INTEGER))Z.limitInputPixels=J.limitInputPixels;else throw V.invalidParameterError("limitInputPixels","positive integer",J.limitInputPixels);if(V.defined(J.unlimited))if(V.bool(J.unlimited))Z.unlimited=J.unlimited;else throw V.invalidParameterError("unlimited","boolean",J.unlimited);if(V.defined(J.sequentialRead))if(V.bool(J.sequentialRead))Z.sequentialRead=J.sequentialRead;else throw V.invalidParameterError("sequentialRead","boolean",J.sequentialRead);if(V.defined(J.raw))if(V.object(J.raw)&&V.integer(J.raw.width)&&J.raw.width>0&&V.integer(J.raw.height)&&J.raw.height>0&&V.integer(J.raw.channels)&&V.inRange(J.raw.channels,1,4))switch(Z.rawWidth=J.raw.width,Z.rawHeight=J.raw.height,Z.rawChannels=J.raw.channels,Z.rawPremultiplied=!!J.raw.premultiplied,q.constructor){case Uint8Array:case Uint8ClampedArray:Z.rawDepth="uchar";break;case Int8Array:Z.rawDepth="char";break;case Uint16Array:Z.rawDepth="ushort";break;case Int16Array:Z.rawDepth="short";break;case Uint32Array:Z.rawDepth="uint";break;case Int32Array:Z.rawDepth="int";break;case Float32Array:Z.rawDepth="float";break;case Float64Array:Z.rawDepth="double";break;default:Z.rawDepth="uchar";break}else throw Error("Expected width, height and channels for raw pixel input");if(V.defined(J.animated))if(V.bool(J.animated))Z.pages=J.animated?-1:1;else throw V.invalidParameterError("animated","boolean",J.animated);if(V.defined(J.pages))if(V.integer(J.pages)&&V.inRange(J.pages,-1,1e5))Z.pages=J.pages;else throw V.invalidParameterError("pages","integer between -1 and 100000",J.pages);if(V.defined(J.page))if(V.integer(J.page)&&V.inRange(J.page,0,1e5))Z.page=J.page;else throw V.invalidParameterError("page","integer between 0 and 100000",J.page);if(V.defined(J.level))if(V.integer(J.level)&&V.inRange(J.level,0,256))Z.level=J.level;else throw V.invalidParameterError("level","integer between 0 and 256",J.level);if(V.defined(J.subifd))if(V.integer(J.subifd)&&V.inRange(J.subifd,-1,1e5))Z.subifd=J.subifd;else throw V.invalidParameterError("subifd","integer between -1 and 100000",J.subifd);if(V.defined(J.create))if(V.object(J.create)&&V.integer(J.create.width)&&J.create.width>0&&V.integer(J.create.height)&&J.create.height>0&&V.integer(J.create.channels)){if(Z.createWidth=J.create.width,Z.createHeight=J.create.height,Z.createChannels=J.create.channels,V.defined(J.create.noise)){if(!V.object(J.create.noise))throw Error("Expected noise to be an object");if(!V.inArray(J.create.noise.type,["gaussian"]))throw Error("Only gaussian noise is supported at the moment");if(!V.inRange(J.create.channels,1,4))throw V.invalidParameterError("create.channels","number between 1 and 4",J.create.channels);if(Z.createNoiseType=J.create.noise.type,V.number(J.create.noise.mean)&&V.inRange(J.create.noise.mean,0,1e4))Z.createNoiseMean=J.create.noise.mean;else throw V.invalidParameterError("create.noise.mean","number between 0 and 10000",J.create.noise.mean);if(V.number(J.create.noise.sigma)&&V.inRange(J.create.noise.sigma,0,1e4))Z.createNoiseSigma=J.create.noise.sigma;else throw V.invalidParameterError("create.noise.sigma","number between 0 and 10000",J.create.noise.sigma)}else if(V.defined(J.create.background)){if(!V.inRange(J.create.channels,3,4))throw V.invalidParameterError("create.channels","number between 3 and 4",J.create.channels);let Q=U$(J.create.background);Z.createBackground=[Q.red(),Q.green(),Q.blue(),Math.round(Q.alpha()*255)]}else throw Error("Expected valid noise or background to create a new input image");delete Z.buffer}else throw Error("Expected valid width, height and channels to create a new input image");if(V.defined(J.text))if(V.object(J.text)&&V.string(J.text.text)){if(Z.textValue=J.text.text,V.defined(J.text.height)&&V.defined(J.text.dpi))throw Error("Expected only one of dpi or height");if(V.defined(J.text.font))if(V.string(J.text.font))Z.textFont=J.text.font;else throw V.invalidParameterError("text.font","string",J.text.font);if(V.defined(J.text.fontfile))if(V.string(J.text.fontfile))Z.textFontfile=J.text.fontfile;else throw V.invalidParameterError("text.fontfile","string",J.text.fontfile);if(V.defined(J.text.width))if(V.integer(J.text.width)&&J.text.width>0)Z.textWidth=J.text.width;else throw V.invalidParameterError("text.width","positive integer",J.text.width);if(V.defined(J.text.height))if(V.integer(J.text.height)&&J.text.height>0)Z.textHeight=J.text.height;else throw V.invalidParameterError("text.height","positive integer",J.text.height);if(V.defined(J.text.align))if(V.string(J.text.align)&&V.string(this.constructor.align[J.text.align]))Z.textAlign=this.constructor.align[J.text.align];else throw V.invalidParameterError("text.align","valid alignment",J.text.align);if(V.defined(J.text.justify))if(V.bool(J.text.justify))Z.textJustify=J.text.justify;else throw V.invalidParameterError("text.justify","boolean",J.text.justify);if(V.defined(J.text.dpi))if(V.integer(J.text.dpi)&&V.inRange(J.text.dpi,1,1e6))Z.textDpi=J.text.dpi;else throw V.invalidParameterError("text.dpi","integer between 1 and 1000000",J.text.dpi);if(V.defined(J.text.rgba))if(V.bool(J.text.rgba))Z.textRgba=J.text.rgba;else throw V.invalidParameterError("text.rgba","bool",J.text.rgba);if(V.defined(J.text.spacing))if(V.integer(J.text.spacing)&&V.inRange(J.text.spacing,-1e6,1e6))Z.textSpacing=J.text.spacing;else throw V.invalidParameterError("text.spacing","integer between -1000000 and 1000000",J.text.spacing);if(V.defined(J.text.wrap))if(V.string(J.text.wrap)&&V.inArray(J.text.wrap,["word","char","word-char","none"]))Z.textWrap=J.text.wrap;else throw V.invalidParameterError("text.wrap","one of: word, char, word-char, none",J.text.wrap);delete Z.buffer}else throw Error("Expected a valid string to create an image with text.")}else if(V.defined(J))throw Error("Invalid input options "+J);return Z}function X$(q,J,$){if(Array.isArray(this.options.input.buffer))if(V.buffer(q)){if(this.options.input.buffer.length===0)this.on("finish",()=>{this.streamInFinished=!0});this.options.input.buffer.push(q),$()}else $(Error("Non-Buffer data on Writable Stream"));else $(Error("Unexpected data on Writable Stream"))}function G$(){if(this._isStreamInput())this.options.input.buffer=Buffer.concat(this.options.input.buffer)}function N$(){return Array.isArray(this.options.input.buffer)}function W$(q){let J=Error();if(V.fn(q)){if(this._isStreamInput())this.on("finish",()=>{this._flattenBufferIn(),I0.metadata(this.options,($,Z)=>{if($)q(V.nativeError($,J));else q(null,Z)})});else I0.metadata(this.options,($,Z)=>{if($)q(V.nativeError($,J));else q(null,Z)});return this}else if(this._isStreamInput())return new Promise(($,Z)=>{let Q=()=>{this._flattenBufferIn(),I0.metadata(this.options,(K,U)=>{if(K)Z(V.nativeError(K,J));else $(U)})};if(this.writableFinished)Q();else this.once("finish",Q)});else return new Promise(($,Z)=>{I0.metadata(this.options,(Q,K)=>{if(Q)Z(V.nativeError(Q,J));else $(K)})})}function B$(q){let J=Error();if(V.fn(q)){if(this._isStreamInput())this.on("finish",()=>{this._flattenBufferIn(),I0.stats(this.options,($,Z)=>{if($)q(V.nativeError($,J));else q(null,Z)})});else I0.stats(this.options,($,Z)=>{if($)q(V.nativeError($,J));else q(null,Z)});return this}else if(this._isStreamInput())return new Promise(($,Z)=>{this.on("finish",function(){this._flattenBufferIn(),I0.stats(this.options,(Q,K)=>{if(Q)Z(V.nativeError(Q,J));else $(K)})})});else return new Promise(($,Z)=>{I0.stats(this.options,(Q,K)=>{if(Q)Z(V.nativeError(Q,J));else $(K)})})}k7.exports=function(q){Object.assign(q.prototype,{_inputOptionsFromObject:C7,_createInputDescriptor:H$,_write:X$,_flattenBufferIn:G$,_isStreamInput:N$,metadata:W$,stats:B$}),q.align=Y$}});var y7=E((iK,O7)=>{var z=Y0(),w7={center:0,centre:0,north:1,east:2,south:3,west:4,northeast:5,southeast:6,southwest:7,northwest:8},D7={top:1,right:2,bottom:3,left:4,"right top":5,"right bottom":6,"left bottom":7,"left top":8},S7={background:"background",copy:"copy",repeat:"repeat",mirror:"mirror"},P7={entropy:16,attention:17},z1={nearest:"nearest",linear:"linear",cubic:"cubic",mitchell:"mitchell",lanczos2:"lanczos2",lanczos3:"lanczos3"},V$={contain:"contain",cover:"cover",fill:"fill",inside:"inside",outside:"outside"},_$={contain:"embed",cover:"crop",fill:"ignore_aspect",inside:"max",outside:"min"};function I1(q){return q.angle%360!==0||q.useExifOrientation===!0||q.rotationAngle!==0}function P2(q){return q.width!==-1||q.height!==-1}function E$(q,J,$){if(P2(this.options))this.options.debuglog("ignoring previous resize options");if(this.options.widthPost!==-1)this.options.debuglog("operation order will be: extract, resize, extract");if(z.defined(q))if(z.object(q)&&!z.defined($))$=q;else if(z.integer(q)&&q>0)this.options.width=q;else throw z.invalidParameterError("width","positive integer",q);else this.options.width=-1;if(z.defined(J))if(z.integer(J)&&J>0)this.options.height=J;else throw z.invalidParameterError("height","positive integer",J);else this.options.height=-1;if(z.object($)){if(z.defined($.width))if(z.integer($.width)&&$.width>0)this.options.width=$.width;else throw z.invalidParameterError("width","positive integer",$.width);if(z.defined($.height))if(z.integer($.height)&&$.height>0)this.options.height=$.height;else throw z.invalidParameterError("height","positive integer",$.height);if(z.defined($.fit)){let Z=_$[$.fit];if(z.string(Z))this.options.canvas=Z;else throw z.invalidParameterError("fit","valid fit",$.fit)}if(z.defined($.position)){let Z=z.integer($.position)?$.position:P7[$.position]||D7[$.position]||w7[$.position];if(z.integer(Z)&&(z.inRange(Z,0,8)||z.inRange(Z,16,17)))this.options.position=Z;else throw z.invalidParameterError("position","valid position/gravity/strategy",$.position)}if(this._setBackgroundColourOption("resizeBackground",$.background),z.defined($.kernel))if(z.string(z1[$.kernel]))this.options.kernel=z1[$.kernel];else throw z.invalidParameterError("kernel","valid kernel name",$.kernel);if(z.defined($.withoutEnlargement))this._setBooleanOption("withoutEnlargement",$.withoutEnlargement);if(z.defined($.withoutReduction))this._setBooleanOption("withoutReduction",$.withoutReduction);if(z.defined($.fastShrinkOnLoad))this._setBooleanOption("fastShrinkOnLoad",$.fastShrinkOnLoad)}if(I1(this.options)&&P2(this.options))this.options.rotateBeforePreExtract=!0;return this}function R$(q){if(z.integer(q)&&q>0)this.options.extendTop=q,this.options.extendBottom=q,this.options.extendLeft=q,this.options.extendRight=q;else if(z.object(q)){if(z.defined(q.top))if(z.integer(q.top)&&q.top>=0)this.options.extendTop=q.top;else throw z.invalidParameterError("top","positive integer",q.top);if(z.defined(q.bottom))if(z.integer(q.bottom)&&q.bottom>=0)this.options.extendBottom=q.bottom;else throw z.invalidParameterError("bottom","positive integer",q.bottom);if(z.defined(q.left))if(z.integer(q.left)&&q.left>=0)this.options.extendLeft=q.left;else throw z.invalidParameterError("left","positive integer",q.left);if(z.defined(q.right))if(z.integer(q.right)&&q.right>=0)this.options.extendRight=q.right;else throw z.invalidParameterError("right","positive integer",q.right);if(this._setBackgroundColourOption("extendBackground",q.background),z.defined(q.extendWith))if(z.string(S7[q.extendWith]))this.options.extendWith=S7[q.extendWith];else throw z.invalidParameterError("extendWith","one of: background, copy, repeat, mirror",q.extendWith)}else throw z.invalidParameterError("extend","integer or object",q);return this}function A$(q){let J=P2(this.options)||this.options.widthPre!==-1?"Post":"Pre";if(this.options[`width${J}`]!==-1)this.options.debuglog("ignoring previous extract options");if(["left","top","width","height"].forEach(function($){let Z=q[$];if(z.integer(Z)&&Z>=0)this.options[$+($==="left"||$==="top"?"Offset":"")+J]=Z;else throw z.invalidParameterError($,"integer",Z)},this),I1(this.options)&&!P2(this.options)){if(this.options.widthPre===-1||this.options.widthPost===-1)this.options.rotateBeforePreExtract=!0}return this}function L$(q){if(this.options.trimThreshold=10,z.defined(q))if(z.object(q)){if(z.defined(q.background))this._setBackgroundColourOption("trimBackground",q.background);if(z.defined(q.threshold))if(z.number(q.threshold)&&q.threshold>=0)this.options.trimThreshold=q.threshold;else throw z.invalidParameterError("threshold","positive number",q.threshold);if(z.defined(q.lineArt))this._setBooleanOption("trimLineArt",q.lineArt)}else throw z.invalidParameterError("trim","object",q);if(I1(this.options))this.options.rotateBeforePreExtract=!0;return this}O7.exports=function(q){Object.assign(q.prototype,{resize:E$,extend:R$,extract:A$,trim:L$}),q.gravity=w7,q.strategy=P7,q.kernel=z1,q.fit=V$,q.position=D7}});var x7=E((tK,v7)=>{var D=Y0(),C1={clear:"clear",source:"source",over:"over",in:"in",out:"out",atop:"atop",dest:"dest","dest-over":"dest-over","dest-in":"dest-in","dest-out":"dest-out","dest-atop":"dest-atop",xor:"xor",add:"add",saturate:"saturate",multiply:"multiply",screen:"screen",overlay:"overlay",darken:"darken",lighten:"lighten","colour-dodge":"colour-dodge","color-dodge":"colour-dodge","colour-burn":"colour-burn","color-burn":"colour-burn","hard-light":"hard-light","soft-light":"soft-light",difference:"difference",exclusion:"exclusion"};function j$(q){if(!Array.isArray(q))throw D.invalidParameterError("images to composite","array",q);return this.options.composite=q.map((J)=>{if(!D.object(J))throw D.invalidParameterError("image to composite","object",J);let $=this._inputOptionsFromObject(J),Z={input:this._createInputDescriptor(J.input,$,{allowStream:!1}),blend:"over",tile:!1,left:0,top:0,hasOffset:!1,gravity:0,premultiplied:!1};if(D.defined(J.blend))if(D.string(C1[J.blend]))Z.blend=C1[J.blend];else throw D.invalidParameterError("blend","valid blend name",J.blend);if(D.defined(J.tile))if(D.bool(J.tile))Z.tile=J.tile;else throw D.invalidParameterError("tile","boolean",J.tile);if(D.defined(J.left))if(D.integer(J.left))Z.left=J.left;else throw D.invalidParameterError("left","integer",J.left);if(D.defined(J.top))if(D.integer(J.top))Z.top=J.top;else throw D.invalidParameterError("top","integer",J.top);if(D.defined(J.top)!==D.defined(J.left))throw Error("Expected both left and top to be set");else Z.hasOffset=D.integer(J.top)&&D.integer(J.left);if(D.defined(J.gravity))if(D.integer(J.gravity)&&D.inRange(J.gravity,0,8))Z.gravity=J.gravity;else if(D.string(J.gravity)&&D.integer(this.constructor.gravity[J.gravity]))Z.gravity=this.constructor.gravity[J.gravity];else throw D.invalidParameterError("gravity","valid gravity",J.gravity);if(D.defined(J.premultiplied))if(D.bool(J.premultiplied))Z.premultiplied=J.premultiplied;else throw D.invalidParameterError("premultiplied","boolean",J.premultiplied);return Z}),this}v7.exports=function(q){q.prototype.composite=j$,q.blend=C1}});var f7=E((oK,h7)=>{var T$=D2(),N=Y0(),b7={integer:"integer",float:"float",approximate:"approximate"};function F$(q,J){if(this.options.useExifOrientation||this.options.angle||this.options.rotationAngle)this.options.debuglog("ignoring previous rotate options");if(!N.defined(q))this.options.useExifOrientation=!0;else if(N.integer(q)&&!(q%90))this.options.angle=q;else if(N.number(q)){if(this.options.rotationAngle=q,N.object(J)&&J.background){let $=T$(J.background);this.options.rotationBackground=[$.red(),$.green(),$.blue(),Math.round($.alpha()*255)]}}else throw N.invalidParameterError("angle","numeric",q);return this}function z$(q){return this.options.flip=N.bool(q)?q:!0,this}function I$(q){return this.options.flop=N.bool(q)?q:!0,this}function C$(q,J){let $=[].concat(...q);if($.length===4&&$.every(N.number))this.options.affineMatrix=$;else throw N.invalidParameterError("matrix","1x4 or 2x2 array",q);if(N.defined(J))if(N.object(J)){if(this._setBackgroundColourOption("affineBackground",J.background),N.defined(J.idx))if(N.number(J.idx))this.options.affineIdx=J.idx;else throw N.invalidParameterError("options.idx","number",J.idx);if(N.defined(J.idy))if(N.number(J.idy))this.options.affineIdy=J.idy;else throw N.invalidParameterError("options.idy","number",J.idy);if(N.defined(J.odx))if(N.number(J.odx))this.options.affineOdx=J.odx;else throw N.invalidParameterError("options.odx","number",J.odx);if(N.defined(J.ody))if(N.number(J.ody))this.options.affineOdy=J.ody;else throw N.invalidParameterError("options.ody","number",J.ody);if(N.defined(J.interpolator))if(N.inArray(J.interpolator,Object.values(this.constructor.interpolators)))this.options.affineInterpolator=J.interpolator;else throw N.invalidParameterError("options.interpolator","valid interpolator name",J.interpolator)}else throw N.invalidParameterError("options","object",J);return this}function k$(q,J,$){if(!N.defined(q))this.options.sharpenSigma=-1;else if(N.bool(q))this.options.sharpenSigma=q?-1:0;else if(N.number(q)&&N.inRange(q,0.01,1e4)){if(this.options.sharpenSigma=q,N.defined(J))if(N.number(J)&&N.inRange(J,0,1e4))this.options.sharpenM1=J;else throw N.invalidParameterError("flat","number between 0 and 10000",J);if(N.defined($))if(N.number($)&&N.inRange($,0,1e4))this.options.sharpenM2=$;else throw N.invalidParameterError("jagged","number between 0 and 10000",$)}else if(N.plainObject(q)){if(N.number(q.sigma)&&N.inRange(q.sigma,0.000001,10))this.options.sharpenSigma=q.sigma;else throw N.invalidParameterError("options.sigma","number between 0.000001 and 10",q.sigma);if(N.defined(q.m1))if(N.number(q.m1)&&N.inRange(q.m1,0,1e6))this.options.sharpenM1=q.m1;else throw N.invalidParameterError("options.m1","number between 0 and 1000000",q.m1);if(N.defined(q.m2))if(N.number(q.m2)&&N.inRange(q.m2,0,1e6))this.options.sharpenM2=q.m2;else throw N.invalidParameterError("options.m2","number between 0 and 1000000",q.m2);if(N.defined(q.x1))if(N.number(q.x1)&&N.inRange(q.x1,0,1e6))this.options.sharpenX1=q.x1;else throw N.invalidParameterError("options.x1","number between 0 and 1000000",q.x1);if(N.defined(q.y2))if(N.number(q.y2)&&N.inRange(q.y2,0,1e6))this.options.sharpenY2=q.y2;else throw N.invalidParameterError("options.y2","number between 0 and 1000000",q.y2);if(N.defined(q.y3))if(N.number(q.y3)&&N.inRange(q.y3,0,1e6))this.options.sharpenY3=q.y3;else throw N.invalidParameterError("options.y3","number between 0 and 1000000",q.y3)}else throw N.invalidParameterError("sigma","number between 0.01 and 10000",q);return this}function M$(q){if(!N.defined(q))this.options.medianSize=3;else if(N.integer(q)&&N.inRange(q,1,1000))this.options.medianSize=q;else throw N.invalidParameterError("size","integer between 1 and 1000",q);return this}function S$(q){let J;if(N.number(q))J=q;else if(N.plainObject(q)){if(!N.number(q.sigma))throw N.invalidParameterError("options.sigma","number between 0.3 and 1000",J);if(J=q.sigma,"precision"in q)if(N.string(b7[q.precision]))this.options.precision=b7[q.precision];else throw N.invalidParameterError("precision","one of: integer, float, approximate",q.precision);if("minAmplitude"in q)if(N.number(q.minAmplitude)&&N.inRange(q.minAmplitude,0.001,1))this.options.minAmpl=q.minAmplitude;else throw N.invalidParameterError("minAmplitude","number between 0.001 and 1",q.minAmplitude)}if(!N.defined(q))this.options.blurSigma=-1;else if(N.bool(q))this.options.blurSigma=q?-1:0;else if(N.number(J)&&N.inRange(J,0.3,1000))this.options.blurSigma=J;else throw N.invalidParameterError("sigma","number between 0.3 and 1000",J);return this}function w$(q){if(this.options.flatten=N.bool(q)?q:!0,N.object(q))this._setBackgroundColourOption("flattenBackground",q.background);return this}function D$(){return this.options.unflatten=!0,this}function P$(q,J){if(!N.defined(q))this.options.gamma=2.2;else if(N.number(q)&&N.inRange(q,1,3))this.options.gamma=q;else throw N.invalidParameterError("gamma","number between 1.0 and 3.0",q);if(!N.defined(J))this.options.gammaOut=this.options.gamma;else if(N.number(J)&&N.inRange(J,1,3))this.options.gammaOut=J;else throw N.invalidParameterError("gammaOut","number between 1.0 and 3.0",J);return this}function O$(q){if(this.options.negate=N.bool(q)?q:!0,N.plainObject(q)&&"alpha"in q)if(!N.bool(q.alpha))throw N.invalidParameterError("alpha","should be boolean value",q.alpha);else this.options.negateAlpha=q.alpha;return this}function y$(q){if(N.plainObject(q)){if(N.defined(q.lower))if(N.number(q.lower)&&N.inRange(q.lower,0,99))this.options.normaliseLower=q.lower;else throw N.invalidParameterError("lower","number between 0 and 99",q.lower);if(N.defined(q.upper))if(N.number(q.upper)&&N.inRange(q.upper,1,100))this.options.normaliseUpper=q.upper;else throw N.invalidParameterError("upper","number between 1 and 100",q.upper)}if(this.options.normaliseLower>=this.options.normaliseUpper)throw N.invalidParameterError("range","lower to be less than upper",`${this.options.normaliseLower} >= ${this.options.normaliseUpper}`);return this.options.normalise=!0,this}function v$(q){return this.normalise(q)}function x$(q){if(N.plainObject(q)){if(N.integer(q.width)&&q.width>0)this.options.claheWidth=q.width;else throw N.invalidParameterError("width","integer greater than zero",q.width);if(N.integer(q.height)&&q.height>0)this.options.claheHeight=q.height;else throw N.invalidParameterError("height","integer greater than zero",q.height);if(N.defined(q.maxSlope))if(N.integer(q.maxSlope)&&N.inRange(q.maxSlope,0,100))this.options.claheMaxSlope=q.maxSlope;else throw N.invalidParameterError("maxSlope","integer between 0 and 100",q.maxSlope)}else throw N.invalidParameterError("options","plain object",q);return this}function b$(q){if(!N.object(q)||!Array.isArray(q.kernel)||!N.integer(q.width)||!N.integer(q.height)||!N.inRange(q.width,3,1001)||!N.inRange(q.height,3,1001)||q.height*q.width!==q.kernel.length)throw Error("Invalid convolution kernel");if(!N.integer(q.scale))q.scale=q.kernel.reduce(function(J,$){return J+$},0);if(q.scale<1)q.scale=1;if(!N.integer(q.offset))q.offset=0;return this.options.convKernel=q,this}function h$(q,J){if(!N.defined(q))this.options.threshold=128;else if(N.bool(q))this.options.threshold=q?128:0;else if(N.integer(q)&&N.inRange(q,0,255))this.options.threshold=q;else throw N.invalidParameterError("threshold","integer between 0 and 255",q);if(!N.object(J)||J.greyscale===!0||J.grayscale===!0)this.options.thresholdGrayscale=!0;else this.options.thresholdGrayscale=!1;return this}function f$(q,J,$){if(this.options.boolean=this._createInputDescriptor(q,$),N.string(J)&&N.inArray(J,["and","or","eor"]))this.options.booleanOp=J;else throw N.invalidParameterError("operator","one of: and, or, eor",J);return this}function g$(q,J){if(!N.defined(q)&&N.number(J))q=1;else if(N.number(q)&&!N.defined(J))J=0;if(!N.defined(q))this.options.linearA=[];else if(N.number(q))this.options.linearA=[q];else if(Array.isArray(q)&&q.length&&q.every(N.number))this.options.linearA=q;else throw N.invalidParameterError("a","number or array of numbers",q);if(!N.defined(J))this.options.linearB=[];else if(N.number(J))this.options.linearB=[J];else if(Array.isArray(J)&&J.length&&J.every(N.number))this.options.linearB=J;else throw N.invalidParameterError("b","number or array of numbers",J);if(this.options.linearA.length!==this.options.linearB.length)throw Error("Expected a and b to be arrays of the same length");return this}function d$(q){if(!Array.isArray(q))throw N.invalidParameterError("inputMatrix","array",q);if(q.length!==3&&q.length!==4)throw N.invalidParameterError("inputMatrix","3x3 or 4x4 array",q.length);let J=q.flat().map(Number);if(J.length!==9&&J.length!==16)throw N.invalidParameterError("inputMatrix","cardinality of 9 or 16",J.length);return this.options.recombMatrix=J,this}function u$(q){if(!N.plainObject(q))throw N.invalidParameterError("options","plain object",q);if("brightness"in q)if(N.number(q.brightness)&&q.brightness>=0)this.options.brightness=q.brightness;else throw N.invalidParameterError("brightness","number above zero",q.brightness);if("saturation"in q)if(N.number(q.saturation)&&q.saturation>=0)this.options.saturation=q.saturation;else throw N.invalidParameterError("saturation","number above zero",q.saturation);if("hue"in q)if(N.integer(q.hue))this.options.hue=q.hue%360;else throw N.invalidParameterError("hue","number",q.hue);if("lightness"in q)if(N.number(q.lightness))this.options.lightness=q.lightness;else throw N.invalidParameterError("lightness","number",q.lightness);return this}h7.exports=function(q){Object.assign(q.prototype,{rotate:F$,flip:z$,flop:I$,affine:C$,sharpen:k$,median:M$,blur:S$,flatten:w$,unflatten:D$,gamma:P$,negate:O$,normalise:y$,normalize:v$,clahe:x$,convolve:b$,threshold:h$,boolean:f$,linear:g$,recomb:d$,modulate:u$})}});var u7=E((qU,d7)=>{var m$=D2(),V0=Y0(),g7={multiband:"multiband","b-w":"b-w",bw:"b-w",cmyk:"cmyk",srgb:"srgb"};function l$(q){return this._setBackgroundColourOption("tint",q),this}function c$(q){return this.options.greyscale=V0.bool(q)?q:!0,this}function r$(q){return this.greyscale(q)}function a$(q){if(!V0.string(q))throw V0.invalidParameterError("colourspace","string",q);return this.options.colourspacePipeline=q,this}function p$(q){return this.pipelineColourspace(q)}function n$(q){if(!V0.string(q))throw V0.invalidParameterError("colourspace","string",q);return this.options.colourspace=q,this}function e$(q){return this.toColourspace(q)}function s$(q,J){if(V0.defined(J))if(V0.object(J)||V0.string(J)){let $=m$(J);this.options[q]=[$.red(),$.green(),$.blue(),Math.round($.alpha()*255)]}else throw V0.invalidParameterError("background","object or string",J)}d7.exports=function(q){Object.assign(q.prototype,{tint:l$,greyscale:c$,grayscale:r$,pipelineColourspace:a$,pipelineColorspace:p$,toColourspace:n$,toColorspace:e$,_setBackgroundColourOption:s$}),q.colourspace=g7,q.colorspace=g7}});var l7=E((JU,m7)=>{var W0=Y0(),i$={and:"and",or:"or",eor:"eor"};function t$(){return this.options.removeAlpha=!0,this}function o$(q){if(W0.defined(q))if(W0.number(q)&&W0.inRange(q,0,1))this.options.ensureAlpha=q;else throw W0.invalidParameterError("alpha","number between 0 and 1",q);else this.options.ensureAlpha=1;return this}function qZ(q){let J={red:0,green:1,blue:2,alpha:3};if(Object.keys(J).includes(q))q=J[q];if(W0.integer(q)&&W0.inRange(q,0,4))this.options.extractChannel=q;else throw W0.invalidParameterError("channel","integer or one of: red, green, blue, alpha",q);return this}function JZ(q,J){if(Array.isArray(q))q.forEach(function($){this.options.joinChannelIn.push(this._createInputDescriptor($,J))},this);else this.options.joinChannelIn.push(this._createInputDescriptor(q,J));return this}function $Z(q){if(W0.string(q)&&W0.inArray(q,["and","or","eor"]))this.options.bandBoolOp=q;else throw W0.invalidParameterError("boolOp","one of: and, or, eor",q);return this}m7.exports=function(q){Object.assign(q.prototype,{removeAlpha:t$,ensureAlpha:o$,extractChannel:qZ,joinChannel:JZ,bandbool:$Z}),q.bool=i$}});var e7=E(($U,n7)=>{var k1=M("path"),H=Y0(),c0=q2(),c7=new Map([["heic","heif"],["heif","heif"],["avif","avif"],["jpeg","jpeg"],["jpg","jpeg"],["jpe","jpeg"],["tile","tile"],["dz","tile"],["png","png"],["raw","raw"],["tiff","tiff"],["tif","tiff"],["webp","webp"],["gif","gif"],["jp2","jp2"],["jpx","jp2"],["j2k","jp2"],["j2c","jp2"],["jxl","jxl"]]),ZZ=/\.(jp[2x]|j2[kc])$/i,r7=()=>Error("JP2 output requires libvips with support for OpenJPEG"),a7=(q)=>1<<31-Math.clz32(Math.ceil(Math.log2(q)));function QZ(q,J){let $;if(!H.string(q))$=Error("Missing output file path");else if(H.string(this.options.input.file)&&k1.resolve(this.options.input.file)===k1.resolve(q))$=Error("Cannot use same file for input and output");else if(ZZ.test(k1.extname(q))&&!this.constructor.format.jp2k.output.file)$=r7();if($)if(H.fn(J))J($);else return Promise.reject($);else{this.options.fileOut=q;let Z=Error();return this._pipeline(J,Z)}return this}function KZ(q,J){if(H.object(q))this._setBooleanOption("resolveWithObject",q.resolveWithObject);else if(this.options.resolveWithObject)this.options.resolveWithObject=!1;this.options.fileOut="";let $=Error();return this._pipeline(H.fn(q)?q:J,$)}function UZ(){return this.options.keepMetadata|=1,this}function YZ(q){if(H.object(q))for(let[J,$]of Object.entries(q))if(H.object($))for(let[Z,Q]of Object.entries($))if(H.string(Q))this.options.withExif[`exif-${J.toLowerCase()}-${Z}`]=Q;else throw H.invalidParameterError(`${J}.${Z}`,"string",Q);else throw H.invalidParameterError(J,"object",$);else throw H.invalidParameterError("exif","object",q);return this.options.withExifMerge=!1,this.keepExif()}function HZ(q){return this.withExif(q),this.options.withExifMerge=!0,this}function XZ(){return this.options.keepMetadata|=8,this}function GZ(q,J){if(H.string(q))this.options.withIccProfile=q;else throw H.invalidParameterError("icc","string",q);if(this.keepIccProfile(),H.object(J)){if(H.defined(J.attach))if(H.bool(J.attach)){if(!J.attach)this.options.keepMetadata&=-9}else throw H.invalidParameterError("attach","boolean",J.attach)}return this}function NZ(){return this.options.keepMetadata=31,this}function WZ(q){if(this.keepMetadata(),this.withIccProfile("srgb"),H.object(q)){if(H.defined(q.orientation))if(H.integer(q.orientation)&&H.inRange(q.orientation,1,8))this.options.withMetadataOrientation=q.orientation;else throw H.invalidParameterError("orientation","integer between 1 and 8",q.orientation);if(H.defined(q.density))if(H.number(q.density)&&q.density>0)this.options.withMetadataDensity=q.density;else throw H.invalidParameterError("density","positive number",q.density);if(H.defined(q.icc))this.withIccProfile(q.icc);if(H.defined(q.exif))this.withExifMerge(q.exif)}return this}function BZ(q,J){let $=c7.get((H.object(q)&&H.string(q.id)?q.id:q).toLowerCase());if(!$)throw H.invalidParameterError("format",`one of: ${[...c7.keys()].join(", ")}`,q);return this[$](J)}function VZ(q){if(H.object(q)){if(H.defined(q.quality))if(H.integer(q.quality)&&H.inRange(q.quality,1,100))this.options.jpegQuality=q.quality;else throw H.invalidParameterError("quality","integer between 1 and 100",q.quality);if(H.defined(q.progressive))this._setBooleanOption("jpegProgressive",q.progressive);if(H.defined(q.chromaSubsampling))if(H.string(q.chromaSubsampling)&&H.inArray(q.chromaSubsampling,["4:2:0","4:4:4"]))this.options.jpegChromaSubsampling=q.chromaSubsampling;else throw H.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",q.chromaSubsampling);let J=H.bool(q.optimizeCoding)?q.optimizeCoding:q.optimiseCoding;if(H.defined(J))this._setBooleanOption("jpegOptimiseCoding",J);if(H.defined(q.mozjpeg))if(H.bool(q.mozjpeg)){if(q.mozjpeg)this.options.jpegTrellisQuantisation=!0,this.options.jpegOvershootDeringing=!0,this.options.jpegOptimiseScans=!0,this.options.jpegProgressive=!0,this.options.jpegQuantisationTable=3}else throw H.invalidParameterError("mozjpeg","boolean",q.mozjpeg);let $=H.bool(q.trellisQuantization)?q.trellisQuantization:q.trellisQuantisation;if(H.defined($))this._setBooleanOption("jpegTrellisQuantisation",$);if(H.defined(q.overshootDeringing))this._setBooleanOption("jpegOvershootDeringing",q.overshootDeringing);let Z=H.bool(q.optimizeScans)?q.optimizeScans:q.optimiseScans;if(H.defined(Z)){if(this._setBooleanOption("jpegOptimiseScans",Z),Z)this.options.jpegProgressive=!0}let Q=H.number(q.quantizationTable)?q.quantizationTable:q.quantisationTable;if(H.defined(Q))if(H.integer(Q)&&H.inRange(Q,0,8))this.options.jpegQuantisationTable=Q;else throw H.invalidParameterError("quantisationTable","integer between 0 and 8",Q)}return this._updateFormatOut("jpeg",q)}function _Z(q){if(H.object(q)){if(H.defined(q.progressive))this._setBooleanOption("pngProgressive",q.progressive);if(H.defined(q.compressionLevel))if(H.integer(q.compressionLevel)&&H.inRange(q.compressionLevel,0,9))this.options.pngCompressionLevel=q.compressionLevel;else throw H.invalidParameterError("compressionLevel","integer between 0 and 9",q.compressionLevel);if(H.defined(q.adaptiveFiltering))this._setBooleanOption("pngAdaptiveFiltering",q.adaptiveFiltering);let J=q.colours||q.colors;if(H.defined(J))if(H.integer(J)&&H.inRange(J,2,256))this.options.pngBitdepth=a7(J);else throw H.invalidParameterError("colours","integer between 2 and 256",J);if(H.defined(q.palette))this._setBooleanOption("pngPalette",q.palette);else if([q.quality,q.effort,q.colours,q.colors,q.dither].some(H.defined))this._setBooleanOption("pngPalette",!0);if(this.options.pngPalette){if(H.defined(q.quality))if(H.integer(q.quality)&&H.inRange(q.quality,0,100))this.options.pngQuality=q.quality;else throw H.invalidParameterError("quality","integer between 0 and 100",q.quality);if(H.defined(q.effort))if(H.integer(q.effort)&&H.inRange(q.effort,1,10))this.options.pngEffort=q.effort;else throw H.invalidParameterError("effort","integer between 1 and 10",q.effort);if(H.defined(q.dither))if(H.number(q.dither)&&H.inRange(q.dither,0,1))this.options.pngDither=q.dither;else throw H.invalidParameterError("dither","number between 0.0 and 1.0",q.dither)}}return this._updateFormatOut("png",q)}function EZ(q){if(H.object(q)){if(H.defined(q.quality))if(H.integer(q.quality)&&H.inRange(q.quality,1,100))this.options.webpQuality=q.quality;else throw H.invalidParameterError("quality","integer between 1 and 100",q.quality);if(H.defined(q.alphaQuality))if(H.integer(q.alphaQuality)&&H.inRange(q.alphaQuality,0,100))this.options.webpAlphaQuality=q.alphaQuality;else throw H.invalidParameterError("alphaQuality","integer between 0 and 100",q.alphaQuality);if(H.defined(q.lossless))this._setBooleanOption("webpLossless",q.lossless);if(H.defined(q.nearLossless))this._setBooleanOption("webpNearLossless",q.nearLossless);if(H.defined(q.smartSubsample))this._setBooleanOption("webpSmartSubsample",q.smartSubsample);if(H.defined(q.preset))if(H.string(q.preset)&&H.inArray(q.preset,["default","photo","picture","drawing","icon","text"]))this.options.webpPreset=q.preset;else throw H.invalidParameterError("preset","one of: default, photo, picture, drawing, icon, text",q.preset);if(H.defined(q.effort))if(H.integer(q.effort)&&H.inRange(q.effort,0,6))this.options.webpEffort=q.effort;else throw H.invalidParameterError("effort","integer between 0 and 6",q.effort);if(H.defined(q.minSize))this._setBooleanOption("webpMinSize",q.minSize);if(H.defined(q.mixed))this._setBooleanOption("webpMixed",q.mixed)}return p7(q,this.options),this._updateFormatOut("webp",q)}function RZ(q){if(H.object(q)){if(H.defined(q.reuse))this._setBooleanOption("gifReuse",q.reuse);if(H.defined(q.progressive))this._setBooleanOption("gifProgressive",q.progressive);let J=q.colours||q.colors;if(H.defined(J))if(H.integer(J)&&H.inRange(J,2,256))this.options.gifBitdepth=a7(J);else throw H.invalidParameterError("colours","integer between 2 and 256",J);if(H.defined(q.effort))if(H.number(q.effort)&&H.inRange(q.effort,1,10))this.options.gifEffort=q.effort;else throw H.invalidParameterError("effort","integer between 1 and 10",q.effort);if(H.defined(q.dither))if(H.number(q.dither)&&H.inRange(q.dither,0,1))this.options.gifDither=q.dither;else throw H.invalidParameterError("dither","number between 0.0 and 1.0",q.dither);if(H.defined(q.interFrameMaxError))if(H.number(q.interFrameMaxError)&&H.inRange(q.interFrameMaxError,0,32))this.options.gifInterFrameMaxError=q.interFrameMaxError;else throw H.invalidParameterError("interFrameMaxError","number between 0.0 and 32.0",q.interFrameMaxError);if(H.defined(q.interPaletteMaxError))if(H.number(q.interPaletteMaxError)&&H.inRange(q.interPaletteMaxError,0,256))this.options.gifInterPaletteMaxError=q.interPaletteMaxError;else throw H.invalidParameterError("interPaletteMaxError","number between 0.0 and 256.0",q.interPaletteMaxError)}return p7(q,this.options),this._updateFormatOut("gif",q)}function AZ(q){if(!this.constructor.format.jp2k.output.buffer)throw r7();if(H.object(q)){if(H.defined(q.quality))if(H.integer(q.quality)&&H.inRange(q.quality,1,100))this.options.jp2Quality=q.quality;else throw H.invalidParameterError("quality","integer between 1 and 100",q.quality);if(H.defined(q.lossless))if(H.bool(q.lossless))this.options.jp2Lossless=q.lossless;else throw H.invalidParameterError("lossless","boolean",q.lossless);if(H.defined(q.tileWidth))if(H.integer(q.tileWidth)&&H.inRange(q.tileWidth,1,32768))this.options.jp2TileWidth=q.tileWidth;else throw H.invalidParameterError("tileWidth","integer between 1 and 32768",q.tileWidth);if(H.defined(q.tileHeight))if(H.integer(q.tileHeight)&&H.inRange(q.tileHeight,1,32768))this.options.jp2TileHeight=q.tileHeight;else throw H.invalidParameterError("tileHeight","integer between 1 and 32768",q.tileHeight);if(H.defined(q.chromaSubsampling))if(H.string(q.chromaSubsampling)&&H.inArray(q.chromaSubsampling,["4:2:0","4:4:4"]))this.options.jp2ChromaSubsampling=q.chromaSubsampling;else throw H.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",q.chromaSubsampling)}return this._updateFormatOut("jp2",q)}function p7(q,J){if(H.object(q)&&H.defined(q.loop))if(H.integer(q.loop)&&H.inRange(q.loop,0,65535))J.loop=q.loop;else throw H.invalidParameterError("loop","integer between 0 and 65535",q.loop);if(H.object(q)&&H.defined(q.delay))if(H.integer(q.delay)&&H.inRange(q.delay,0,65535))J.delay=[q.delay];else if(Array.isArray(q.delay)&&q.delay.every(H.integer)&&q.delay.every(($)=>H.inRange($,0,65535)))J.delay=q.delay;else throw H.invalidParameterError("delay","integer or an array of integers between 0 and 65535",q.delay)}function LZ(q){if(H.object(q)){if(H.defined(q.quality))if(H.integer(q.quality)&&H.inRange(q.quality,1,100))this.options.tiffQuality=q.quality;else throw H.invalidParameterError("quality","integer between 1 and 100",q.quality);if(H.defined(q.bitdepth))if(H.integer(q.bitdepth)&&H.inArray(q.bitdepth,[1,2,4,8]))this.options.tiffBitdepth=q.bitdepth;else throw H.invalidParameterError("bitdepth","1, 2, 4 or 8",q.bitdepth);if(H.defined(q.tile))this._setBooleanOption("tiffTile",q.tile);if(H.defined(q.tileWidth))if(H.integer(q.tileWidth)&&q.tileWidth>0)this.options.tiffTileWidth=q.tileWidth;else throw H.invalidParameterError("tileWidth","integer greater than zero",q.tileWidth);if(H.defined(q.tileHeight))if(H.integer(q.tileHeight)&&q.tileHeight>0)this.options.tiffTileHeight=q.tileHeight;else throw H.invalidParameterError("tileHeight","integer greater than zero",q.tileHeight);if(H.defined(q.miniswhite))this._setBooleanOption("tiffMiniswhite",q.miniswhite);if(H.defined(q.pyramid))this._setBooleanOption("tiffPyramid",q.pyramid);if(H.defined(q.xres))if(H.number(q.xres)&&q.xres>0)this.options.tiffXres=q.xres;else throw H.invalidParameterError("xres","number greater than zero",q.xres);if(H.defined(q.yres))if(H.number(q.yres)&&q.yres>0)this.options.tiffYres=q.yres;else throw H.invalidParameterError("yres","number greater than zero",q.yres);if(H.defined(q.compression))if(H.string(q.compression)&&H.inArray(q.compression,["none","jpeg","deflate","packbits","ccittfax4","lzw","webp","zstd","jp2k"]))this.options.tiffCompression=q.compression;else throw H.invalidParameterError("compression","one of: none, jpeg, deflate, packbits, ccittfax4, lzw, webp, zstd, jp2k",q.compression);if(H.defined(q.predictor))if(H.string(q.predictor)&&H.inArray(q.predictor,["none","horizontal","float"]))this.options.tiffPredictor=q.predictor;else throw H.invalidParameterError("predictor","one of: none, horizontal, float",q.predictor);if(H.defined(q.resolutionUnit))if(H.string(q.resolutionUnit)&&H.inArray(q.resolutionUnit,["inch","cm"]))this.options.tiffResolutionUnit=q.resolutionUnit;else throw H.invalidParameterError("resolutionUnit","one of: inch, cm",q.resolutionUnit)}return this._updateFormatOut("tiff",q)}function jZ(q){return this.heif({...q,compression:"av1"})}function TZ(q){if(H.object(q)){if(H.string(q.compression)&&H.inArray(q.compression,["av1","hevc"]))this.options.heifCompression=q.compression;else throw H.invalidParameterError("compression","one of: av1, hevc",q.compression);if(H.defined(q.quality))if(H.integer(q.quality)&&H.inRange(q.quality,1,100))this.options.heifQuality=q.quality;else throw H.invalidParameterError("quality","integer between 1 and 100",q.quality);if(H.defined(q.lossless))if(H.bool(q.lossless))this.options.heifLossless=q.lossless;else throw H.invalidParameterError("lossless","boolean",q.lossless);if(H.defined(q.effort))if(H.integer(q.effort)&&H.inRange(q.effort,0,9))this.options.heifEffort=q.effort;else throw H.invalidParameterError("effort","integer between 0 and 9",q.effort);if(H.defined(q.chromaSubsampling))if(H.string(q.chromaSubsampling)&&H.inArray(q.chromaSubsampling,["4:2:0","4:4:4"]))this.options.heifChromaSubsampling=q.chromaSubsampling;else throw H.invalidParameterError("chromaSubsampling","one of: 4:2:0, 4:4:4",q.chromaSubsampling);if(H.defined(q.bitdepth))if(H.integer(q.bitdepth)&&H.inArray(q.bitdepth,[8,10,12])){if(q.bitdepth!==8&&this.constructor.versions.heif)throw H.invalidParameterError("bitdepth when using prebuilt binaries",8,q.bitdepth);this.options.heifBitdepth=q.bitdepth}else throw H.invalidParameterError("bitdepth","8, 10 or 12",q.bitdepth)}else throw H.invalidParameterError("options","Object",q);return this._updateFormatOut("heif",q)}function FZ(q){if(H.object(q)){if(H.defined(q.quality))if(H.integer(q.quality)&&H.inRange(q.quality,1,100))this.options.jxlDistance=q.quality>=30?0.1+(100-q.quality)*0.09:0.017666666666666667*q.quality*q.quality-1.15*q.quality+25;else throw H.invalidParameterError("quality","integer between 1 and 100",q.quality);else if(H.defined(q.distance))if(H.number(q.distance)&&H.inRange(q.distance,0,15))this.options.jxlDistance=q.distance;else throw H.invalidParameterError("distance","number between 0.0 and 15.0",q.distance);if(H.defined(q.decodingTier))if(H.integer(q.decodingTier)&&H.inRange(q.decodingTier,0,4))this.options.jxlDecodingTier=q.decodingTier;else throw H.invalidParameterError("decodingTier","integer between 0 and 4",q.decodingTier);if(H.defined(q.lossless))if(H.bool(q.lossless))this.options.jxlLossless=q.lossless;else throw H.invalidParameterError("lossless","boolean",q.lossless);if(H.defined(q.effort))if(H.integer(q.effort)&&H.inRange(q.effort,3,9))this.options.jxlEffort=q.effort;else throw H.invalidParameterError("effort","integer between 3 and 9",q.effort)}return this._updateFormatOut("jxl",q)}function zZ(q){if(H.object(q)){if(H.defined(q.depth))if(H.string(q.depth)&&H.inArray(q.depth,["char","uchar","short","ushort","int","uint","float","complex","double","dpcomplex"]))this.options.rawDepth=q.depth;else throw H.invalidParameterError("depth","one of: char, uchar, short, ushort, int, uint, float, complex, double, dpcomplex",q.depth)}return this._updateFormatOut("raw")}function IZ(q){if(H.object(q)){if(H.defined(q.size))if(H.integer(q.size)&&H.inRange(q.size,1,8192))this.options.tileSize=q.size;else throw H.invalidParameterError("size","integer between 1 and 8192",q.size);if(H.defined(q.overlap))if(H.integer(q.overlap)&&H.inRange(q.overlap,0,8192)){if(q.overlap>this.options.tileSize)throw H.invalidParameterError("overlap",`<= size (${this.options.tileSize})`,q.overlap);this.options.tileOverlap=q.overlap}else throw H.invalidParameterError("overlap","integer between 0 and 8192",q.overlap);if(H.defined(q.container))if(H.string(q.container)&&H.inArray(q.container,["fs","zip"]))this.options.tileContainer=q.container;else throw H.invalidParameterError("container","one of: fs, zip",q.container);if(H.defined(q.layout))if(H.string(q.layout)&&H.inArray(q.layout,["dz","google","iiif","iiif3","zoomify"]))this.options.tileLayout=q.layout;else throw H.invalidParameterError("layout","one of: dz, google, iiif, iiif3, zoomify",q.layout);if(H.defined(q.angle))if(H.integer(q.angle)&&!(q.angle%90))this.options.tileAngle=q.angle;else throw H.invalidParameterError("angle","positive/negative multiple of 90",q.angle);if(this._setBackgroundColourOption("tileBackground",q.background),H.defined(q.depth))if(H.string(q.depth)&&H.inArray(q.depth,["onepixel","onetile","one"]))this.options.tileDepth=q.depth;else throw H.invalidParameterError("depth","one of: onepixel, onetile, one",q.depth);if(H.defined(q.skipBlanks))if(H.integer(q.skipBlanks)&&H.inRange(q.skipBlanks,-1,65535))this.options.tileSkipBlanks=q.skipBlanks;else throw H.invalidParameterError("skipBlanks","integer between -1 and 255/65535",q.skipBlanks);else if(H.defined(q.layout)&&q.layout==="google")this.options.tileSkipBlanks=5;let J=H.bool(q.center)?q.center:q.centre;if(H.defined(J))this._setBooleanOption("tileCentre",J);if(H.defined(q.id))if(H.string(q.id))this.options.tileId=q.id;else throw H.invalidParameterError("id","string",q.id);if(H.defined(q.basename))if(H.string(q.basename))this.options.tileBasename=q.basename;else throw H.invalidParameterError("basename","string",q.basename)}if(H.inArray(this.options.formatOut,["jpeg","png","webp"]))this.options.tileFormat=this.options.formatOut;else if(this.options.formatOut!=="input")throw H.invalidParameterError("format","one of: jpeg, png, webp",this.options.formatOut);return this._updateFormatOut("dz")}function CZ(q){if(!H.plainObject(q))throw H.invalidParameterError("options","object",q);if(H.integer(q.seconds)&&H.inRange(q.seconds,0,3600))this.options.timeoutSeconds=q.seconds;else throw H.invalidParameterError("seconds","integer between 0 and 3600",q.seconds);return this}function kZ(q,J){if(!(H.object(J)&&J.force===!1))this.options.formatOut=q;return this}function MZ(q,J){if(H.bool(J))this.options[q]=J;else throw H.invalidParameterError(q,"boolean",J)}function SZ(){if(!this.options.streamOut){this.options.streamOut=!0;let q=Error();this._pipeline(void 0,q)}}function wZ(q,J){if(typeof q==="function"){if(this._isStreamInput())this.on("finish",()=>{this._flattenBufferIn(),c0.pipeline(this.options,($,Z,Q)=>{if($)q(H.nativeError($,J));else q(null,Z,Q)})});else c0.pipeline(this.options,($,Z,Q)=>{if($)q(H.nativeError($,J));else q(null,Z,Q)});return this}else if(this.options.streamOut){if(this._isStreamInput()){if(this.once("finish",()=>{this._flattenBufferIn(),c0.pipeline(this.options,($,Z,Q)=>{if($)this.emit("error",H.nativeError($,J));else this.emit("info",Q),this.push(Z);this.push(null),this.on("end",()=>this.emit("close"))})}),this.streamInFinished)this.emit("finish")}else c0.pipeline(this.options,($,Z,Q)=>{if($)this.emit("error",H.nativeError($,J));else this.emit("info",Q),this.push(Z);this.push(null),this.on("end",()=>this.emit("close"))});return this}else if(this._isStreamInput())return new Promise(($,Z)=>{this.once("finish",()=>{this._flattenBufferIn(),c0.pipeline(this.options,(Q,K,U)=>{if(Q)Z(H.nativeError(Q,J));else if(this.options.resolveWithObject)$({data:K,info:U});else $(K)})})});else return new Promise(($,Z)=>{c0.pipeline(this.options,(Q,K,U)=>{if(Q)Z(H.nativeError(Q,J));else if(this.options.resolveWithObject)$({data:K,info:U});else $(K)})})}n7.exports=function(q){Object.assign(q.prototype,{toFile:QZ,toBuffer:KZ,keepExif:UZ,withExif:YZ,withExifMerge:HZ,keepIccProfile:XZ,withIccProfile:GZ,keepMetadata:NZ,withMetadata:WZ,toFormat:BZ,jpeg:VZ,jp2:AZ,png:_Z,webp:EZ,tiff:LZ,avif:jZ,heif:TZ,jxl:FZ,gif:RZ,raw:zZ,tile:IZ,timeout:CZ,_updateFormatOut:kZ,_setBooleanOption:MZ,_read:SZ,_pipeline:wZ})}});var o7=E((ZU,t7)=>{var DZ=M("events"),O2=V2(),t=Y0(),{runtimePlatformArch:PZ}=_1(),c=q2(),s7=PZ(),M1=c.libvipsVersion(),C0=c.format();C0.heif.output.alias=["avif","heic"];C0.jpeg.output.alias=["jpe","jpg"];C0.tiff.output.alias=["tif"];C0.jp2k.output.alias=["j2c","j2k","jp2","jpx"];var OZ={nearest:"nearest",bilinear:"bilinear",bicubic:"bicubic",locallyBoundedBicubic:"lbb",nohalo:"nohalo",vertexSplitQuadraticBasisSpline:"vsqbs"},r0={vips:M1.semver};if(!M1.isGlobal)if(!M1.isWasm)try{r0=M(`@img/sharp-${s7}/versions`)}catch(q){try{r0=M(`@img/sharp-libvips-${s7}/versions`)}catch(J){}}else try{r0=(()=>{throw new Error("Cannot require module "+"@img/sharp-wasm32/versions");})()}catch(q){}r0.sharp=B1().version;if(r0.heif&&C0.heif)C0.heif.input.fileSuffix=[".avif"],C0.heif.output.alias=["avif"];function i7(q){if(t.bool(q))if(q)return c.cache(50,20,100);else return c.cache(0,0,0);else if(t.object(q))return c.cache(q.memory,q.files,q.items);else return c.cache()}i7(!0);function yZ(q){return c.concurrency(t.integer(q)?q:null)}if(O2.familySync()===O2.GLIBC&&!c._isUsingJemalloc())c.concurrency(1);else if(O2.familySync()===O2.MUSL&&c.concurrency()===1024)c.concurrency(M("os").availableParallelism());var vZ=new DZ.EventEmitter;function xZ(){return c.counters()}function bZ(q){return c.simd(t.bool(q)?q:null)}function hZ(q){if(t.object(q))if(Array.isArray(q.operation)&&q.operation.every(t.string))c.block(q.operation,!0);else throw t.invalidParameterError("operation","Array<string>",q.operation);else throw t.invalidParameterError("options","object",q)}function fZ(q){if(t.object(q))if(Array.isArray(q.operation)&&q.operation.every(t.string))c.block(q.operation,!1);else throw t.invalidParameterError("operation","Array<string>",q.operation);else throw t.invalidParameterError("options","object",q)}t7.exports=function(q){q.cache=i7,q.concurrency=yZ,q.counters=xZ,q.simd=bZ,q.format=C0,q.interpolators=OZ,q.versions=r0,q.queue=vZ,q.block=hZ,q.unblock=fZ}});var J9=E((KU,q9)=>{var _0=U7();M7()(_0);y7()(_0);x7()(_0);f7()(_0);u7()(_0);l7()(_0);e7()(_0);o7()(_0);q9.exports=_0});import{existsSync as S9}from"fs";import{resolve as rZ}from"path";import{existsSync as v1}from"fs";import{mkdir as x1,rm as v9}from"fs/promises";import{tmpdir as x9}from"os";import{isAbsolute as O1,join as b9,resolve as h9,sep as y1}from"path";function b1(q,J,$=!0){if(O1(q))return q;let Z=[];if($){let Q=J.split(y1).slice(0,-1).join(y1);if(Q&&!O1(Q))Z.push(process.cwd());if(Q)Z.push(Q)}else Z.push(process.cwd());return Z.push(q),h9(...Z)}async function h1(q="iconz-"){let J=b9(x9(),`${q}${Date.now()}-${Math.random().toString(36).slice(2)}`);return await x1(J,{recursive:!0}),J}async function e(q){if(!v1(q))await x1(q,{recursive:!0})}async function f1(q){if(v1(q)&&q.includes("iconz-"))await v9(q,{recursive:!0,force:!0})}var X2=v2(n5(),1);import{writeFile as Eq}from"fs/promises";import{join as e5}from"path";function v(q){if(typeof q==="number")return{width:q,height:q};let[J,$]=q.split("x").map(Number);return{width:J??0,height:$??0}}function K0(q,J){let $=q,Z=/\{\{([^}]+)\}\}/g,Q;while((Q=Z.exec(q))!==null){let K=Q[1]?.trim();if(!K)continue;let U=Vq(J,K);if(U!==void 0)$=$.replace(Q[0]??"",String(U))}return $}function Vq(q,J){let $=J.split("."),Z=q;for(let Q of $){if(Z===null||Z===void 0)return;if(typeof Z!=="object")return;Z=Z[Q]}return Z}function _q(q=new Date){let J=($,Z=2)=>String($).padStart(Z,"0");return{year:String(q.getFullYear()),month:J(q.getMonth()+1),day:J(q.getDate()),hour:J(q.getHours()),minute:J(q.getMinutes()),second:J(q.getSeconds()),millisecond:J(q.getMilliseconds(),3),iso:q.toISOString(),timestamp:q.getTime()}}function U0(q,J,$){let[Z,Q]=typeof q==="number"?[q,q]:q.split("x").map(Number);return{width:Z??0,height:Q??0,dims:`${Z}x${Q}`,size:q,counter:J,date:_q(),meta:$,env:process.env}}var Rq={"16x16":"ic04","16x16@2x":"ic05","32x32":"ic05","32x32@2x":"ic11","64x64":"ic11","128x128":"ic07","128x128@2x":"ic13","256x256":"ic08","256x256@2x":"ic14","512x512":"ic09","512x512@2x":"ic10","1024x1024":"ic10"};async function s5(q,J,$){let Z=J.folder?e5($.outputDir,J.folder):$.outputDir;await e(Z);let Q=new X2.Icns;for(let[_,R]of q){let{width:j,height:C}=v(_),T=`${j}x${C}`,I=Rq[T];if(I)try{let S=X2.IcnsImage.fromPNG(R,I);Q.append(S)}catch(S){console.warn(`Failed to add ${T} to ICNS: ${S}`)}}let U=Array.from(q.keys()).reduce((_,R)=>{let j=v(_),C=v(R),T=j.width*j.height;return C.width*C.height>T?R:_}),Y=$.counter??1,X=U0(U,Y),G=`${K0(J.name,X)}.icns`,W=e5(Z,G);await Eq(W,Q.data);let B=v(U);return{path:W,format:"icns",dimensions:B,size:Q.data.length}}function i5(q){for(let J of q){let{width:$,height:Z}=v(J);if($!==Z)return!1}return!0}var N4=v2(X4(),1);import{writeFile as wq}from"fs/promises";import{join as G4}from"path";async function W4(q,J,$){let Z=J.folder?G4($.outputDir,J.folder):$.outputDir;await e(Z);let K=Array.from(q.keys()).reduce((R,j)=>{let C=v(R),T=v(j),I=C.width*C.height;return T.width*T.height>I?j:R}),U=$.counter??1,Y=U0(K,U),X=`${K0(J.name,Y)}.ico`,G=G4(Z,X),W=Array.from(q.values()),B=await N4.default(W);await wq(G,B);let _=v(K);return{path:G,format:"ico",dimensions:_,size:B.length}}function B4(q){for(let J of q){let{width:$,height:Z}=v(J);if($!==Z)return!1}return!0}import{writeFile as J1}from"fs/promises";import{join as h0}from"path";async function $1(q,J,$){let Z=[],Q=J.folder?h0($.outputDir,J.folder):$.outputDir;await e(Q);let K=$.counter??1;for(let[U,Y]of q){let X=v(U),G=U0(U,K++),W=`${K0(J.name,G)}.png`,B=h0(Q,W);await J1(B,Y),Z.push({path:B,format:"png",dimensions:X,size:Y.length})}return Z}async function V4(q,J,$){let Z=[],Q=J.folder?h0($.outputDir,J.folder):$.outputDir;await e(Q);let K=$.counter??1;for(let[U,Y]of q){let X=v(U),G=U0(U,K++),W=`${K0(J.name,G)}.webp`,B=h0(Q,W);await J1(B,Y),Z.push({path:B,format:"webp",dimensions:X,size:Y.length})}return Z}async function _4(q,J,$){let Z=[],Q=J.folder?h0($.outputDir,J.folder):$.outputDir;await e(Q);let K=$.counter??1;for(let[U,Y]of q){let X=v(U),G=U0(U,K++),W=`${K0(J.name,G)}.avif`,B=h0(Q,W);await J1(B,Y),Z.push({path:B,format:"avif",dimensions:X,size:Y.length})}return Z}import{writeFile as Dq}from"fs/promises";import{join as E4}from"path";async function R4(q,J,$){let Z=[],Q=J.folder?E4($.outputDir,J.folder):$.outputDir;await e(Q);let K=$.counter??1;for(let[U,Y]of q){let X=v(U),G=U0(U,K++),W=`${K0(J.name,G)}.svg`,B=E4(Q,W),_=Y.toString("utf-8");if(J.options){let R=J.options;if(R.addDimensions!==!1){if(!_.includes("width="))_=_.replace(/<svg/,`<svg width="${X.width}" height="${X.height}"`)}if(R.viewBox)if(_.includes("viewBox="))_=_.replace(/viewBox="[^"]*"/,`viewBox="${R.viewBox}"`);else _=_.replace(/<svg/,`<svg viewBox="${R.viewBox}"`);else if(R.addDimensions!==!1&&!_.includes("viewBox="))_=_.replace(/<svg/,`<svg viewBox="0 0 ${X.width} ${X.height}"`);if(R.removeXmlDeclaration)_=_.replace(/<\?xml[^>]*\?>\s*/g,"");if(R.pretty)_=_.replace(/></g,`>
<`).split(`
`).map((j,C)=>{let T=(j.match(/<[^/]/g)||[]).length;return C===0?j:"\t".repeat(Math.max(0,T-1))+j}).join(`
`)}await Dq(B,_,"utf-8"),Z.push({path:B,format:"svg",dimensions:X,size:Buffer.byteLength(_,"utf-8")})}return Z}function A4(q){return!0}var L4=new Map,j4=new Map,T4=new Map;function L0(q,J){L4.set(q,J)}function F4(q){return L4.get(q)}function G2(q,J){j4.set(q,J)}function z4(q){return j4.get(q)}function N2(q,J){T4.set(q,J)}function I4(q){return T4.get(q)}var C4=new Map;function j0(q,J){C4.set(q,J)}function k4(q){return C4.get(q)}var M4=new Map;function T0(q,J){M4.set(q,J)}function S4(q){return M4.get(q)}function Pq(){L0("png",$1),j0("png",{compressionLevel:9}),T0("png",(q,J)=>q.png(J)),L0("webp",V4),j0("webp",{lossless:!1}),T0("webp",(q,J,$)=>q.webp({...J,quality:$??90})),L0("avif",_4),j0("avif",{}),T0("avif",(q,J,$)=>q.avif({...J,quality:$??80})),L0("jpeg",$1),j0("jpeg",{chromaSubsampling:"4:4:4"}),T0("jpeg",(q,J,$)=>q.jpeg({...J,quality:$??90})),L0("ico",W4),G2("ico",B4),N2("ico","png"),j0("ico",{compressionLevel:9}),T0("ico",(q,J)=>q.png(J)),L0("icns",s5),G2("icns",i5),N2("icns","png"),j0("icns",{compressionLevel:9}),T0("icns",(q,J)=>q.png(J)),L0("svg",R4),G2("svg",A4),N2("svg","png"),j0("svg",{pretty:!1,removeXmlDeclaration:!1,addDimensions:!0}),T0("svg",(q,J)=>q.png(J))}Pq();var K2=v2(J9(),1);import{readFile as gZ}from"fs/promises";class S1{sharp;buffer=null;plugins=[];options;constructor(q={}){this.options=q,this.sharp=K2.default(void 0,q.input)}async load(q){if(Buffer.isBuffer(q))this.buffer=q;else this.buffer=await gZ(q);return this.sharp=K2.default(this.buffer,this.options.input),this}use(q){return this.plugins.push(q),this}async metadata(){return await this.sharp.metadata()}async resize(q,J){if(!this.buffer)throw Error("No image loaded. Call load() first.");let $=v(q),Z={...this.options.resize,...J,width:$.width,height:$.height},Q=K2.default(this.buffer,this.options.input);if(this.plugins.length>0){let K={config:{},buffer:this.buffer,image:Q};for(let U of this.plugins)await U.execute(K),Q=K.image}return Q=Q.resize(Z),await Q.toBuffer()}async toFormat(q,J,$){let Z=K2.default(q),Q=S4(J),K=k4(J);if(Q&&K)Z=Q(Z,K,this.options.quality);else Z=Z.png({compressionLevel:9});return Z=Z.resize($.width,$.height,{fit:"contain",background:{r:0,g:0,b:0,alpha:0}}),await Z.toBuffer()}async generateSizes(q,J="png"){let $=new Map;for(let Z of q){let Q=await this.resize(Z),K=v(Z),U=await this.toFormat(Q,J,K);$.set(Z,U)}return $}clone(){let q=new S1(this.options);return q.buffer=this.buffer,q.plugins=[...this.plugins],q}async cleanup(){for(let q of this.plugins)if(q.teardown)await q.teardown()}}function $9(q){return new S1(q)}class Z9{config;startTime=0;constructor(q){this.config={cleanTemp:!0,...q}}async generate(){this.startTime=Date.now();let q={icons:{},failed:[],temp:[],stats:{total:0,success:0,failed:0,duration:0}};try{let J=Buffer.isBuffer(this.config.input)?this.config.output:b1(this.config.output,this.config.input);await e(J);let $=this.config.temp||await h1();q.temp.push($);let Z=$9(this.config.options);if(await Z.load(this.config.input),this.config.plugins)for(let U of this.config.plugins)Z.use(U);let Q=this.config.icons||{},K=1;for(let[U,Y]of Object.entries(Q)){if(Y.enabled===!1)continue;q.stats.total+=Y.sizes.length;try{if(!this.validateSizes(Y))throw Error(`Invalid sizes for ${Y.type} format. All sizes must be square.`);let X=await Z.generateSizes(Y.sizes,this.getProcessingFormat(Y.type)),G=await this.generateByType(X,Y,{outputDir:J,counter:K});q.icons[U]=Array.isArray(G)?G:[G],q.stats.success+=Array.isArray(G)?G.length:1,K+=Y.sizes.length}catch(X){let G=X instanceof Error?X.message:String(X);q.failed.push({config:U,error:G}),q.stats.failed+=Y.sizes.length}}if(await Z.cleanup(),this.config.cleanTemp&&$!==this.config.temp)await f1($),q.temp=[]}catch(J){let $=J instanceof Error?J.message:String(J);throw Error(`Icon generation failed: ${$}`)}return q.stats.duration=Date.now()-this.startTime,q}async generateByType(q,J,$){let Z=F4(J.type);if(!Z)throw Error(`Unsupported icon type: ${J.type}. No generator registered for this format.`);return await Z(q,J,$)}validateSizes(q){let J=z4(q.type);if(!J)return!0;return J(q.sizes)}getProcessingFormat(q){return I4(q)||q}getConfig(){return this.config}}function Q9(q){return new Z9(q)}var K9={name:"Android",description:"Android app icons for all densities and Play Store (2024-2025)",icons:{playStore:{type:"png",name:"ic_launcher-playstore",sizes:[512],folder:"android"},adaptive:{type:"png",name:"ic_launcher-{{dims}}",sizes:[192,144,96,72,48],folder:"android/adaptive"},legacy:{type:"png",name:"ic_launcher_legacy-{{dims}}",sizes:[512,192,144,96,72,48,36],folder:"android/legacy"}},options:{format:"png",quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0}}}},U9={name:"Android Adaptive",description:"Android adaptive icons with safe zone (40% radius)",icons:{foreground:{type:"png",name:"ic_launcher_foreground-{{dims}}",sizes:[432,324,216,162,108],folder:"android/adaptive/foreground"},monochrome:{type:"png",name:"ic_launcher_monochrome-{{dims}}",sizes:[432,324,216,162,108],folder:"android/adaptive/monochrome"}},options:{format:"png",quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0}}}};var Y9={name:"chromeExtension",description:"Chrome Extension icons (Manifest V3)",icons:{extensionIcons:{type:"png",name:"icon-{{width}}",sizes:[16,32,48,128],folder:"icons",enabled:!0}},options:{quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}},H9={name:"chromeExtensionComplete",description:"Chrome Extension icons with Web Store assets",icons:{extensionIcons:{type:"png",name:"icon-{{width}}",sizes:[16,32,48,128],folder:"icons",enabled:!0},actionIcons:{type:"png",name:"action-{{width}}",sizes:[16,24,32],folder:"icons",enabled:!0},storeIcon:{type:"png",name:"store-128",sizes:[128],folder:"icons",enabled:!0}},options:{quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}},X9={name:"edgeExtension",description:"Microsoft Edge Extension icons",icons:{extensionIcons:{type:"png",name:"icon-{{width}}",sizes:[16,32,48,128],folder:"assets",enabled:!0}},options:{quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}},G9={name:"firefoxExtension",description:"Firefox Extension icons",icons:{extensionIcons:{type:"png",name:"icon-{{width}}",sizes:[48,96,128],folder:"icons",enabled:!0}},options:{quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}},N9={name:"universalExtension",description:"Universal browser extension icons (Chrome, Edge, Firefox, Safari)",icons:{extensionIcons:{type:"png",name:"icon-{{width}}",sizes:[16,24,32,48,96,128],folder:"icons",enabled:!0}},options:{quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}};var W9={name:"electron",description:"Electron desktop application icons (Windows, macOS, Linux)",icons:{windowsIco:{type:"ico",name:"icon",sizes:[16,24,32,48,64,128,256],folder:"build",enabled:!0},macosIcns:{type:"icns",name:"icon",sizes:[16,32,64,128,256,512,1024],folder:"build",enabled:!0,options:{retina:!0}},linuxPng:{type:"png",name:"icon",sizes:[512],folder:"build",enabled:!0}},options:{quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}},B9={name:"electronBuilder",description:"Electron Builder optimized icons",icons:{windows:{type:"ico",name:"icon",sizes:[16,24,32,48,64,128,256],folder:"build",enabled:!0},macos:{type:"icns",name:"icon",sizes:[16,32,64,128,256,512,1024],folder:"build",enabled:!0,options:{retina:!0}},linux512:{type:"png",name:"512x512",sizes:[512],folder:"build/icons",enabled:!0},linux256:{type:"png",name:"256x256",sizes:[256],folder:"build/icons",enabled:!0},linux128:{type:"png",name:"128x128",sizes:[128],folder:"build/icons",enabled:!0}},options:{quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}},V9={name:"electronForge",description:"Electron Forge optimized icons",icons:{windowsIco:{type:"ico",name:"icon",sizes:[16,24,32,48,64,128,256],folder:"assets",enabled:!0},macosIcns:{type:"icns",name:"icon",sizes:[16,32,64,128,256,512,1024],folder:"assets",enabled:!0,options:{retina:!0}},linuxPng:{type:"png",name:"icon",sizes:[512],folder:"assets",enabled:!0}},options:{quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}};var _9={name:"iOS",description:"iOS app icons for iPhone, iPad, and App Store (2024-2025)",icons:{appStore:{type:"png",name:"AppIcon-AppStore",sizes:[1024],folder:"ios"},iphone:{type:"png",name:"AppIcon-iPhone-{{dims}}",sizes:[180,120,87,80,60,58,40,29],folder:"ios/iPhone"},ipad:{type:"png",name:"AppIcon-iPad-{{dims}}",sizes:[167,152,76,40,29],folder:"ios/iPad"},unified:{type:"png",name:"AppIcon-{{dims}}",sizes:[1024,180,167,152],folder:"ios"}},options:{format:"png",quality:100,resize:{fit:"contain",background:{r:255,g:255,b:255,alpha:1},kernel:"lanczos3"}}},E9={name:"iOS Marketing",description:"iOS marketing and promotional icon sizes",icons:{marketing:{type:"png",name:"AppIcon-Marketing-{{dims}}",sizes:[1024,512,256],folder:"ios/marketing"}},options:{format:"png",quality:100}};var R9={name:"macOS",description:"macOS app icons with Retina support (macOS 11+)",icons:{appIcon:{type:"icns",name:"AppIcon",sizes:[1024,512,256,128,64,32,16],folder:"macos"}},options:{format:"png",quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0},kernel:"lanczos3"}}},A9={name:"macOS Document",description:"macOS document type icons",icons:{document:{type:"icns",name:"DocIcon",sizes:[512,256,128,32,16],folder:"macos/documents"}},options:{format:"png",quality:100}},L9={name:"macOS Asset Catalog",description:"Individual PNG files for Xcode asset catalog",icons:{iconset:{type:"png",name:"icon_{{dims}}",sizes:[1024,512,256,128,64,32,16],folder:"macos/AppIcon.iconset"},iconset2x:{type:"png",name:"icon_{{width}}x{{height}}@2x",sizes:[512,256,128,64,32,16],folder:"macos/AppIcon.iconset"}},options:{format:"png",quality:100}};var j9={name:"PWA",description:"Progressive Web App icons for all platforms (2024-2025)",icons:{standard:{type:"png",name:"icon-{{dims}}",sizes:[512,384,256,192,144,96,72,48],folder:"pwa"},favicon:{type:"ico",name:"favicon",sizes:[48,32,16],folder:"pwa"},appleTouchIcon:{type:"png",name:"apple-touch-icon",sizes:[180],folder:"pwa"}},options:{format:"png",quality:95,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0}}}},T9={name:"PWA Maskable",description:"PWA maskable icons with 40% safe zone for Android adaptive icons",icons:{maskable:{type:"png",name:"icon-maskable-{{dims}}",sizes:[512,384,256,192],folder:"pwa/maskable"}},options:{format:"png",quality:95,resize:{fit:"contain",background:{r:255,g:255,b:255,alpha:1}}}},F9={name:"PWA Complete",description:"Complete PWA icon set with all formats and purposes",icons:{any:{type:"png",name:"icon-{{dims}}",sizes:[512,384,256,192,144,96,72,48],folder:"pwa/any"},maskable:{type:"png",name:"icon-maskable-{{dims}}",sizes:[512,384,256,192],folder:"pwa/maskable"},favicon:{type:"ico",name:"favicon",sizes:[48,32,16],folder:"."},faviconPng:{type:"png",name:"favicon-{{dims}}",sizes:[32,16],folder:"."},appleTouchIcon:{type:"png",name:"apple-touch-icon",sizes:[180,167,152,120],folder:"."}},options:{format:"png",quality:95}};var z9={name:"Windows 11",description:"Windows 11 app icons with Fluent Design support (2024-2025)",icons:{app:{type:"ico",name:"app",sizes:[256,128,96,64,48,32,24,16],folder:"windows"},tile:{type:"png",name:"tile-{{dims}}",sizes:[310,150,70],folder:"windows/tiles"},storeLogo:{type:"png",name:"store-logo-{{dims}}",sizes:[300,150,50],folder:"windows/store"}},options:{format:"png",quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0}}}},I9={name:"Windows Legacy",description:"Windows 7/8/10 app icons",icons:{app:{type:"ico",name:"app",sizes:[256,128,64,48,32,24,16],folder:"windows"},msTile:{type:"png",name:"mstile-{{dims}}",sizes:["310x150",310,270,150,144,70],folder:"windows/tiles"}},options:{format:"png",quality:100}},C9={name:"Windows Universal",description:"Universal Windows icons (Windows 7 through 11)",icons:{app:{type:"ico",name:"app",sizes:[256,128,96,64,48,32,24,16],folder:"."}},options:{format:"png",quality:100,resize:{fit:"contain",background:{r:0,g:0,b:0,alpha:0}}}};var y2={ios:_9,iosMarketing:E9,android:K9,androidAdaptive:U9,pwa:j9,pwaMaskable:T9,pwaComplete:F9,windows11:z9,windowsLegacy:I9,windowsUniversal:C9,macos:R9,macosDocument:A9,macosAssetCatalog:L9,electron:W9,electronBuilder:B9,electronForge:V9,chromeExtension:Y9,chromeExtensionComplete:H9,edgeExtension:X9,firefoxExtension:G9,universalExtension:N9};function k9(){return Object.keys(y2)}import{existsSync as dZ}from"fs";import{readFile as uZ}from"fs/promises";import{join as mZ}from"path";var lZ=[".iconz.ts",".iconz.js",".iconz.mjs",".iconz.json",".iconzrc.json",".iconzrc"];function w1(q=process.cwd()){for(let J of lZ){let $=mZ(q,J);if(dZ($))return $}return null}async function cZ(q){if(q.endsWith(".ts")||q.endsWith(".js")||q.endsWith(".mjs")){let J=await import(q);return J.default||J}if(q.endsWith(".json")||q.endsWith(".iconzrc")){let J=await uZ(q,"utf-8");return JSON.parse(J)}throw Error(`Unsupported config file type: ${q}`)}async function M9(q=process.cwd()){let J=w1(q);if(!J)return null;return cZ(J)}var U2=process.argv.slice(2),w9=`
Iconz - Modern Icon Generator v2.0.0

Usage:
  iconz [options]
  iconz                    Auto-detect config file and generate icons

Options:
  -i, --input <path>      Input image path (required if no config)
  -o, --output <path>     Output directory (default: current directory)
  -p, --preset <name>     Use a preset (ios, android, pwa, windows, macos, etc.)
  -c, --config <path>     Load configuration from file (.js, .ts, .json)
  --list-presets          List all available presets
  --stdin                 Read image from stdin
  -h, --help              Show this help message

Examples:
  # Auto-detect config file (.iconz.ts, .iconz.js, etc.)
  iconz

  # Generate PWA icons
  iconz -i logo.svg -o ./public -p pwa

  # Use specific config file
  iconz -c ./.iconz.js

  # Multiple presets
  iconz -i logo.svg -p ios,android,pwa

  # From stdin
  cat logo.svg | iconz --stdin -o ./icons -p pwa

Config Files:
  Automatically detects: .iconz.{ts,js,mjs,json}, .iconzrc{.json,}

Available presets:
  ${k9().join(", ")}

For more information, visit: https://github.com/SuavePlan/iconz
`;async function aZ(){try{if(U2.includes("-h")||U2.includes("--help"))console.log(w9),process.exit(0);if(U2.includes("--list-presets")){console.log(`Available presets:
`);for(let[Z,Q]of Object.entries(y2))console.log(`  ${Z.padEnd(20)} ${Q.description}`);process.exit(0)}let q=null;if(U2.length===0){let Z=w1();if(Z)console.log(`Found config: ${Z}`),q=await M9();else console.log(w9),process.exit(0)}else q=await pZ(U2);if(!q||!q.input)console.error("Error: Input image is required. Use -i or --stdin, or create a config file"),process.exit(1);console.log("Generating icons...");let $=await Q9(q).generate();if(console.log(`
Generation complete!
`),console.log(`Total:    ${$.stats.total}`),console.log(`Success:  ${$.stats.success}`),console.log(`Failed:   ${$.stats.failed}`),console.log(`Duration: ${$.stats.duration}ms
`),$.stats.success>0){console.log("Generated icons:");for(let[Z,Q]of Object.entries($.icons)){console.log(`  ${Z}:`);for(let K of Q){let U=`${K.dimensions.width}x${K.dimensions.height}`;console.log(`    - ${K.path} (${U})`)}}}if($.failed.length>0){console.log(`
Failed:`);for(let Z of $.failed)console.error(`  - ${Z.config}: ${Z.error}`)}process.exit($.stats.failed>0?1:0)}catch(q){console.error("Error:",q instanceof Error?q.message:String(q)),process.exit(1)}}async function pZ(q){let J={};for(let $=0;$<q.length;$++)switch(q[$]){case"-i":case"--input":J.input=q[++$]??"";break;case"-o":case"--output":J.output=q[++$]??".";break;case"-p":case"--preset":{let Q=(q[++$]??"").split(",");for(let K of Q){let U=K.trim(),Y=y2[U];if(Y)J.icons={...J.icons,...Y.icons},J.options={...J.options,...Y.options};else console.warn(`Warning: Unknown preset "${K}"`)}break}case"-c":case"--config":{let Q=rZ(q[++$]??"");if(!S9(Q))throw Error(`Config file not found: ${Q}`);let K=await import(Q);J={...J,...K.default||K};break}case"--stdin":{let Q=[];for await(let K of process.stdin)Q.push(K);J.input=Buffer.concat(Q);break}}if(!J.output)J.output=".";if(J.input&&typeof J.input==="string"&&!S9(J.input))throw Error(`Input file not found: ${J.input}`);return J}aZ();
